<!DOCTYPE html><html lang="en"><head>
        <title>
            AZ-700-Designing-and-Implementing-Microsoft-Azure-Networking-Solutions
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D7e040d6fba448f60ca3262126db60cad96222bbc.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                AZ-700-Designing-and-Implementing-Microsoft-Azure-Networking-Solutions
            </a>
            <a href="https://github.com/MicrosoftLearning/AZ-700-Designing-and-Implementing-Microsoft-Azure-Networking-Solutions" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="#create-testvm1">Create TestVM1</a></li><li class="nav-item"><a class="nav-link" href="#create-testvm2">Create TestVM2</a></li><li class="nav-item"><a class="nav-link" href="#connect-to-the-test-vms-using-rdp">Connect to the Test VMs using RDP</a></li></ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="m01---unit-6-configure-dns-settings-in-azure">M01 - Unit 6 Configure DNS settings in azure</h1>

<h2 id="exercise-scenario">Exercise scenario</h2>
<p>In this unit, you will configure DNS name resolution for Contoso Ltd. You will create a private DNS zone named contoso.com, link the VNets for registration and resolution, and then create two virtual machines and test the configuration.</p>

<p>In this exercise, you will:</p>

<ul>
  <li>Task 1: Create a private DNS Zone</li>
  <li>Task 2: Link subnet for auto registration</li>
  <li>Task 3: Create Virtual Machines to test the configuration</li>
  <li>Task 4: Verify records are present in the DNS zone</li>
</ul>

<h2 id="task-1-create-a-private-dns-zone">Task 1: Create a private DNS Zone</h2>

<ol>
  <li>
    <p>Go to <a href="https://portal.azure.com/">Azure Portal</a>.</p>
  </li>
  <li>
    <p>On the Azure home page, in the search bar, type dns, and then select <strong>Private DNS zones</strong>.<br>
â€Ž<a href="../media/create-private-dns-zone.png" target="_blank"><img src="../media/create-private-dns-zone.png" alt="Azure Portal home page with dns search."></a></p>
  </li>
  <li>
    <p>In Private DNS zones, select <strong>+ Create</strong>.</p>
  </li>
  <li>
    <p>Use the information in the following table to create the private DNS zone.</p>
  </li>
</ol>

<table>
  <thead>
    <tr>
      <th><strong>Tab</strong></th>
      <th><strong>Option</strong></th>
      <th><strong>Value</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Basics</td>
      <td>Resource group</td>
      <td>ContosoResourceGroup</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Name</td>
      <td>Contoso.com</td>
    </tr>
    <tr>
      <td>Tags</td>
      <td>No changes required</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>Review + create</td>
      <td>Review your settings and select Create</td>
      <td>&nbsp;</td>
    </tr>
  </tbody>
</table>

<ol>
  <li>
    <p>Wait until the deployment is complete, and then select <strong>Go to resource</strong>.</p>
  </li>
  <li>
    <p>Verify that the zone has been created.</p>
  </li>
</ol>

<h2 id="task-2-link-subnet-for-auto-registration">Task 2: Link subnet for auto registration</h2>

<ol>
  <li>
    <p>In Contoso.com, under <strong>Settings</strong>, select <strong>Virtual network links</strong>.</p>
  </li>
  <li>
    <table>
      <tbody>
        <tr>
          <td>On Contoso.com</td>
          <td>Virtual network links, select <strong>+ Add</strong>.</td>
        </tr>
      </tbody>
    </table>
  </li>
</ol>

<table>
  <tbody>
    <tr>
      <td>![contoso.com</td>
      <td>Virtual links with + Add highlighted.](/AZ-700-Designing-and-Implementing-Microsoft-Azure-Networking-Solutions/Instructions/media/add-network-link-dns.png)</td>
    </tr>
  </tbody>
</table>

<ol>
  <li>Use the information in the following table to add the virtual network link.</li>
</ol>

<table>
  <thead>
    <tr>
      <th><strong>Option</strong></th>
      <th><strong>Value</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Link name</td>
      <td>CoreServicesVnetLink</td>
    </tr>
    <tr>
      <td>Subscription</td>
      <td>No changes required</td>
    </tr>
    <tr>
      <td>Virtual Network</td>
      <td>CoreServicesVnet (ContosoResourceGroup)</td>
    </tr>
    <tr>
      <td>Enable auto registration</td>
      <td>Selected</td>
    </tr>
    <tr>
      <td>Review your settings and select OK.</td>
      <td>&nbsp;</td>
    </tr>
  </tbody>
</table>

<ol>
  <li>
    <p>Select <strong>Refresh</strong>.</p>
  </li>
  <li>
    <p>Verify that the CoreServicesVnetLink has been created, and that auto-registration is enabled.</p>
  </li>
  <li>
    <p>Repeat steps 2 - 5 for the ManufacturingVnet, using the information in the following table:</p>
  </li>
</ol>

<table>
  <thead>
    <tr>
      <th><strong>Option</strong></th>
      <th><strong>Value</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Link name</td>
      <td>ManufacturingVnetLink</td>
    </tr>
    <tr>
      <td>Subscription</td>
      <td>No changes required</td>
    </tr>
    <tr>
      <td>Virtual Network</td>
      <td>ManufacturingVnet (ContosoResourceGroup)</td>
    </tr>
    <tr>
      <td>Enable auto registration</td>
      <td>Selected</td>
    </tr>
    <tr>
      <td>Review your settings and select OK.</td>
      <td>&nbsp;</td>
    </tr>
  </tbody>
</table>

<ol>
  <li>
    <p>Select <strong>Refresh</strong>.</p>
  </li>
  <li>
    <p>Verify that the ManufacturingVnetLink has been created, and that auto-registration is enabled.</p>
  </li>
  <li>
    <p>Repeat steps 2 - 5 for the ResearchVnet, using the information in the following table:</p>
  </li>
</ol>

<table>
  <thead>
    <tr>
      <th><strong>Option</strong></th>
      <th><strong>Value</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Link name</td>
      <td>ResearchVnetLink</td>
    </tr>
    <tr>
      <td>Subscription</td>
      <td>No changes required</td>
    </tr>
    <tr>
      <td>Virtual Network</td>
      <td>ResearchVnet (ContosoResourceGroup)</td>
    </tr>
    <tr>
      <td>Enable auto registration</td>
      <td>Selected</td>
    </tr>
    <tr>
      <td>Review your settings and select OK.</td>
      <td>&nbsp;</td>
    </tr>
  </tbody>
</table>

<ol>
  <li>
    <p>Select <strong>Refresh</strong>.</p>
  </li>
  <li>
    <p>Verify that the ResearchVnetLink has been created, and that auto-registration is enabled.</p>
  </li>
</ol>

<h2 id="task-3-create-virtual-machines-to-test-the-configuration">Task 3: Create Virtual Machines to test the configuration</h2>

<p>In this section, you will create two test VMs to test the Private DNS zone configuration.</p>

<h3 id="create-testvm1">Create TestVM1</h3>

<ol>
  <li>
    <p>On the Azure home page, using the global search type <strong>Virtual Machines</strong> and select virtual machines under services.</p>
  </li>
  <li>
    <p>In Virtual Machines, select <strong>+ Create; + Virtual machine</strong>.</p>
  </li>
  <li>
    <p>Use the information in the following table to create your first VM.</p>
  </li>
</ol>

<table>
  <thead>
    <tr>
      <th><strong>Tab</strong></th>
      <th><strong>Option</strong></th>
      <th><strong>Value</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Basics</td>
      <td>Resource group</td>
      <td>ContosoResourceGroup</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Virtual machine name</td>
      <td>TestVM1</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Region</td>
      <td>East US</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Availability options</td>
      <td>No infrastructure redundancy required</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Image</td>
      <td>Windows Server 2022 Datacenter- Gen1</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Azure Spot instance</td>
      <td>Not selected</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Size</td>
      <td>Standard_D2s_v3 - 2vcpus, 8GiB memory</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Username</td>
      <td>TestUser</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Password</td>
      <td>TestPa$$w0rd!</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Public inbound ports</td>
      <td>Allow selected ports</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Select inbound ports</td>
      <td>RDP (3389)</td>
    </tr>
    <tr>
      <td>Disks</td>
      <td>No changes required</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>Networking</td>
      <td>Virtual network</td>
      <td>CoreServicesVnet</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Subnet</td>
      <td>DatabaseSubnet (10.20.20.0/24)</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Public IP</td>
      <td>(new) TestVM1-ip</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>NIC network security group</td>
      <td>Basic</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Public inbound ports</td>
      <td>Allow selected ports</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Select inbound ports</td>
      <td>RDP (3389)</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Load balancing</td>
      <td>Not selected</td>
    </tr>
    <tr>
      <td>Management</td>
      <td>No changes required</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>Advanced</td>
      <td>No changes required</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>Tags</td>
      <td>No changes required</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>Review + create</td>
      <td>Review your settings and select Create</td>
      <td>&nbsp;</td>
    </tr>
  </tbody>
</table>

<ol>
  <li>While the deployment is in progress, you can proceed with creating TestVM2.</li>
</ol>

<h3 id="create-testvm2">Create TestVM2</h3>

<ol>
  <li>
    <p>On the Azure home page, using the global search type <strong>Virtual Machines</strong> and select virtual machines under services.</p>
  </li>
  <li>
    <p>In Virtual Machines, select <strong>+ Create; + Virtual machine</strong>.</p>
  </li>
  <li>
    <p>Use the information in the following table to create your second VM.</p>
  </li>
</ol>

<table>
  <thead>
    <tr>
      <th><strong>Tab</strong></th>
      <th><strong>Option</strong></th>
      <th><strong>Value</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Basics</td>
      <td>Resource group</td>
      <td>ContosoResourceGroup</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Virtual machine name</td>
      <td>TestVM2</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Region</td>
      <td>East US</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Availability options</td>
      <td>No infrastructure redundancy required</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Image</td>
      <td>Windows Server 2022 Datacenter- Gen1</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Azure Spot instance</td>
      <td>Not selected</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Size</td>
      <td>Standard_D2s_v3 - 2vcpus, 8GiB memory</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Username</td>
      <td>TestUser</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Password</td>
      <td>TestPa$$w0rd!</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Public inbound ports</td>
      <td>Allow selected ports</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Select inbound ports</td>
      <td>RDP (3389)</td>
    </tr>
    <tr>
      <td>Disks</td>
      <td>No changes required</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>Networking</td>
      <td>Virtual network</td>
      <td>CoreServicesVnet</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Subnet</td>
      <td>DatabaseSubnet (10.20.20.0/24)</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Public IP</td>
      <td>(new) TestVM2-ip</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>NIC network security group</td>
      <td>Basic</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Public inbound ports</td>
      <td>Allow selected ports</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Select inbound ports</td>
      <td>RDP (3389)</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Load balancing</td>
      <td>Not selected</td>
    </tr>
    <tr>
      <td>Management</td>
      <td>No changes required</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>Advanced</td>
      <td>No changes required</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>Tags</td>
      <td>No changes required</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>Review + create</td>
      <td>Review your settings and select <strong>Create</strong></td>
      <td>&nbsp;</td>
    </tr>
  </tbody>
</table>

<ol>
  <li>
    <p>When the deployment is complete, go to the Azure portal home page, and then select <strong>Virtual Machines</strong>.</p>
  </li>
  <li>
    <p>Verify that both virtual machines have been created.</p>
  </li>
</ol>

<h2 id="task-4-verify-records-are-present-in-the-dns-zone">Task 4: Verify records are present in the DNS zone</h2>

<ol>
  <li>
    <p>On the Azure Portal home page, select <strong>Private DNS zones</strong>.</p>
  </li>
  <li>
    <p>In Private DNS zones, select <strong>contoso.com</strong>.</p>
  </li>
  <li>
    <p>Verify that host (A) records are listed for both VMs, as shown:</p>
  </li>
</ol>

<p><a href="../media/contoso_com-dns-zone.png" target="_blank"><img src="../media/contoso_com-dns-zone.png" alt="Contoso.com DNS zone showing auto-registered host A records."></a></p>

<ol>
  <li>Make a note of the names and IP addresses of the VMs.</li>
</ol>

<h3 id="connect-to-the-test-vms-using-rdp">Connect to the Test VMs using RDP</h3>

<ol>
  <li>
    <p>On the Azure Portal home page, select <strong>Virtual Machines</strong>.</p>
  </li>
  <li>
    <p>Select <strong>TestVM1</strong>.</p>
  </li>
  <li>
    <p>In TestVM1, select <strong>Connect &gt; RDP</strong>.</p>
  </li>
</ol>

<p><a href="../media/connect-to-am.png" target="_blank"><img src="../media/connect-to-am.png" alt="TestVM1 with Connect and RDP highlighted."></a></p>

<ol>
  <li>
    <table>
      <tbody>
        <tr>
          <td>In TestVM1</td>
          <td>Connect, select <strong>Download RDP file</strong>.</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Save the RDP file to your desktop.</p>
  </li>
  <li>
    <p>On the Azure Portal home page, select <strong>Virtual Machines</strong>.</p>
  </li>
  <li>
    <p>Select <strong>TestVM2</strong>.</p>
  </li>
  <li>
    <p>In TestVM2, select <strong>Connect &gt; RDP</strong>.</p>
  </li>
  <li>
    <table>
      <tbody>
        <tr>
          <td>In TestVM2</td>
          <td>Connect, select <strong>Download RDP file</strong>.</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Save the RDP file to your desktop.</p>
  </li>
  <li>
    <p>Connect to TestVM1 using the RDP file, and the username <strong>TestUser</strong> and the password <strong>TestPa$w0rd!</strong>.</p>
  </li>
  <li>
    <p>Connect to TestVM2 using the RDP file, and the username <strong>TestUser</strong> and the password <strong>TestPa$w0rd!</strong>.</p>
  </li>
  <li>
    <p>On both VMs, in <strong>Choose privacy settings for your device</strong>, select <strong>Accept</strong>.</p>
  </li>
  <li>
    <p>On both VMs, if prompted, in <strong>Networks</strong>, select <strong>Yes</strong>.</p>
  </li>
  <li>
    <p>On TestVM1, open a command prompt and enter the command ipconfig /all.</p>
  </li>
  <li>
    <p>Verify that the IP address is the same as the one you noted in the DNS zone.</p>
  </li>
  <li>
    <p>Enter the command ping TestVM2.contoso.com.</p>
  </li>
  <li>Verify that you receive four replies from TestVM2.</li>
</ol>

<p>Congratulations! You have created a private DNS Zone, added a name resolution and auto-registration link, and tested name resolution in your configuration.</p>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/AZ-700-Designing-and-Implementing-Microsoft-Azure-Networking-Solutions" target="_blank" class="ml-2">
                    MicrosoftLearning/AZ-700-Designing-and-Implementing-Microsoft-Azure-Networking-Solutions
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D7e040d6fba448f60ca3262126db60cad96222bbc.js"></script>



</body></html>