<!DOCTYPE html><html lang="en"><head>
        <title>
            SC-200T00CN-Microsoft-Security-Operations-Analyst
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                SC-200T00CN-Microsoft-Security-Operations-Analyst
            </a>
            <a href="https://github.com/MicrosoftLearning/SC-200T00CN-Microsoft-Security-Operations-Analyst" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="#任务-1访问-azure-sentinel-工作区">任务 1：访问 Azure Sentinel 工作区。</a></li><li class="nav-item"><a class="nav-link" href="#任务-2使用通用事件格式连接器连接-linux-主机">任务 2：使用通用事件格式连接器连接 Linux 主机。</a></li><li class="nav-item"><a class="nav-link" href="#任务-3使用-syslog-连接器连接-linux-主机">任务 3：使用 Syslog 连接器连接 Linux 主机。</a></li><li class="nav-item"><a class="nav-link active" href="#任务-4为-syslog-连接器配置你想收集的设备及其严重性">任务 4：为 Syslog 连接器配置你想收集的设备及其严重性。</a></li></ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="模块-6---实验室-1---练习-3---使用数据连接器将-linux-主机连接到-azure-sentinel">模块 6 - 实验室 1 - 练习 3 - 使用数据连接器将 Linux 主机连接到 Azure Sentinel</h1>

<h3 id="任务-1访问-azure-sentinel-工作区">任务 1：访问 Azure Sentinel 工作区。</h3>

<p>在此任务中，你将访问 Azure Sentinel 工作区。</p>

<ol>
  <li>
    <p>使用以下密码以管理员身份登录到 WIN1 虚拟机：<strong>Pa55w.rd</strong>。</p>
  </li>
  <li>
    <p>启动 Microsoft Edge 浏览器。</p>
  </li>
  <li>
    <p>在 Microsoft Edge 浏览器中，通过 https://portal.azure.com 导航到 Azure 门户。</p>
  </li>
  <li>
    <p>在 <strong>“登录”</strong> 对话框中，复制粘贴实验室托管提供者提供的租户电子邮件帐户，然后选择 <strong>“下一步”</strong>。</p>
  </li>
  <li>
    <p>在 <strong>“输入密码”</strong> 对话框中，复制粘贴实验室托管提供者提供的<strong>租户密码</strong>，然后选择 <strong>“登录”</strong>。</p>
  </li>
  <li>
    <p>在 Azure 门户的搜索栏中，键入 <em>Sentinel</em>，然后选择 <strong>“Azure Sentinel”</strong>。</p>
  </li>
  <li>
    <p>选择你在之前的实验室中创建的 Azure Sentinel 工作区。</p>
  </li>
</ol>

<h3 id="任务-2使用通用事件格式连接器连接-linux-主机">任务 2：使用通用事件格式连接器连接 Linux 主机。</h3>

<p>在此任务中，你将通过通用事件格式 (CEF) 连接器将 Linux 主机连接到 Azure Sentinel。</p>

<ol>
  <li>
    <p>从 Azure Sentinel 的“配置”区域选择 <strong>“数据连接器”</strong>。 在“数据连接器”选项卡中，从列表中选择 <strong>“通用事件格式(CEF)”</strong> 连接器。</p>
  </li>
  <li>
    <p>在连接器信息边栏选项卡上选择 <strong>“打开连接器页面”</strong>。</p>
  </li>
  <li>
    <p>将 <em>“1.2 在 Linux 计算机上安装 CEF 收集器”</em> 中显示的命令复制到剪贴板。</p>
  </li>
  <li>
    <p>启动 LIN1 虚拟机，并使用实验室主机托管服务提供商提供的用户名和密码登录。请注意 LIN1 服务器的 IP 地址。以下面的屏幕截图为例：</p>

    <p><a href="../Media/LinuxLoginExample.png" target="_blank"><img src="../Media/LinuxLoginExample.png" alt="linux 登录"></a></p>
  </li>
  <li>
    <p>返回到 WIN1 虚拟机，右键单击开始菜单图标以管理员身份启动 Windows PowerShell，然后选择“<strong>Windows PowerShell (管理员)</strong>”。选择“是”，允许应用在出现的“<strong>用户帐户控制</strong>”窗口中运行。</p>
  </li>
  <li>
    <p>输入以下 PowerShell 命令，根据你的具体 Linux 服务器信息进行调整，然后按 Enter：</p>
  </li>
</ol>

<div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock0" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock0" class="mt-0"><code class="language-PowerShell">ssh &lt;insert your linux IP address here&gt; -l &lt;insert linux user name here&gt;
</code></pre>

<ol>
  <li>
    <p>输入“<em>是</em>”以确认连接，然后键入用户密码并按 Enter。屏幕应如下所示：</p>

    <p><a href="../Media/PSconnectLinux.png" target="_blank"><img src="../Media/PSconnectLinux.png" alt="linux 登录"></a></p>
  </li>
  <li>
    <p>现在可以粘贴前面的步骤“<em>1.2 在 Linux 计算机上安装 CEF 收集器</em>”中的命令。确保来自 Azure 的脚本在剪贴板中。在 PowerShell 中右键单击顶部栏并依次选择“<strong>编辑</strong>”、“<strong>粘贴</strong>”。粘贴后，添加“<strong>3</strong>”到单词“<em>python</em>”中，如下所示：</p>

    <p><a href="../Media/ConnectorScript.png" target="_blank"><img src="../Media/ConnectorScript.png" alt="连接器脚本"></a></p>
  </li>
  <li>
    <p>粘贴并调整脚本后，按 Enter。该脚本将在 Linux 服务器上远程运行。如果脚本处理得当，它应如以下屏幕所示：</p>

    <p><a href="../Media/LinuxConnected.png" target="_blank"><img src="../Media/LinuxConnected.png" alt="连接器脚本"></a></p>
  </li>
</ol>

<h3 id="任务-3使用-syslog-连接器连接-linux-主机">任务 3：使用 Syslog 连接器连接 Linux 主机。</h3>

<p>在此任务中，你将通过 Syslog 连接器将 Linux 主机连接到 Azure Sentinel。</p>

<ol>
  <li>
    <p>连接到 WIN1，它应该已经在工作区的 Azure Sentinel 门户中。</p>
  </li>
  <li>
    <p>从“数据连接器”选项卡，从列表中选择 <strong>“Syslog”</strong> 连接器。</p>
  </li>
  <li>
    <p>在连接器信息边栏选项卡上选择 <strong>“打开连接器页面”</strong>。</p>
  </li>
  <li>
    <p>打开 <strong>“在非 Azure Linux 计算机上安装代理”</strong> 部分。</p>
  </li>
  <li>
    <p>选择 <strong>“为非 Azure Linux 计算机下载和安装代理”</strong> 的链接。</p>
  </li>
  <li>
    <p>选择 <strong>“Linux 服务器”</strong> 的选项卡。</p>
  </li>
  <li>
    <p>将 <em>“下载和加入适用于 Linux 的代理”</em> 区域中的命令复制到剪贴板。</p>
  </li>
  <li>
    <p>启动 LIN2 虚拟机，并使用实验室主机托管服务提供商提供的用户名和密码登录。请注意 LIN2 服务器的 IP 地址。以下面的屏幕截图为例：</p>

    <p><a href="../Media/LinuxLoginExample.png" target="_blank"><img src="../Media/LinuxLoginExample.png" alt="linux 登录"></a></p>
  </li>
  <li>
    <p>返回到 WIN1 虚拟机，右键单击开始菜单图标以管理员身份启动新的 Windows PowerShell，然后选择“<strong>Windows PowerShell (管理员)</strong>”。选择“是”，允许应用在出现的“用户帐户控制”窗口中运行。</p>
  </li>
</ol>

<p><strong>备注</strong>：如果通过输入“<em>退出</em>”关闭到 LIN1 的连接，完成了最后一个任务的安装，那么可重复使用 Windows PowerShell 窗口。</p>

<ol>
  <li>输入以下 PowerShell 命令，根据你的具体 Linux 服务器信息进行调整，然后按 Enter：</li>
</ol>

<div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock1" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock1" class="mt-0"><code class="language-PowerShell">ssh &lt;insert your linux IP address here&gt; -l &lt;insert linux user name here&gt;
</code></pre>

<ol>
  <li>输入“<em>是</em>”以确认连接，然后键入用户密码并按 Enter。屏幕应如下所示：</li>
</ol>

<p><a href="../Media/PSconnectLinux.png" target="_blank"><img src="../Media/PSconnectLinux.png" alt="linux 登录"></a></p>

<ol>
  <li>
    <p>现在可以粘贴前面的步骤“<em>下载和加入适用于 Linux 的代理</em>”中的命令。确保来自 Azure 的脚本在剪贴板中。在 PowerShell 中右键单击顶部栏并依次选择“<strong>编辑</strong>”、“<strong>粘贴</strong>”。</p>
  </li>
  <li>
    <p>粘贴脚本后，按 Enter。该脚本将在 Linux 服务器上远程运行。你已完成本任务。本课程中其他实验室均不会依赖于此连接。</p>
  </li>
</ol>

<h3 id="任务-4为-syslog-连接器配置你想收集的设备及其严重性">任务 4：为 Syslog 连接器配置你想收集的设备及其严重性。</h3>

<p>在此任务中，你将配置 Syslog 收集设备。</p>

<ol>
  <li>
    <p>连接到 WIN1 虚拟机。</p>
  </li>
  <li>
    <p>在 Azure Sentinel 门户中，选 <strong>择“设置”</strong>，然后从设置边栏选项卡中选择 <strong>“工作区设置”</strong>。</p>
  </li>
  <li>
    <p>在 <strong>“设置”</strong> 区域中，选择 <strong>“代理配置”</strong>。</p>
  </li>
  <li>
    <p>选择 <strong>“Syslog”</strong> 选项卡。</p>
  </li>
  <li>
    <p>选择 <strong>“+ 添加设备”</strong> 按钮。</p>
  </li>
  <li>
    <p>从 <strong>“设备名称”</strong> 下拉菜单中选择 <strong>“auth”</strong>。</p>
  </li>
  <li>
    <p>再次选择“<strong>+ 添加设备</strong>”按钮。</p>
  </li>
  <li>
    <p>从下拉菜单中选择“<strong>authpriv</strong>”作为<em>设备名称</em>。</p>
  </li>
  <li>
    <p>选择 <strong>“应用”</strong>。  你已完成本任务。</p>
  </li>
</ol>

<h2 id="转到练习-4">转到练习 4</h2>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/SC-200T00CN-Microsoft-Security-Operations-Analyst" target="_blank" class="ml-2">
                    MicrosoftLearning/SC-200T00CN-Microsoft-Security-Operations-Analyst
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D.js"></script>



</body></html>