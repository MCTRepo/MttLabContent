<!DOCTYPE html><html lang="en"><head>
        <title>
            SC-200T00CN-Microsoft-Security-Operations-Analyst
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                SC-200T00CN-Microsoft-Security-Operations-Analyst
            </a>
            <a href="https://github.com/MicrosoftLearning/SC-200T00CN-Microsoft-Security-Operations-Analyst" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="#任务-1初始化-azure-sentinel-工作区">任务 1：初始化 Azure Sentinel 工作区。</a></li><li class="nav-item"><a class="nav-link" href="#任务-2创建-watchlist">任务 2：创建 Watchlist。</a></li><li class="nav-item"><a class="nav-link" href="#任务-3创建威胁指标">任务 3：创建威胁指标。</a></li></ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="模块-5---实验室-1---练习-1---配置-azure-sentinel-环境">模块 5 - 实验室 1 - 练习 1 - 配置 Azure Sentinel 环境</h1>

<h2 id="实验室场景">实验室场景</h2>

<p>你是一位安全运营分析师，你所在公司正在实现 Azure Sentinel。你负责设置满足公司要求的 Azure Sentinel 环境，并最大程度降低成本、符合法规要求，同时为安全团队提供最易于管理的环境，以便其履行日常工作职责。</p>

<h3 id="任务-1初始化-azure-sentinel-工作区">任务 1：初始化 Azure Sentinel 工作区。</h3>

<p>在此任务中，你将创建 Azure Sentinel 工作区。</p>

<ol>
  <li>
    <p>使用以下密码以管理员身份登录到 WIN1 虚拟机：<strong>Pa55w.rd</strong>。</p>
  </li>
  <li>
    <p>打开 Microsoft Edge 浏览器。</p>
  </li>
  <li>
    <p>在 Microsoft Edge 浏览器中，通过 https://portal.azure.com 导航到 Azure 门户。</p>
  </li>
  <li>
    <p>在 <strong>“登录”</strong> 对话框中，复制粘贴实验室托管提供者提供的<strong>租户电子邮件</strong>帐户，然后选择 <strong>“下一步”</strong>。</p>
  </li>
  <li>
    <p>在 <strong>“输入密码”</strong> 对话框中，复制粘贴实验室托管提供者提供的<strong>租户密码</strong>，然后选择 <strong>“登录”</strong>。</p>
  </li>
  <li>
    <p>在 Azure 门户的搜索栏中，键入 <em>Sentinel</em>，然后选择 <strong>“Azure Sentinel”</strong>。</p>
  </li>
  <li>
    <p>选择 <strong>“+ 创建”</strong>。</p>
  </li>
  <li>
    <p>接下来，选择 <strong>“新建工作区”</strong>。</p>
  </li>
</ol>

<p><strong>备注</strong>：首先，创建新的 Log Analytics 工作区。</p>

<ol>
  <li>
    <p>选择合适的订阅。</p>
  </li>
  <li>
    <p>选择资源组的“<strong>新建</strong>”链接，输入所选的新资源组名称，然后选择“<strong>确定</strong>”。</p>
  </li>
  <li>
    <p>在“名称”字段中的 <em>“实例详细信息”</em> 下，输入为 Log Analytics 工作区选择的名称。</p>
  </li>
</ol>

<p><strong>备注:</strong> 此名称也将是 Azure Sentinel 工作区名称。</p>

<ol>
  <li>
    <p>选择适合你的区域。适当的区域可采用默认区域，或者讲师可能会对选择哪个区域提供具体建议。</p>
  </li>
  <li>
    <p>选择 <strong>“查看 + 创建”</strong>。</p>
  </li>
  <li>
    <p>在“创建 Log Analytics 工作区”区域，选择 <strong>“创建”</strong>。等待 <em>“将 Azure Sentinel 添加到工作区”</em> 页面上的列表中显示新的 Log Analytics 工作区。  这可能需要一分钟时间。</p>
  </li>
  <li>
    <p>在新创建的工作区显示时将其选中，然后选择“<strong>添加</strong>”。这可能需要几分钟时间。</p>
  </li>
  <li>
    <p>浏览新建的 Azure Sentinel 工作区以熟悉用户界面选项。</p>
  </li>
</ol>

<h3 id="任务-2创建-watchlist">任务 2：创建 Watchlist。</h3>

<p>在此任务中，你将在 Azure Sentinel 中创建 Watchlist。</p>

<ol>
  <li>
    <p>在 Windows 10 屏幕底部的搜索框中，输入“<em>记事本</em>”。  从结果中选择“<strong>记事本</strong>”。</p>
  </li>
  <li>
    <p>键入“<em>主机名</em>”，然后输入新行。</p>
  </li>
  <li>在记事本的第 2 行到第 6 行，复制以下主机名，每个主机名单独列一行：
    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock0" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock0" class="mt-0"><code class="language-Notepad">Host1
Host2
Host3
Host4
Host5
</code></pre>
  </li>
  <li>
    <p>从菜单中依次选择“文件”、 <strong>“另存为”</strong>，将文件命名为 <em>“HighValue.csv”</em>。  然后将文件类型更改为 <strong>“所有文件”(<em>.</em>)</strong>。  然后选择 <strong>“保存”</strong>。  文件可保存在电脑的 <em>Documents</em> 文件夹中。</p>
  </li>
  <li>
    <p>关闭记事本。</p>
  </li>
  <li>
    <p>在 Azure Sentinel 中，在“配置”区域中选择 <strong>“Watchlist”</strong> 选项。</p>
  </li>
  <li>
    <p>从命令栏中选择 <strong>“+ 添加新增”</strong>。</p>
  </li>
  <li>
    <p>在 Watchlist 向导中，输入以下内容：
 名称： HighValueHosts
 说明：高价值主机
 Watchlist 别名：HighValueHosts</p>
  </li>
  <li>
    <p>选择 <strong>“下一步: 源 &gt;”</strong>。</p>
  </li>
  <li>
    <p>在“<strong>上传文件</strong>”下选择“<strong>浏览文件</strong>”，然后浏览刚刚创建的 <em>HighValue.csv</em> 文件。</p>
  </li>
  <li>
    <p>在“<em>SearchKey</em>”字段中，选择“<strong>主机名</strong>”。</p>
  </li>
  <li>
    <p>选择“下一步: <strong>查看并创建 &gt;”</strong>。</p>
  </li>
  <li>
    <p>检查输入的设置，然后选择“<strong>创建</strong>”。</p>
  </li>
  <li>
    <p>屏幕返回到 Watchlist 列表。</p>
  </li>
  <li>
    <p>选择新 watchlist。  在右侧选项卡上，选择 <strong>“在 Log Analytics 查看”</strong>。</p>
  </li>
  <li>以下 KQL 语句将自动执行，并显示结果。</li>
</ol>

<div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock1" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock1" class="mt-0"><code class="language-KQL">_GetWatchlist('HighValueHosts')
</code></pre>

<p><strong>备注</strong>：完成导入需要几分钟时间。你可继续执行以下任务，稍后再回来运行此命令。</p>

<p>现在，可以在自己的 KQL 语句中使用 _GetWatchlist(‘HighValueHosts’) 来访问列表。要引用的列将是<em>主机名</em>。</p>

<ol>
  <li>选择右上角的“x”可关闭“<em>日志</em>”窗口，单击“<strong>确定</strong>”可放弃未保存的编辑。</li>
</ol>

<h3 id="任务-3创建威胁指标">任务 3：创建威胁指标。</h3>

<p>在此任务中，你将在 Azure Sentinel 中创建指标。</p>

<ol>
  <li>
    <p>在 Azure Sentinel 中，在“威胁管理”区域中选择“<strong>威胁智能</strong>”选项。</p>
  </li>
  <li>
    <p>从命令栏中选择 <strong>“+ 添加新增”</strong>。</p>
  </li>
  <li>
    <p>在“<em>类型</em>”下拉列表中查看可用的不同指标类型。选择“<strong>domain-name</strong>”。在“域”框中输入姓名首字母缩写。例如 <em>fmg.com</em>。</p>
  </li>
  <li>
    <p>对于威胁类型，请选择“<strong>恶意活动</strong>”。</p>
  </li>
  <li>
    <p>对于<em>名称</em>，输入用于域的同一个值。例如 <em>fmg.com</em>。</p>
  </li>
  <li>
    <p>将 <em>“生效日期”</em> 字段设置为今天。</p>
  </li>
  <li>
    <p>选择 <strong>“应用”</strong>。</p>
  </li>
</ol>

<p><strong>备注</strong>：指标可能需要几分钟才能显示。</p>

<ol>
  <li>
    <p>在“常规”区域中选择“<strong>日志</strong>”选项。可能需要禁用“始终显示查询”选项，并关闭“<em>查询</em>”窗口来运行语句。</p>
  </li>
  <li>
    <p>运行以下 KQL 语句。</p>
  </li>
</ol>

<div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock2" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock2" class="mt-0"><code class="language-KQL">ThreatIntelligenceIndicator
</code></pre>
<p>向右滚动结果以查看“DomainName”列。还可以运行以下 KQL 语句，这样就可以仅查看“DomainName”列。</p>

<div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock3" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock3" class="mt-0"><code class="language-KQL">ThreatIntelligenceIndicator
| project DomainName
</code></pre>

<h2 id="你已完成本实验室">你已完成本实验室。</h2>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/SC-200T00CN-Microsoft-Security-Operations-Analyst" target="_blank" class="ml-2">
                    MicrosoftLearning/SC-200T00CN-Microsoft-Security-Operations-Analyst
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D.js"></script>



</body></html>