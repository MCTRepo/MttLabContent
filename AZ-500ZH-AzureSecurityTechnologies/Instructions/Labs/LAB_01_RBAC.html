<!DOCTYPE html><html lang="en"><head>
        <title>
            AZ-500ZH-AzureSecurityTechnologies
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                AZ-500ZH-AzureSecurityTechnologies
            </a>
            <a href="https://github.com/MicrosoftLearning/AZ-500ZH-AzureSecurityTechnologies" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="#练习-1创建高级管理员组以用户帐户-joseph-price-作为其组成员">练习 1：创建高级管理员组，以用户帐户 Joseph Price 作为其组成员。</a></li><li class="nav-item"><a class="nav-link" href="#练习2创建一个初级管理员组其中包含-isabel-garcia-的用户帐户作为该组的成员">练习2：创建一个初级管理员组，其中包含 Isabel Garcia 的用户帐户作为该组的成员。</a></li><li class="nav-item"><a class="nav-link" href="#练习-3创建一个服务台组其中包含-dylan-williams-用户帐户作为该组的成员">练习 3：创建一个服务台组，其中包含 Dylan Williams 用户帐户作为该组的成员。</a></li><li class="nav-item"><a class="nav-link" href="#练习-4将虚拟机参与者角色分配给服务台组">练习 4：将虚拟机参与者角色分配给“服务台”组。</a></li></ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="实验室-01基于角色的访问控制">实验室 01：基于角色的访问控制</h1>
<h1 id="学生实验室手册">学生实验室手册</h1>

<h2 id="实验室场景">实验室场景</h2>

<p>你需要创建一个显示如何创建 Azure 用户和组的概念证明。此外，如何使用基于角色的访问控制将角色分配给组。具体而言，需要执行以下操作：</p>

<ul>
  <li>创建一个高级管理员组，其中包含 Joseph Price 的用户帐户作为该组的成员。</li>
  <li>创建一个初级管理员组，其中包含 Isabel Garcia 的用户帐户作为该组的成员。</li>
  <li>创建一个服务台组，其中包含 Dylan Williams 用户帐户作为该组的成员。</li>
  <li>将虚拟机参与者角色分配给“服务台”组。</li>
</ul>

<blockquote>
  <p>对于本实验室中的所有资源，我们使用 <strong>“美国东部”</strong> 区域。请与讲师确认这是课堂上所使用的区域。</p>
</blockquote>

<h2 id="实验室目标">实验室目标</h2>

<p>在本实验室中，你将完成以下练习</p>

<ul>
  <li>练习 1：使用用户帐户以组成员 Joseph Price 身份创建高级管理员组（Azure 门户）。</li>
  <li>练习 2：使用用户帐户 Isabel Garcia 作为组成员 (PowerShell) 创建初级管理员组。</li>
  <li>练习 3：创建服务台组，以用户 Dylan Williams 作为其组成员 (Azure CLI) 。</li>
  <li>练习 4：将虚拟机参与者角色分配给“服务台”组。</li>
</ul>

<h3 id="练习-1创建高级管理员组以用户帐户-joseph-price-作为其组成员">练习 1：创建高级管理员组，以用户帐户 Joseph Price 作为其组成员。</h3>

<h4 id="预计用时10-分钟">预计用时：10 分钟</h4>

<p>在该练习中，你将完成以下任务：</p>

<ul>
  <li>任务 1：使用 Azure 门户为 Joseph Price 创建一个存储帐户。</li>
  <li>任务 2：使用 Azure 门户创建高级管理员组，并将 Joseph Price 用户帐户添加到该组。</li>
</ul>

<h4 id="任务-1使用-azure-门户为-joseph-price-创建一个存储帐户">任务 1：使用 Azure 门户为 Joseph Price 创建一个存储帐户</h4>

<p>在此任务中，你将为 Joseph Price 创建一个用户帐户。</p>

<ol>
  <li>
    <p>登录 Azure 门户 <strong><code>https://portal.azure.com/</code></strong>。</p>

    <blockquote>
      <p><strong>备注</strong>： 使用帐户登录到 Azure 门户，该帐户在你用于此实验室的 Azure 订阅中具有所有者或参与者角色，并且在与该订阅关联的 Azure AD 租户中具有全局管理员角色。</p>
    </blockquote>
  </li>
  <li>
    <p>在 Azure 门户页面顶部的 <strong>“搜索资源、服务和文档”</strong> 文本框中，键入 <strong>“Azure Active Directory”</strong> 并按 <strong>Enter</strong> 键。</p>
  </li>
  <li>
    <p>在 Azure Active Directory 租户的 <strong>“概述”</strong> 边栏选项卡中，在 <strong>“管理”</strong> 部分选择 <strong>“用户”</strong>，然后选择 <strong>“+ 新建用户”</strong>。</p>
  </li>
  <li>
    <p>在 <strong>“新建用户”</strong> 边栏选项卡中，确保选中 <strong>“创建用户”</strong> 选项，并指定以下设置：</p>

    <table>
      <thead>
        <tr>
          <th>设置</th>
          <th>值</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>用户名</td>
          <td><strong>Joseph</strong></td>
        </tr>
        <tr>
          <td>名称</td>
          <td><strong>Joseph Price</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>单击 <strong>“用户名”</strong> 旁边的复制图标以复制完整用户。</p>
  </li>
  <li>
    <p>确保选中 <strong>“自动生成密码”</strong>，然后选择 <strong>“显示密码”</strong> 复选框以识别自动生成的密码。需要将此密码以及用户名提供给 Joseph。</p>
  </li>
  <li>
    <p>单击 <strong>“创建”</strong>。</p>
  </li>
  <li>
    <p>刷新 <strong>“用户 | 全部用户”</strong> 边栏选项卡，以验证新用户是否在 Azure AD 租户中创建。</p>
  </li>
</ol>

<h4 id="任务-2使用-azure-门户创建高级管理员组并将-joseph-price-用户帐户添加到该组">任务 2：使用 Azure 门户创建高级管理员组，并将 Joseph Price 用户帐户添加到该组。</h4>

<p>在此任务中，你将创建<em>高级管理员</em>组，并将 Joseph Price 用户帐户添加到该组中，然后将其配置为组所有者。</p>

<ol>
  <li>
    <p>在 Azure 门户中，导航回显示 Azure Active Directory 租户的边栏选项卡。</p>
  </li>
  <li>
    <p>在 <strong>“管理”</strong> 部分，单击 <strong>“组”</strong>，然后选择 <strong>“+ 新建组”</strong>。</p>
  </li>
  <li>
    <p>在 <strong>“新建组”</strong> 边栏选项卡中，指定以下设置（将其他设置保留为默认值）：</p>

    <table>
      <thead>
        <tr>
          <th>设置</th>
          <th>值</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>组类型</td>
          <td><strong>安全</strong></td>
        </tr>
        <tr>
          <td>组名</td>
          <td><strong>高级管理员</strong></td>
        </tr>
        <tr>
          <td>成员身份类型</td>
          <td><strong>已分配</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>单击 <strong>“未选择所有者”</strong> 链接，在 <strong>“添加所有者”</strong> 边栏选项卡上，选择 <strong>“Joseph Price”</strong>，然后单击 <strong>“选择”</strong>。</p>
  </li>
  <li>
    <p>单击 <strong>“未选择成员”</strong> 链接，在 <strong>“添加成员”</strong> 边栏选项卡上，选择 <strong>“Joseph Price”</strong>，然后单击 <strong>“选择”</strong>。</p>
  </li>
  <li>
    <p>返回 <strong>“新建组”</strong> 边栏选项卡，单击 <strong>“创建”</strong>。</p>
  </li>
</ol>

<blockquote>
  <p>结果：你使用 Azure 门户创建了一个用户和一个组，并将该用户分配给了该组。</p>
</blockquote>

<h3 id="练习2创建一个初级管理员组其中包含-isabel-garcia-的用户帐户作为该组的成员">练习2：创建一个初级管理员组，其中包含 Isabel Garcia 的用户帐户作为该组的成员。</h3>

<h4 id="预计用时10-分钟-1">预计用时：10 分钟</h4>

<p>在该练习中，你将完成以下任务：</p>

<ul>
  <li>任务 1：使用 PowerShell 为 Isabel Garcia 创建一个用户帐户。</li>
  <li>任务 2：使用 PowerShell 创建初级管理员组，并将 Isabel Garcia 用户帐户添加到该组。</li>
</ul>

<h4 id="任务-1使用-powershell-为-isabel-garcia-创建一个用户帐户">任务 1：使用 PowerShell 为 Isabel Garcia 创建一个用户帐户。</h4>

<p>在此任务中，你将使用 PowerShell 为 Isabel Garcia 创建一个用户帐户。</p>

<ol>
  <li>
    <p>单击 Azure 门户右上角的第一个图标，打开 Cloud Shell。如果出现提示，请选择 <strong>“PowerShell”</strong> 和 <strong>“创建储存”</strong>。</p>
  </li>
  <li>
    <p>确保在“Cloud Shell”窗格左上角的下拉菜单中选中 <strong>“PowerShell”</strong>。</p>

    <blockquote>
      <p><strong>备注</strong>： 要将复制文本粘贴到 Cloud Shell 中，请在窗格窗口中右键单击并选择 <strong>“粘贴”</strong>。或者，可以使用 <strong>Shift + Insert</strong> 组合键。</p>
    </blockquote>
  </li>
  <li>
    <p>在“Cloud Shell”窗格内的 PowerShell 会话中，运行以下命令以创建密码配置文件对象：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock0" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock0" class="mt-0"><code class="language-powershell"> $passwordProfile = New-Object -TypeName Microsoft.Open.AzureAD.Model.PasswordProfile
</code></pre>
  </li>
  <li>在“Cloud Shell”窗格内的 PowerShell 会话中，运行以下命令以在配置文件对象中设置密码的值：
    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock1" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock1" class="mt-0"><code class="language-powershell"> $passwordProfile.Password = 'Pa55w.rd1234'
</code></pre>
  </li>
  <li>
    <p>在“Cloud Shell”窗格内的 PowerShell 会话中，运行下列命令以连接到 Azure Active Directory：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock2" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock2" class="mt-0"><code class="language-powershell"> Connect-AzureAD
</code></pre>
  </li>
  <li>
    <p>在“Cloud Shell”窗格内的 PowerShell 会话中，运行以下命令以识别 Azure AD 租户的名称：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock3" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock3" class="mt-0"><code class="language-powershell"> $domainName = ((Get-AzureAdTenantDetail).VerifiedDomains)[0].Name
</code></pre>
  </li>
  <li>
    <p>在“Cloud Shell”窗格的 PowerShell 会话中，运行以下命令为 Isabel Garcia 创建一个用户帐户：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock4" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock4" class="mt-0"><code class="language-powershell"> New-AzureADUser -DisplayName 'Isabel Garcia' -PasswordProfile $passwordProfile -UserPrincipalName "Isabel@$domainName" -AccountEnabled $true -MailNickName 'Isabel'
</code></pre>
  </li>
  <li>
    <p>在“Cloud Shell”窗格内的 PowerShell 会话中，运行以下命令以列出 Azure AD 用户（Joseph 和 Isabel 帐户应显示在列表中）：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock5" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock5" class="mt-0"><code class="language-powershell"> Get-AzureADUser 
</code></pre>
  </li>
</ol>

<h4 id="任务-2使用-powershell-创建初级管理员组并将-isabel-garcia-用户帐户添加到该组">任务 2：使用 PowerShell 创建初级管理员组，并将 Isabel Garcia 用户帐户添加到该组。</h4>

<p>在此任务中，你将创建初级管理员组，并使用 PowerShell 将 Isabel Garcia 用户帐户添加到该组。</p>

<ol>
  <li>
    <p>在“Cloud Shell”窗格内的同一 PowerShell 会话中，运行以下命令以创建名为初级管理员的新安全组：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock6" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock6" class="mt-0"><code class="language-powershell"> New-AzureADGroup -DisplayName 'Junior Admins' -MailEnabled $false -SecurityEnabled $true -MailNickName JuniorAdmins
</code></pre>
  </li>
  <li>
    <p>在“Cloud Shell”窗格内的 PowerShell 会话中，运行以下命令以列出 Azure AD 租户中的组（该列表应包括高级管理员和初级管理员组）：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock7" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock7" class="mt-0"><code class="language-powershell"> Get-AzureADGroup
</code></pre>
  </li>
  <li>
    <p>在“Cloud Shell”窗格内的 PowerShell 会话中，运行以下命令以获得对 Isabel Garcia 用户帐户的引用：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock8" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock8" class="mt-0"><code class="language-powershell"> $user = Get-AzureADUser -Filter "MailNickName eq 'Isabel'"
</code></pre>
  </li>
  <li>
    <p>在“Cloud Shell”窗格内的 PowerShell 会话中，运行以下命令将 Isabel 用户帐户添加到初级管理员组：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock9" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock9" class="mt-0"><code class="language-powershell"> Add-AzADGroupMember -MemberUserPrincipalName $user.userPrincipalName -TargetGroupDisplayName "Junior Admins" 
</code></pre>
  </li>
  <li>
    <p>在“Cloud Shell”窗格内的 PowerShell 会话中，运行以下命令以验证初级管理员组是否含有 Isabel 用户帐户：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock10" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock10" class="mt-0"><code class="language-powershell"> Get-AzADGroupMember -GroupDisplayName "Junior Admins"
</code></pre>
  </li>
</ol>

<blockquote>
  <p>结果：你使用 PowerShell 创建了一个用户帐户和一个组帐户，并将该用户帐户添加到该组帐户中。</p>
</blockquote>

<h3 id="练习-3创建一个服务台组其中包含-dylan-williams-用户帐户作为该组的成员">练习 3：创建一个服务台组，其中包含 Dylan Williams 用户帐户作为该组的成员。</h3>

<h4 id="预计用时10-分钟-2">预计用时：10 分钟</h4>

<p>在该练习中，你将完成以下任务：</p>

<ul>
  <li>任务 1：使用 Azure CLI 为 Dylan Williams 创建用户帐户。</li>
  <li>任务 2：使用 Azure CLI 创建服务台组并在该组织推荐 Dylan 用户帐户。</li>
</ul>

<h4 id="任务-1使用-azure-cli-为-dylan-williams-创建用户帐户">任务 1：使用 Azure CLI 为 Dylan Williams 创建用户帐户。</h4>

<p>在此任务中要为 Dylan Williams 创建用户帐户。</p>

<ol>
  <li>
    <p>在“Cloud Shell”窗格左上角的下拉菜单中，选择 <strong>“Bash”</strong>，然后在出现提示时，单击 <strong>“确认”</strong>。</p>
  </li>
  <li>
    <p>在“Cloud Shell”窗格内的 Bash 会话中，运行以下命令以识别 Azure AD 租户的名称：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock11" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock11" class="mt-0"><code class="language-cli"> DOMAINNAME=$(az ad signed-in-user show --query 'userPrincipalName' | cut -d '@' -f 2 | sed 's/\"//')
</code></pre>
  </li>
  <li>
    <p>在“Cloud Shell”窗格内的 Bash 会话中，运行以下命令以创建 Dylan Williams 用户。使用 <em>yourdomain</em>。</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock12" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock12" class="mt-0"><code class="language-cli"> az ad user create --display-name "Dylan Williams" --password "Pa55w.rd1234" --user-principal-name Dylan@$DOMAINNAME
</code></pre>
  </li>
  <li>
    <p>在“Cloud Shell”窗格内的 Bash 会话中，运行以下命令以列出 Azure AD 用户帐户（该列表应包含 Joseph、Isabel 和 Dylan 用户帐户）</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock13" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock13" class="mt-0"><code class="language-cli"> az ad user list --output table
</code></pre>
  </li>
</ol>

<h4 id="任务-2使用-azure-cli-创建服务台组并在该组织推荐-dylan-用户帐户">任务 2：使用 Azure CLI 创建服务台组并在该组织推荐 Dylan 用户帐户。</h4>

<p>在此任务中，你将创建服务台组并将 Dylan 分配给该组。</p>

<ol>
  <li>
    <p>在“Cloud Shell”窗格内的同一 Bash 会话中，运行以下命令创建名为服务台的新安全组。</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock14" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock14" class="mt-0"><code class="language-cli"> az ad group create --display-name "Service Desk" --mail-nickname "ServiceDesk"
</code></pre>
  </li>
  <li>
    <p>在“Cloud Shell”窗格内的 Bash 会话中，运行以下命令以列出 Azure AD 组（该列表应包含服务台、高级管理员和初级管理员组）：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock15" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock15" class="mt-0"><code class="language-cli"> az ad group list -o table
</code></pre>
  </li>
  <li>
    <p>在“Cloud Shell”窗格内的 Bash 会话中，运行以下命令以获得对 Dylan Williams 用户帐户的引用：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock16" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock16" class="mt-0"><code class="language-cli"> USER=$(az ad user list --filter "displayname eq 'Dylan Williams'")
</code></pre>
  </li>
  <li>
    <p>在“Cloud Shell”窗格内的 Bash 会话中，运行以下命令以获得 Dylan Williams 用户帐户的 ObjectId 属性：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock17" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock17" class="mt-0"><code class="language-cli"> OBJECTID=$(echo $USER | jq '.[].objectId' | tr -d '"')
</code></pre>
  </li>
  <li>
    <p>在“Cloud Shell”窗格内的 Bash 会话中，运行以下命令以将 Dylan 用户帐户添加到服务台组：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock18" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock18" class="mt-0"><code class="language-cli"> az ad group member add --group "Service Desk" --member-id $OBJECTID
</code></pre>
  </li>
  <li>
    <p>在“Cloud Shell”窗格内的 Bash 会话中，运行以下命令以列出服务台组的成员，并验证其是否包含 Dylan 用户帐户：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock19" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock19" class="mt-0"><code class="language-cli"> az ad group member list --group "Service Desk"
</code></pre>
  </li>
  <li>
    <p>关闭 Cloud Shell 窗格。</p>
  </li>
</ol>

<blockquote>
  <p>结果：使用 Azure CLI，你创建了一个用户帐户和一个组帐户，并将该用户帐户添加到了该组中。</p>
</blockquote>

<h3 id="练习-4将虚拟机参与者角色分配给服务台组">练习 4：将虚拟机参与者角色分配给“服务台”组。</h3>

<h4 id="预计用时10-分钟-3">预计用时：10 分钟</h4>

<p>在该练习中，你将完成以下任务：</p>

<ul>
  <li>任务 1：创建资源组。</li>
  <li>任务 2：将服务台虚拟机参与者权限分配给该资源组。</li>
</ul>

<h4 id="任务-1创建资源组">任务 1：创建资源组</h4>

<ol>
  <li>
    <p>在 Azure 门户页面顶部的 <strong>“搜索资源、服务和文档”</strong> 文本框中，键入 <strong>“资源组”</strong>，然后按 <strong>Enter</strong> 键。</p>
  </li>
  <li>
    <p>在“<strong>资源组</strong>”边栏选项卡上单击“<strong>+创建</strong>”，并指定以下设置：</p>

    <table>
      <thead>
        <tr>
          <th>设置</th>
          <th>值</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>订阅名称</td>
          <td>Azure 订阅的名称</td>
        </tr>
        <tr>
          <td>资源组名称</td>
          <td><strong>AZ500Lab01</strong></td>
        </tr>
        <tr>
          <td>位置</td>
          <td><strong>美国东部</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>单击 <strong>“查看 + 创建”</strong>，然后单击 <strong>“创建”</strong>。</p>

    <blockquote>
      <p><strong>备注</strong>： 等待资源组以便部署。使用 <strong>“通知”</strong> 图标（右上角）跟踪部署状态的进度。</p>
    </blockquote>
  </li>
  <li>
    <p>返回 <strong>“资源组”</strong> 边栏选项卡，刷新页面并验证新资源组是否出现在资源组列表中。</p>
  </li>
</ol>

<h4 id="任务-2分配服务台虚拟机参与者权限">任务 2：分配服务台虚拟机参与者权限。</h4>

<ol>
  <li>
    <p>在 <strong>“资源组”</strong> 边栏选项卡上，单击 <strong>“AZ500LAB01”</strong> 资源组条目。</p>
  </li>
  <li>
    <p>在 <strong>“AZ500LAB01”</strong> 边栏选项卡上，单击 <strong>“访问控制(IAM)”</strong>。</p>
  </li>
  <li>
    <p>在 <strong>“AZ500Lab01 | 访问控制(IAM)”</strong> 边栏选项卡中单击 <strong>“+ 添加”</strong>，然后在下拉菜单中单击 <strong>“添加角色分配”</strong>。</p>
  </li>
  <li>
    <p>在 <strong>“添加角色分配”</strong> 边栏选项卡上，指定以下设置：</p>

    <table>
      <thead>
        <tr>
          <th>设置</th>
          <th>值</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>角色</td>
          <td><strong>虚拟机参与者</strong></td>
        </tr>
        <tr>
          <td>分配对以下内容的访问权限</td>
          <td><strong>用户、组或服务主体</strong></td>
        </tr>
        <tr>
          <td>选择</td>
          <td><strong>服务台</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>选择 <strong>“保存”</strong>，创建角色分配。</p>
  </li>
  <li>
    <p>在 <strong>“访问控制(IAM)”</strong> 边栏选项卡上，选择 <strong>“角色分配”</strong>。</p>
  </li>
  <li>
    <p>在 <strong>“AZ500Lab01 | 访问控制(IAM)”</strong> 边栏选项卡，然后在 <strong>“检查访问”</strong> 选项卡的 <strong>“按名称或电子邮件地址搜索”</strong> 文本框中键入 <strong>“Dylan Williams”</strong>。</p>
  </li>
  <li>
    <p>在搜索结果列表中，选择 Dylan Williams 用户帐户，然后在 <strong>“Dylan Williams 分配 - AZ500Lab01”</strong> 边栏选项卡上，查看新创建的分配工作。</p>
  </li>
  <li>
    <p>关闭 <strong>“Dylan Williams 分配 - AZ500Lab01”</strong> 边栏选项卡。</p>
  </li>
  <li>
    <p>重复最后两个相同步骤，检查 <strong>“Joseph Price”</strong> 的访问权限。</p>
  </li>
</ol>

<blockquote>
  <p>结果：已分配并检查了 RBAC 权限。</p>
</blockquote>

<p><strong>清理资源</strong></p>

<blockquote>
  <p>请记得删除任何新创建而不会再使用的 Azure 资源。删除未使用的资源，确保不产生意外成本。</p>
</blockquote>

<ol>
  <li>
    <p>在 Azure 门户中，通过单击 Azure 门户右上角的第一个图标打开 Cloud Shell。</p>
  </li>
  <li>
    <p>在“Cloud Shell”窗格左上角的下拉菜单中，选择 <strong>“PowerShell”</strong>，然后在出现提示时，单击 <strong>“确认”</strong>。</p>
  </li>
  <li>
    <p>在“Cloud Shell”窗格中的 PowerShell 会话中，运行以下命令删除在此实验室中创建的资源组：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock20" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock20" class="mt-0"><code class="hljs apache"> <span class="hljs-attribute"><span class="hljs-attribute">Remove</span></span>-AzResourceGroup -Name <span class="hljs-string"><span class="hljs-string">"AZ500LAB01"</span></span> -Force -AsJob
</code></pre>
  </li>
  <li>
    <p>关闭 <strong>Cloud Shell</strong> 窗格。</p>
  </li>
</ol>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/AZ-500ZH-AzureSecurityTechnologies" target="_blank" class="ml-2">
                    MicrosoftLearning/AZ-500ZH-AzureSecurityTechnologies
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D.js"></script>



</body></html>