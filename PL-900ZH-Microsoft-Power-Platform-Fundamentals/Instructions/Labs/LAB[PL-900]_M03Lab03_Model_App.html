<!DOCTYPE html><html lang="en"><head>
        <title>
            PL-900ZH-Microsoft-Power-Platform-Fundamentals
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                PL-900ZH-Microsoft-Power-Platform-Fundamentals
            </a>
            <a href="https://github.com/MicrosoftLearning/PL-900ZH-Microsoft-Power-Platform-Fundamentals" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    <li class="nav-item"><a class="nav-link active" href="#重要通知2020-年-11-月生效">重要通知（2020 年 11 月生效）：</a></li></ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="模块-3power-apps-入门">模块 3：Power Apps 入门</h1>
<h2 id="实验室-3如何构建模型驱动的应用">实验室 3：如何构建模型驱动的应用</h2>

<h3 id="重要通知2020-年-11-月生效">重要通知（2020 年 11 月生效）：</h3>
<p>Common Data Service 已重命名为 Microsoft Dataverse。Microsoft Dataverse 中的一些术语已更新。例如，实体（现在是 <strong>“表”</strong>）、字段（现在是 <strong>“列”</strong>）以及记录（现在是 <strong>“行”</strong>）可能已过时。请在执行实验室操作时谨记这一点。我们预期将在不久之后更新全部内容。</p>

<p>有关详细信息以及受影响术语的完整列表，请访问<a href="https://docs.microsoft.com/zh-cn/powerapps/maker/common-data-service/data-platform-intro#terminology-updates">什么是 Microsoft Dataverse？</a></p>

<h1 id="应用场景">应用场景</h1>

<p>Bellows College 是一所教育机构，校园内有多座建筑。当前，校园访客被记录在纸质日记中。无法始终如一地捕获信息，也无法收集和分析有关整个校园的访问数据。</p>

<p>校园管理部门希望对其访客登记系统进行现代化改造。在该系统中，由安全人员控制对建筑物的访问，所有访问都必须由主办人预先登记和记录。</p>

<p>在整个课程中，你将生成应用程序并执行自动化，以使 Bellows College 的管理和安全人员可以管理和控制校园建筑的出入情况。</p>

<p>在本实验室中，你将生成一个 Power Apps 模型驱动应用，以允许后台办公室的校园工作人员管理整个校园的访问记录。</p>

<h1 id="概要实验室步骤">概要实验室步骤</h1>

<p>作为创建模型驱动应用的一部分，你将完成以下操作：</p>

<ul>
  <li>
    <p>新建一个名为“校园管理”的模型驱动应用</p>
  </li>
  <li>
    <p>编辑应用导航以引用所需的表</p>
  </li>
  <li>
    <p>自定义应用所需表的表单和视图</p>
  </li>
</ul>

<p>我们将使用以下组件：</p>

<ul>
  <li>
    <p><strong>视图</strong>：视图允许用户显示表单表中的现有数据。</p>
  </li>
  <li>
    <p><strong>表单</strong>：用户在此处创建/更新表中的新记录。</p>
  </li>
</ul>

<p>两者都将集成到模型驱动应用中，以提供更好的用户体验。</p>

<h2 id="先决条件">先决条件</h2>

<ul>
  <li>完成<strong>模块 0 实验 0 - 验证实验室环境</strong></li>
  <li>完成 <strong>“模块 2 实验室 1 - Microsoft Dataverse 简介”</strong></li>
</ul>

<h2 id="开始前要考虑的事项">开始前要考虑的事项</h2>

<ul>
  <li>
    <p>应该进行哪些更改以改善用户体验？</p>
  </li>
  <li>
    <p>基于我们生成的数据模型，我们应该在模型驱动应用中包括哪些内容？</p>
  </li>
  <li>
    <p>可以在模型驱动应用的站点地图上进行哪些自定义？</p>
  </li>
</ul>

<h1 id="练习-1自定义视图和窗体">练习 #1：自定义视图和窗体</h1>

<p><strong>目标：</strong> 在本练习中，你将自定义将在模型驱动应用中使用的自定义创建表的视图和表单。</p>

<h2 id="任务-1编辑访问表单">任务 #1：编辑访问表单</h2>

<ol>
  <li>
    <p>登录到 <a href="https://make.powerapps.com">https://make.powerapps.com</a>（若尚未登录）</p>
  </li>
  <li>
    <p>选择你的 <strong>“环境”。</strong></p>
  </li>
  <li>
    <p>选择 <strong>“解决方案”</strong>。</p>
  </li>
  <li>
    <p>单击打开 <strong>“校园管理”</strong> 解决方案。</p>
  </li>
  <li>
    <p>单击打开 <strong>“访问”</strong> 实体。</p>
  </li>
  <li>
    <p>选择 <strong>“表单”</strong> 选项卡，然后单击打开 <strong>“主”</strong> 表单类型。</p>

    <blockquote>
      <p>默认情况下，该表单具有两个字段：“名称”（主字段）和“所有者”。</p>
    </blockquote>
  </li>
  <li>
    <p>通过将列拖动到表单或直接单击列名来选择“<strong>+ 表单</strong>”字段，然后在“<strong>所有者</strong>”字段下添加以下字段：</p>

    <ul>
      <li><strong>建筑物</strong></li>
      <li><strong>访问者</strong></li>
      <li><strong>计划开始</strong></li>
      <li><strong>计划结束</strong></li>
      <li><strong>实际开始</strong></li>
      <li><strong>实际结束</strong></li>
    </ul>
  </li>
  <li>
    <p>拖动 <strong>“代码”</strong> 列并将其拖到表单页眉处。</p>

    <blockquote>
      <p>标题是表单的右上角区域。你可能需要最小化屏幕右侧的“属性”面板才能看到表单上的字段。</p>
    </blockquote>
  </li>
  <li>
    <p>在 <strong>“代码”</strong> 字段仍处于选中状态时，在“属性”面板中选中 <strong>“只读字段”</strong> 复选框。</p>
  </li>
  <li>
    <p>选择 <strong>“所有者”</strong> 字段。在“属性”面板中将 <strong>“字段标签”</strong> 更改为 <strong>“主机”</strong></p>
  </li>
  <li>
    <p>单击右上方的 <strong>“保存“</strong>，然后等待保存完成。</p>
  </li>
  <li>
    <p>单击右上方的 <strong>“发布”</strong>，并等待发布完成。</p>
  </li>
  <li>
    <p>单击屏幕左上方的 <strong>“上一步”</strong>。现在，你已经后退到
访问实体“表单”选项卡。</p>
  </li>
</ol>

<h2 id="任务-2编辑访问视图">任务 #2：编辑访问视图</h2>

<p>在此任务中，我们将修改默认的“活动访问”视图并为今天的访问新建视图。</p>

<ol>
  <li>
    <p>选择 <strong>“视图”</strong> 选项卡，然后单击以打开 <strong>“活动访问”</strong> 视图。</p>
  </li>
  <li>
    <p>通过单击或拖放字段，将以下字段添加到视图中：</p>

    <ul>
      <li><strong>代码</strong></li>
      <li><strong>访问者</strong></li>
      <li><strong>建筑物</strong></li>
      <li><strong>计划开始</strong></li>
      <li><strong>计划结束</strong></li>
    </ul>
  </li>
  <li>
    <p>单击 <strong>“创建时间”</strong> 列并选择 <strong>“删除”</strong>。现在将从视图中删除 <strong>“创建时间”</strong> 字段。</p>
  </li>
  <li>
    <p>单击 <strong>“名称”</strong> 列并选择 <strong>“删除”</strong>。现在将从视图中删除 <strong>“名称”</strong> 字段。</p>
  </li>
  <li>
    <p>在右侧的“属性”面板中，单击 <strong>“排序依据 …”</strong>，然后选择 <strong>“计划开始时间”</strong>。再次单击 <strong>“计划开始时间”</strong>，将排序方式更改为降序。</p>
  </li>
  <li>
    <p>重设各个列的宽度以适应数据。</p>
  </li>
  <li>
    <p>单击 <strong>“保存”</strong>，然后等待更改保存完毕。</p>
  </li>
  <li>
    <p>单击 <strong>“发布”</strong> 并等待发布完成。</p>
  </li>
</ol>

<p>现在我们将克隆视图，来为今天的访问创建一个新视图。</p>

<ol>
  <li>
    <p>按“属性”面板中的 <strong>“编辑筛选器”</strong> 链接。</p>
  </li>
  <li>
    <p>单击 <strong>“添加”</strong>，选择 <strong>“添加行”</strong>。</p>
  </li>
  <li>
    <p>选择 <strong>“计划开始时间”</strong> 作为字段，然后在下拉菜单中选择 <strong>“今天”</strong> 作为条件。</p>
  </li>
  <li>
    <p>单击 <strong>“状态”</strong> 行上的 <strong>“[…]”</strong>， 然后单击 <strong>“删除”</strong>。</p>
  </li>
  <li>
    <p>按 <strong>“确定”</strong> 以保存该条件。视图现已经过筛选，仅显示计划开始日期为今天的记录。</p>
  </li>
  <li>
    <p>在视图中添加 <strong>“实际开始时间”</strong> 和 <strong>“实际结束时间”</strong> 字段。</p>
  </li>
</ol>

<blockquote>
  <p><strong>备注：</strong> 由于我们不再筛选视图状态，因此我们将获得今天所有的访问，包括已完成的访问。这些字段有助于区分完成的访问和进行中的访问。</p>
</blockquote>

<ol>
  <li>
    <p>单击 <strong>“保存”</strong> 按钮旁的下拉箭头（请注意不是按按钮本身）并选择 <strong>“另存为”</strong>。</p>
  </li>
  <li>
    <p>将名称更改为 <strong>“今天的访问”</strong>，然后按 <strong>“保存”</strong>。</p>
  </li>
  <li>
    <p>单击 <strong>“发布”</strong> 并等待发布完成。</p>
  </li>
</ol>

<h1 id="练习-2创建模型驱动应用程序">练习 #2：创建模型驱动应用程序</h1>

<p><strong>目标：</strong> 在本练习中，你将创建模型驱动应用、自定义站点地图并测试该应用。</p>

<blockquote>
  <p>在生成应用程序时，特别是在自定义站点地图步骤中，你会看到一些未解决的字段。为了进行实验室研究，我们采取了一些捷径。在具体实现时，应为这些项目指定逻辑名称。</p>
</blockquote>

<h2 id="任务-1创建应用程序">任务 #1：创建应用程序</h2>

<ol>
  <li>
    <p>如果尚未打开“校园管理”解决方案，请打开该解决方案。</p>

    <ul>
      <li>
        <p>登录至 <a href="https://make.powerapps.com">https://make.powerapps.com</a></p>
      </li>
      <li>
        <p>在你的环境中，单击以打开 <strong>“校园管理”</strong>
解决方案。</p>
      </li>
    </ul>
  </li>
  <li>
    <p>创建模型驱动应用程序</p>

    <ul>
      <li>
        <p>单击 <strong>“新建”</strong>，选择 <strong>“应用”</strong>，再选择 <strong>“模型驱动应用”</strong>。这将打开一个新选项卡。</p>
      </li>
      <li>
        <p>为“名称”输入 <strong>“[你的姓氏] 校园管理”</strong>。</p>
      </li>
      <li>
        <p>选择 <strong>“使用现有解决方案创建应用”</strong> 复选框</p>
      </li>
      <li>
        <p>选择 <strong>“下一步”</strong></p>
      </li>
      <li>
        <p>选择 <strong>“校园管理”</strong> 解决方案</p>
      </li>
      <li>
        <p>单击 <strong>“完成”</strong></p>
      </li>
    </ul>
  </li>
  <li>
    <p>单击 <strong>“站点地图”</strong> 旁边的铅笔图标。</p>
  </li>
  <li>
    <p>编辑默认标题</p>

    <ul>
      <li>
        <p>选择 <strong>“新建区域”</strong>。</p>
      </li>
      <li>
        <p>在右侧的属性窗格中将新区域的标题更改为 <strong>“校园”</strong>。</p>
      </li>
      <li>
        <p>选择 <strong>“新建组”</strong>。</p>
      </li>
      <li>
        <p>在右侧的属性窗格中将新组的标题更改为 <strong>“安全”</strong>。</p>
      </li>
    </ul>
  </li>
  <li>
    <p>将 Contact 表添加到网站图</p>

    <ul>
      <li>
        <p>选择 <strong>“新建子区域”</strong>。</p>
      </li>
      <li>
        <p>在 <strong>“属性”</strong> 窗格，从下拉列表中选择 <strong>“实体”</strong>
（针对 <strong>“类型”</strong>）。</p>
      </li>
      <li>
        <p>在下拉列表的 <strong>“实体”</strong> 中搜索 <strong>“Contact”</strong> 表。</p>
      </li>
    </ul>
  </li>
  <li>
    <p>将 Visit 表添加到网站图</p>

    <ul>
      <li>
        <p>选择 <strong>“安全性”</strong> 组，然后单击 <strong>“添加”</strong>。</p>
      </li>
      <li>
        <p>选择 <strong>“子区域”</strong>。</p>
      </li>
      <li>
        <p>转至 <strong>“属性”</strong> 窗格。</p>
      </li>
      <li>
        <p>从 <strong>“类型”</strong> 的下拉列表中选择 <strong>“实体”</strong>，然后搜索
从下拉列表的 <strong>“实体”</strong> 中搜索 <strong>“Visit”</strong> 表。</p>
      </li>
    </ul>
  </li>
  <li>
    <p>将 Building 表添加到网站图</p>

    <ul>
      <li>
        <p>选择 <strong>“校园”</strong> 区域，然后单击 <strong>“添加”</strong>。</p>
      </li>
      <li>
        <p>选择 <strong>“组”</strong>。</p>
      </li>
      <li>
        <p>在 <strong>“属性”</strong> 窗格的 <strong>“标题”</strong> 中，输入 <strong>“设置”</strong>。</p>
      </li>
      <li>
        <p>在仍选中“<strong>设置</strong>”组的情况下，单击“<strong>添加</strong>”。</p>
      </li>
      <li>
        <p>选择 <strong>“子区域”</strong>。</p>
      </li>
      <li>
        <p>转至 <strong>“属性”</strong> 窗格。</p>
      </li>
      <li>
        <p>从 <strong>“类型”</strong> 下拉列表中选择 <strong>“实体”</strong>，并从 <strong>“实体”</strong> 下拉列表中搜索 <strong>“Building”</strong> 表。</p>
      </li>
    </ul>
  </li>
  <li>
    <p>单击 <strong>“保存”</strong>。保存更改时，将显示加载屏幕。</p>
  </li>
  <li>
    <p>单击 <strong>“发布”</strong> 以发布站点地图，并等待发布完成。</p>
  </li>
  <li>
    <p>单击 <strong>“保存并关闭”</strong> 以关闭站点地图编辑器。</p>
  </li>
</ol>

<div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock0" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock0" class="mt-0"><code class="hljs shell"><span class="hljs-meta">&gt;</span><span class="bash"> 你将看到添加到站点地图的实体的资产现在位于应用程序中。</span>
</code></pre>

<ol>
  <li>
    <p>在“应用设计器”中，单击 <strong>“保存”</strong>。</p>
  </li>
  <li>
    <p>单击 <strong>“验证”</strong> 以验证在应用程序中所做的更改。</p>
  </li>
</ol>

<blockquote>
  <p>这将显示一些警告，但我们可以忽略这些警告，因为我们还没有为实体引用特定的视图和表单，且用户将可以访问 <strong>“访问”</strong> 和 <strong>“建筑物”</strong> 实体的所有视图和表单。</p>
</blockquote>

<ol>
  <li>
    <p>单击 <strong>“发布”</strong></p>
  </li>
  <li>
    <p>单击 <strong>“保存并关闭”</strong> 以关闭应用设计器。</p>
  </li>
  <li>
    <p>单击 <strong>“完成”</strong>。</p>
  </li>
  <li>
    <p>选择 <strong>“解决方案”</strong>，然后选择 <strong>“发布所有自定义项”</strong>。</p>
  </li>
  <li>
    <p>选择 <strong>“应用”</strong>，此时应列出你的应用程序。</p>
  </li>
</ol>

<h2 id="任务-2测试应用程序">任务 #2：测试应用程序</h2>

<ol>
  <li>
    <p>启动应用程序</p>

    <ul>
      <li>
        <p>选择 <strong>“应用”</strong> 并单击 <strong>“校园管理”</strong> 应用。（如果一开始没有看到你的应用，则可能需要刷新浏览器。）</p>
      </li>
      <li>
        <p>应用程序会在新窗口中打开。</p>
      </li>
    </ul>
  </li>
  <li>
    <p>新建 “Contact”</p>

    <ul>
      <li>
        <p>应用会打开 <strong>“可用联系人”</strong> 视图</p>
      </li>
      <li>
        <p>在顶部菜单中单击 <strong>“新建”</strong>。</p>
      </li>
      <li>
        <p>在 <strong>“名字”</strong> 中输入 <code>John</code>，并在 <strong>“姓氏”</strong> 中输入 <code>Doe</code>。</p>
      </li>
      <li>
        <p>在 <strong>“电子邮件”</strong> 中输入你的个人电子邮件。这将用在以后的某个实验室中。</p>
      </li>
      <li>
        <p>单击 <strong>“保存并关闭”</strong>。</p>
      </li>
      <li>
        <p>现在应该可以在 <strong>“可用联系人”</strong> 视图中看到创建的联系人。</p>
      </li>
    </ul>
  </li>
  <li>
    <p>新建 “Building”</p>

    <ul>
      <li>
        <p>从网站图中选择 <strong>“建筑物”</strong>。</p>
      </li>
      <li>
        <p>单击 <strong>“新建”</strong>。</p>
      </li>
      <li>
        <p>在 <strong>“名称”</strong> 中输入 <code>Microsoft Building</code></p>
      </li>
      <li>
        <p>单击 <strong>“保存并关闭”</strong>。这将在
“可用建筑物”视图中显示新创建的记录。</p>
      </li>
    </ul>
  </li>
  <li>
    <p>新建 “Visit”</p>

    <ul>
      <li>
        <p>从网站图中选择 <strong>“访问”</strong>。</p>
      </li>
      <li>
        <p>单击 <strong>“新建”</strong>。</p>
      </li>
      <li>
        <p>输入以下字段</p>

        <ul>
          <li><strong>名称</strong>：<code>New test visit</code></li>
          <li><strong>建筑物</strong>：选择 Microsoft Building</li>
          <li><strong>访客</strong>：选择 John Doe</li>
          <li><strong>计划开始时间</strong>：选择明天的日期和下午 2:00 作为开始时间</li>
          <li><strong>计划结束时间</strong>：选择明天的日期和下午 3:30 作为结束时间</li>
        </ul>
      </li>
      <li>
        <p>单击 <strong>“保存并关闭”</strong>。这将创建 Visit，并且你应该可以在
“活动访问”视图中看到它。</p>
      </li>
      <li>
        <p>将视图更改为 <strong>“今天的访问”</strong>。由于新访问安排在明天，因此视图中不再显示该访问。</p>
      </li>
    </ul>
  </li>
  <li>
    <p>可以添加更多测试记录。</p>

    <p>正在运行的应用看上去大致如下图所示：</p>
  </li>
</ol>

<p><a href="media/3-model-app.png" target="_blank"><img src="media/3-model-app.png" alt="示例模型驱动应用"></a></p>

<h1 id="挑战">挑战</h1>

<ul>
  <li>为参观和建筑物选择特定的视图和表单</li>
  <li>安全人员通常在单个建筑物中工作。你如何为他们提供一种简单的方法，使他们仅显示所选建筑物的访问量？</li>
  <li>限制对特定实体的访问，例如，除管理员外，建筑物对所有员工都应是只读的</li>
  <li>你会考虑将哪些仪表板添加到应用？</li>
</ul>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/PL-900ZH-Microsoft-Power-Platform-Fundamentals" target="_blank" class="ml-2">
                    MicrosoftLearning/PL-900ZH-Microsoft-Power-Platform-Fundamentals
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D.js"></script>



</body></html>