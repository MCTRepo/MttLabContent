<!DOCTYPE html><html lang="en"><head>
        <title>
            SC-200T00A-Microsoft-Security-Operations-Analyst
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="/SC-200T00A-Microsoft-Security-Operations-Analyst/assets/css/style.css?v=20cbc7b52187d61fca294ac2c00146c2c7c6d337">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                SC-200T00A-Microsoft-Security-Operations-Analyst
            </a>
            <a href="https://github.com/MicrosoftLearning/SC-200T00A-Microsoft-Security-Operations-Analyst" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="#task-1-access-the-microsoft-sentinel-workspace">Task 1: Access the Microsoft Sentinel Workspace.</a></li><li class="nav-item"><a class="nav-link" href="#task-2-connect-a-linux-host-using-the-common-event-format-connector">Task 2: Connect a Linux Host using the Common Event Format connector.</a></li><li class="nav-item"><a class="nav-link" href="#task-3-connect-a-linux-host-using-the-syslog-connector">Task 3: Connect a Linux host using the Syslog connector.</a></li><li class="nav-item"><a class="nav-link active" href="#task-4-configure-the-facilities-you-want-to-collect-and-their-severities-for-the-syslog-connector">Task 4: Configure the facilities you want to collect and their severities for the Syslog connector.</a></li></ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="module-6---lab-1---exercise-3---connect-linux-hosts-to-microsoft-sentinel-using-data-connectors">Module 6 - Lab 1 - Exercise 3 - Connect Linux hosts to Microsoft Sentinel using data connectors</h1>

<h3 id="task-1-access-the-microsoft-sentinel-workspace">Task 1: Access the Microsoft Sentinel Workspace.</h3>

<p>In this task, you will access your Microsoft Sentinel workspace.</p>

<ol>
  <li>
    <p>Log in to WIN1 virtual machine as Admin with the password: <strong>Pa55w.rd</strong>.</p>
  </li>
  <li>
    <p>Start the Microsoft Edge browser.</p>
  </li>
  <li>
    <p>In the Edge browser, navigate to the Azure portal at https://portal.azure.com.</p>
  </li>
  <li>
    <p>In the <strong>Sign in</strong> dialog box, copy, and paste in the <strong>Tenant Email</strong> account provided by your lab hosting provider and then select <strong>Next</strong>.</p>
  </li>
  <li>
    <p>In the <strong>Enter password</strong> dialog box, copy, and paste in the <strong>Tenant Password</strong> provided by your lab hosting provider and then select <strong>Sign in</strong>.</p>
  </li>
  <li>
    <p>In the Search bar of the Azure portal, type <em>Sentinel</em>, then select <strong>Microsoft Sentinel</strong>.</p>
  </li>
  <li>
    <p>Select your Microsoft Sentinel Workspace you created in a previous lab.</p>
  </li>
</ol>

<h3 id="task-2-connect-a-linux-host-using-the-common-event-format-connector">Task 2: Connect a Linux Host using the Common Event Format connector.</h3>

<p>In this task, you will connect a Linux host to Microsoft Sentinel with the Common Event Format (CEF) connector.</p>

<ol>
  <li>
    <p>Select <strong>Data connectors</strong> from the Configuration area in Microsoft Sentinel.  From the Data Connectors tab, search for the <strong>Common Event Format (CEF)</strong> connector and select it from the list.</p>
  </li>
  <li>
    <p>Select <strong>Open connector page</strong> on the connector information blade.</p>
  </li>
  <li>
    <p>Copy to the clipboard the command shown in <em>1.2 Install the CEF collector on the Linux machine</em>.</p>
  </li>
  <li>
    <p>Launch your LIN1 virtual machine and login with the username and password provided by your lab hoster. Note the IP address for your LIN1 server. See the screenshot below as an example:</p>

    <p><a href="../Media/LinuxLoginExample.png" target="_blank"><img src="../Media/LinuxLoginExample.png" alt="linux login"></a></p>
  </li>
  <li>
    <p>Go back to the WIN1 virtual machine and launch Windows PowerShell as Administrator by right-clicking the Start menu icon and select <strong>Windows PowerShell (Admin)</strong>. Select <strong>Yes</strong> to allow the app to run in the User Account Control window that appears.</p>
  </li>
  <li>
    <p>Enter the following PowerShell command, adjusting for your specific Linux server information, and press enter:</p>
  </li>
</ol>

<div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock0" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock0" class="mt-0"><code class="language-PowerShell">ssh &lt;insert your linux IP address here&gt; -l &lt;insert linux user name here&gt;
</code></pre>

<ol>
  <li>
    <p>Enter <em>yes</em> to confirm the connection and then type the userâ€™s password and press enter. Your screen should look something like this:</p>

    <p><a href="../Media/PSconnectLinux.png" target="_blank"><img src="../Media/PSconnectLinux.png" alt="linux login"></a></p>
  </li>
  <li>
    <p>You are now ready to paste in the <em>1.2 Install the CEF collector on the Linux machine</em> from the earlier step. Make sure that script from Azure is in the clipboard. In PowerShell right-click the top bar and choose <strong>Edit</strong> and then <strong>Paste</strong>. Once pasted add a <strong>3</strong> to the word <em>python</em> as shown below:</p>

    <p><a href="../Media/ConnectorScript.png" target="_blank"><img src="../Media/ConnectorScript.png" alt="ConnectorScript"></a></p>
  </li>
  <li>
    <p>Once the script is pasted in and adjusted press enter. The script will run against your Linux server remotely. When the script processes properly it should look similar to this screen:</p>

    <p><a href="../Media/LinuxConnected.png" target="_blank"><img src="../Media/LinuxConnected.png" alt="ConnectorScript"></a></p>
  </li>
</ol>

<h3 id="task-3-connect-a-linux-host-using-the-syslog-connector">Task 3: Connect a Linux host using the Syslog connector.</h3>

<p>In this task, you will connect a Linux host to Microsoft Sentinel with the Syslog connector.</p>

<ol>
  <li>
    <p>Connect to WIN1, which should already be in the Microsoft Sentinel portal for your workspace.</p>
  </li>
  <li>
    <p>From the Data Connectors tab, search for the <strong>Syslog</strong> connector and select it from the list.</p>
  </li>
  <li>
    <p>Select <strong>Open connector page</strong> on the connector information blade.</p>
  </li>
  <li>
    <p>Open the <strong>Install agent on a non-Azure Linux Machine</strong> section.</p>
  </li>
  <li>
    <p>Select the link for <strong>Download &amp; install agent for non-Azure Linux machine</strong>.</p>
  </li>
  <li>
    <p>Select the tab for <strong>Linux servers</strong>.</p>
  </li>
  <li>
    <p>Copy the command in the <em>Download and onboard agent for Linux</em> area to the clipboard.</p>
  </li>
  <li>
    <p>Launch your LIN2 virtual machine and login with the username as password provided by your lab hoster. Note the IP address for your LIN2 server. See the screenshot below as an example:</p>

    <p><a href="../Media/LinuxLoginExample.png" target="_blank"><img src="../Media/LinuxLoginExample.png" alt="linux login"></a></p>
  </li>
  <li>
    <p>Go back to the WIN1 virtual machine and launch a NEW Windows PowerShell as Administrator by right-clicking the Start menu icon and select <strong>Windows PowerShell (Admin)</strong>. Select <strong>Yes</strong> to allow the app to run in the User Account Control window that appears.</p>

    <blockquote>
      <p><strong>Note:</strong> You can reuse the Windows PowerShell window if the <em>Installation completed</em> for the last task by entering <em>exit</em> to close the connection to LIN1.</p>
    </blockquote>
  </li>
  <li>
    <p>Enter the following PowerShell command, adjusting for your specific Linux server information, and press enter:</p>
  </li>
</ol>

<div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock1" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock1" class="mt-0"><code class="language-PowerShell">ssh &lt;insert your linux IP address here&gt; -l &lt;insert linux user name here&gt;
</code></pre>

<ol>
  <li>Enter <em>yes</em> to confirm the connection and then type the userâ€™s password and press enter. Your screen should look something like this:</li>
</ol>

<p><a href="../Media/PSconnectLinux.png" target="_blank"><img src="../Media/PSconnectLinux.png" alt="linux login"></a></p>

<ol>
  <li>
    <p>You are now ready to paste in the <em>Download and onboard agent for Linux</em> from the earlier step. Make sure that script from Azure is in the clipboard. In PowerShell right-click the top bar and choose <strong>Edit</strong> and then <strong>Paste</strong>.</p>
  </li>
  <li>
    <p>Once the script is pasted in press enter. The script will run against your Linux server remotely. You have completed the task. No further labs in this course rely on this connection.</p>
  </li>
</ol>

<h3 id="task-4-configure-the-facilities-you-want-to-collect-and-their-severities-for-the-syslog-connector">Task 4: Configure the facilities you want to collect and their severities for the Syslog connector.</h3>

<p>In this task, you will configure the Syslog collection facilities.</p>

<ol>
  <li>
    <p>Connect to WIN1 virtual machine.</p>
  </li>
  <li>
    <p>In Microsoft Sentinel portal, select <strong>Settings</strong> and then <strong>Workspace settings</strong> from the settings blade.</p>
  </li>
  <li>
    <p>Select <strong>Agents configuration</strong> from the <strong>Settings</strong> area.</p>
  </li>
  <li>
    <p>Select the <strong>Syslog</strong> tab.</p>
  </li>
  <li>
    <p>Select the <strong>+ Add facility</strong> button.</p>
  </li>
  <li>
    <p>Select <strong>auth</strong> from the drop-down menu for <em>Facility name</em>.</p>
  </li>
  <li>
    <p>Select the <strong>+ Add facility</strong> button again.</p>
  </li>
  <li>
    <p>Select <strong>authpriv</strong> from the drop-down menu for <em>Facility name</em>.</p>
  </li>
  <li>
    <p>Select <strong>Apply</strong>.  You have completed this task.</p>
  </li>
</ol>

<h2 id="proceed-to-exercise-4">Proceed to Exercise 4</h2>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/SC-200T00A-Microsoft-Security-Operations-Analyst" target="_blank" class="ml-2">
                    MicrosoftLearning/SC-200T00A-Microsoft-Security-Operations-Analyst
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D20cbc7b52187d61fca294ac2c00146c2c7c6d337.js"></script>



</body></html>