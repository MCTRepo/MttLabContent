<!DOCTYPE html><html lang="en"><head>
        <title>
            AZ-900T0xZH-MicrosoftAzureFundamentals
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                AZ-900T0xZH-MicrosoftAzureFundamentals
            </a>
            <a href="https://github.com/MicrosoftLearning/AZ-900T0xZH-MicrosoftAzureFundamentals" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    </ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="11---使用-cli-创建-vm10-分钟">11 - 使用 CLI 创建 VM（10 分钟）</h1>

<p>在本演练中，我们将配置 Cloud Shell，使用 Azure CLI 创建资源组和虚拟机，并查看 Azure 顾问建议。</p>

<h1 id="任务-1配置-cloud-shell">任务 1：配置 Cloud Shell</h1>

<p>在此任务中，我们将配置 Cloud Shell，然后使用 Azure CLI 创建资源组和虚拟机。</p>

<ol>
  <li>
    <p>登录到 <a href="https://portal.azure.com">Azure 门户</a>。</p>
  </li>
  <li>
    <p>单击 Azure 门户右上方的图标，在 Azure 门户中打开 <strong>Azure Cloud Shell</strong>。</p>

    <p><a href="../images/1002.png" target="_blank"><img src="../images/1002.png" alt="Azure 门户“Azure Cloud Shell”图标的屏幕截图。"></a></p>
  </li>
  <li>
    <p>在“欢迎使用 Azure Cloud Shell”对话中，当提示选择“<strong>Bash</strong>”或“<strong>PowerShell</strong>”时，请选择“<strong>Bash</strong>”。</p>
  </li>
  <li>
    <p>将打开一个显示“<strong>你没有安装任何存储</strong>”的新窗口。选择“<strong>高级设置</strong>”。</p>
  </li>
  <li>
    <p>在“高级设置”屏幕中，填写以下字段，然后单击“创建存储”：</p>
    <ul>
      <li>资源组：<strong>创建新的资源组</strong></li>
      <li>存储帐户：新建使用全局唯一名称的帐户（例如 cloudshellxyzstorage）</li>
      <li>文件共享：创建一个新文件共享并将其命名为 cloudshellfileshare</li>
    </ul>
  </li>
</ol>

<h1 id="任务-2使用-cli-创建新虚拟机">任务 2：使用 CLI 创建新虚拟机</h1>

<p>在此任务中，我们将使用 Azure CLI 创建资源组和虚拟机。</p>

<ol>
  <li>
    <p>确保在 <strong>Cloud Shell</strong> 窗格左上方的下拉菜单中选择 <strong>Bash</strong> （如果未选择，请进行选择）。</p>

    <p><a href="../images/1002a.png" target="_blank"><img src="../images/1002a.png" alt="Azure 门户 Azure Cloud Shell 的屏幕截图，其中突出显示了 Bash 下拉列表。"></a></p>
  </li>
  <li>
    <p>输入以下命令验证正在使用的资源组。</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock0" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock0" class="mt-0"><code class="language-cli"> az group list --output table
</code></pre>
  </li>
  <li>
    <p>请在 Cloud Shell 中输入以下命令，并确保每一行后面都有反斜杠 (<code>\</code>) 字符（最后一行除外）。如果在同一行键入完整命令，请勿使用反斜杠字符。</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock1" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock1" class="mt-0"><code class="language-cli"> az vm create \
 --name myVMCLI \
 --resource-group myRGCLI \
 --image UbuntuLTS \
 --location EastUS2 \
 --admin-username azureuser \
 --admin-password Pa$$w0rd1234
</code></pre>

    <blockquote>
      <p><strong>备注</strong>：如果在 Windows 计算机上使用此命令行，请将反斜杠 (<code>\</code>) 字符替换为脱字符 (<code>^</code>)。</p>
    </blockquote>

    <p><strong>备注</strong>：该命令将需要 2 至 3 分钟才能完成。该命令将创建一个虚拟机以及与之关联的各种资源，例如存储、网络和安全资源。在虚拟机部署完成之前，请勿继续进行下一步。</p>
  </li>
  <li>
    <p>命令完成运行后，在浏览器窗口关闭 Cloud Shell 窗格。</p>
  </li>
  <li>
    <p>在 Azure 门户中，搜索 <strong>“虚拟机”</strong> 并验证 <strong>myVMCLI</strong> 是否正在运行。</p>

    <p><a href="../images/1101.png" target="_blank"><img src="../images/1101.png" alt="此屏幕截图显示了“虚拟机”页面，其中 myVMPS 处于正在运行的状态。"></a></p>
  </li>
</ol>

<h1 id="任务-3在-cloud-shell-中执行命令">任务 3：在 Cloud Shell 中执行命令</h1>

<p>在此任务中，我们将练习从 Cloud Shell 执行 CLI 命令。</p>

<ol>
  <li>
    <p>单击 Azure 门户右上方的图标，在 Azure 门户中打开 <strong>Azure Cloud Shell</strong>。</p>
  </li>
  <li>
    <p>确保在 Cloud Shell 窗格左上方的下拉菜单中选择 <strong>Bash</strong>。</p>
  </li>
  <li>
    <p>检索有关你预配的虚拟机的信息，包括名称、资源组、位置和状态。注意 PowerState 为 <strong>“正在运行”</strong>。</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock2" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock2" class="mt-0"><code class="language-cli"> az vm show --resource-group myRGCLI --name myVMCLI --show-details --output table 
</code></pre>
  </li>
  <li>
    <p>停止虚拟机。请注意提示在虚拟机解除分配之前都将继续计费的消息。</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock3" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock3" class="mt-0"><code class="language-cli"> az vm stop --resource-group myRGCLI --name myVMCLI
</code></pre>
  </li>
  <li>
    <p>验证你的虚拟机状态。PowerState 现在应为 <strong>“已停止”</strong>。</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock4" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock4" class="mt-0"><code class="language-cli"> az vm show --resource-group myRGCLI --name myVMCLI --show-details --output table 
</code></pre>
  </li>
</ol>

<h1 id="任务-4查看-azure-顾问建议">任务 4：查看 Azure 顾问建议</h1>

<p>在此任务中，我们将查看 Azure 顾问建议。</p>

<p><strong>备注：</strong> 如果已完成上一个实验室（使用 PowerShell 创建 VM），那么就已执行此任务。</p>

<ol>
  <li>
    <p>从 <strong>“所有服务”</strong> 边栏选项卡，搜索并选择 <strong>“顾问”</strong>。</p>
  </li>
  <li>
    <p>在“<strong>顾问</strong>”边栏选项卡中，选择“<strong>概述</strong>”。请注意，建议按可靠性、安全性、性能和费用进行分组。</p>

    <p><a href="../images/1103.png" target="_blank"><img src="../images/1103.png" alt="顾问“概述”页面的屏幕截图。 "></a></p>
  </li>
  <li>
    <p>选择 <strong>“所有建议”</strong> 并花一些时间查看每个建议和建议的操作。</p>

    <p><strong>备注：</strong> 建议会根据资源情况而有所不同。</p>

    <p><a href="../images/1104.png" target="_blank"><img src="../images/1104.png" alt="顾问“所有建议”页面的屏幕截图。"></a></p>
  </li>
  <li>
    <p>请注意，可将建议下载为 CSV 或 PDF 文件。</p>
  </li>
  <li>
    <p>请注意，你可以创建警报。</p>
  </li>
  <li>
    <p>如有时间，请继续尝试使用 Azure CLI。</p>
  </li>
</ol>

<p>恭喜！你已配置了 Cloud Shell，使用 Azure CLI 创建了虚拟机，使用 Azure CLI 命令进行了练习，并查看了顾问建议。</p>

<p><strong>备注</strong>：为避免产生额外费用，你可以根据需要删除此资源组。搜索资源组，单击你的资源组，然后单击“<strong>删除资源组</strong>”。验证资源组的名称，然后单击“<strong>删除</strong>”。关注“<strong>通知</strong>”，了解删除操作的进度。</p>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/AZ-900T0xZH-MicrosoftAzureFundamentals" target="_blank" class="ml-2">
                    MicrosoftLearning/AZ-900T0xZH-MicrosoftAzureFundamentals
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D.js"></script>



</body></html>