<!DOCTYPE html><html lang="en"><head>
        <title>
            AZ-900T0xZH-MicrosoftAzureFundamentals
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                AZ-900T0xZH-MicrosoftAzureFundamentals
            </a>
            <a href="https://github.com/MicrosoftLearning/AZ-900T0xZH-MicrosoftAzureFundamentals" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    </ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="06---创建-sql-数据库5-分钟">06 - 创建 SQL 数据库（5 分钟）</h1>

<p>在本演练中，我们将在 Azure 中创建一个 SQL 数据库，然后查询该数据库中的数据。</p>

<h1 id="任务-1创建数据库">任务 1：创建数据库</h1>

<p>在此任务中，我们将基于“AdventureWorksLT”示例数据库创建 SQL 数据库。</p>

<ol>
  <li>
    <p>登录至 Azure 门户，网址：<a href="https://portal.azure.com"><strong>https://portal.azure.com</strong></a></p>
  </li>
  <li>
    <p>从“<strong>所有服务</strong>”边栏选项卡，搜索并选择“<strong>SQL 数据库</strong>”，然后单击“<strong>+ 添加</strong>”、“<strong>+ 创建</strong>”、“<strong>+ 新建</strong>”。</p>
  </li>
  <li>
    <p>在“<strong>基本</strong>”选项卡中，填写以下信息。</p>

    <table>
      <thead>
        <tr>
          <th>设置</th>
          <th>值</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>订阅</td>
          <td><strong>使用提供的默认值</strong></td>
        </tr>
        <tr>
          <td>资源组</td>
          <td><strong>创建新的资源组</strong></td>
        </tr>
        <tr>
          <td>数据库名称</td>
          <td><strong>db1</strong></td>
        </tr>
        <tr>
          <td>服务器</td>
          <td>选择“<strong>新建</strong>”（右侧会打开一个新的侧边栏）</td>
        </tr>
        <tr>
          <td>服务器名称</td>
          <td><strong>sqlserverxxxx</strong>（必须是唯一的）</td>
        </tr>
        <tr>
          <td>位置</td>
          <td><strong>（美国）美国东部</strong></td>
        </tr>
        <tr>
          <td>身份验证方法</td>
          <td><strong>使用 SQL 身份验证</strong></td>
        </tr>
        <tr>
          <td>服务器管理员登录名</td>
          <td><strong>sqluser</strong></td>
        </tr>
        <tr>
          <td>密码</td>
          <td><strong>Pa$$w0rd1234</strong></td>
        </tr>
        <tr>
          <td>单击</td>
          <td><strong>确定</strong></td>
        </tr>
      </tbody>
    </table>

    <p><a href="../images/0501.png" target="_blank"><img src="../images/0501.png" alt="“服务器”窗格和“新建服务器”窗格的屏幕截图，其中已按照表格填充字段，并突出显示了“查看 + 创建”和“确定”按钮。"></a></p>
  </li>
  <li>
    <p>在“<strong>网络</strong>”选项卡上，配置以下设置（其他设置保留为默认值）</p>

    <table>
      <thead>
        <tr>
          <th>设置</th>
          <th>值</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>连接方法</td>
          <td><strong>公共终结点</strong></td>
        </tr>
        <tr>
          <td>允许 Azure 服务和资源访问此服务器</td>
          <td><strong>是</strong></td>
        </tr>
        <tr>
          <td>添加当前客户端 IP 地址</td>
          <td><strong>否</strong></td>
        </tr>
      </tbody>
    </table>

    <p><a href="../images/0501b.png" target="_blank"><img src="../images/0501b.png" alt="“创建 SQL 数据库”边栏选项卡的“网络”选项卡的屏幕截图，其中已根据表选择了设置，并且突出显示了“查看 + 创建”按钮。"></a></p>
  </li>
  <li>
    <p>在“<strong>安全</strong>”选项卡上。</p>

    <table>
      <thead>
        <tr>
          <th>设置</th>
          <th>值</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Microsoft Defender for SQL</td>
          <td><strong>以后再说</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>前往“<strong>其他设置</strong>”选项卡。我们将使用 AdventureWorksLT 示例数据库。</p>

    <table>
      <thead>
        <tr>
          <th>设置</th>
          <th>值</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>使用现有数据</td>
          <td><strong>示例</strong></td>
        </tr>
      </tbody>
    </table>

    <p><a href="../images/0501c.png" target="_blank"><img src="../images/0501c.png" alt="“创建 SQL 数据库”边栏选项卡的“其他设置”选项卡的屏幕截图，其中已根据表选择了设置，并且突出显示了“查看 + 创建”按钮。"></a></p>
  </li>
  <li>
    <p>单击“<strong>查看 + 创建</strong>”，然后单击“<strong>创建</strong>”以部署和预配资源组、服务器和数据库。部署大约需要 2 到 5 分钟。</p>
  </li>
</ol>

<h1 id="任务-2测试数据库">任务 2：测试数据库。</h1>

<p>在此任务中，我们将配置 SQL Server 并运行 SQL 查询。</p>

<ol>
  <li>
    <p>部署完成后，在部署边栏选项卡单击“前往资源”。或者，在“<strong>所有资源</strong>”边栏选项卡中搜索并选择“<strong>数据库</strong>”，然后 <strong>SQL 数据库</strong>可确保已创建新数据库。你可能需要<strong>刷新</strong>页面。</p>

    <p><a href="../images/0502.png" target="_blank"><img src="../images/0502.png" alt="刚刚部署的 SQL 数据库和服务器的屏幕截图。"></a></p>
  </li>
  <li>
    <p>单击代表你创建的 SQL 数据库的“<strong>db1</strong>”条目。在 db1 边栏选项卡中，单击“<strong>查询编辑器(预览版)</strong>”。</p>
  </li>
  <li>
    <p>使用密码“<strong>Pa$$w0rd1234</strong>”以 <strong>sqluser</strong> 身份登录。</p>
  </li>
  <li>
    <p>你将无法登录。请仔细阅读错误，并记下需要允许通过防火墙的 IP 地址。</p>

    <p><a href="../images/0503.png" target="_blank"><img src="../images/0503.png" alt="此屏幕截图显示了包含 IP 地址错误的“查询编辑器”登录页面。"></a></p>
  </li>
  <li>
    <p>返回“<strong>db1</strong>”边栏选项卡，单击“<strong>概览</strong>”。</p>

    <p><a href="../images/0504.png" target="_blank"><img src="../images/0504.png" alt="“SQL Server”页面的屏幕截图。"></a></p>
  </li>
  <li>
    <p>在 db1“<strong>概览</strong>”边栏选项卡中，单击位于概览屏幕顶部中央的“<strong>设置服务器防火墙</strong>”。</p>
  </li>
  <li>
    <p>单击“<strong>+ 添加客户端 IP</strong>”（顶部菜单栏），然后添加错误中引用的 IP 地址。（它可能已为你自动填充 - 如果没有将其粘贴到 IP 地址字段中）。请务必<strong>保存</strong>更改。</p>

    <p><a href="../images/0506.png" target="_blank"><img src="../images/0506.png" alt="此屏幕截图显示了“SQL Server 防火墙设置”页面，其中突出显示了新的 IP 规则。"></a></p>
  </li>
  <li>
    <p>回到 SQL 数据库（向左滑动底部切换栏）并单击“<strong>查询编辑器(预览版)</strong>”。尝试使用密码“<strong>Pa$$w0rd1234</strong>”以 <strong>sqluser</strong> 身份重新登录。此次应尝试成功。请注意，部署新的防火墙规则可能需要几分钟时间。</p>
  </li>
  <li>
    <p>成功登录后，系统将显示查询窗格。在编辑器窗格中输入以下查询。</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock0" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock0" class="mt-0"><code class="language-SQL hljs"> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> TOP <span class="hljs-number"><span class="hljs-number">20</span></span> pc.Name <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> CategoryName, p.name <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ProductName
 <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> SalesLT.ProductCategory pc
 <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> SalesLT.Product p
 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> pc.productcategoryid = p.productcategoryid;
</code></pre>

    <p><a href="../images/0507.png" target="_blank"><img src="../images/0507.png" alt="此屏幕截图显示了“查询编辑器”，其中包含“查询”窗格和成功执行的命令。"></a></p>
  </li>
  <li>
    <p>单击“<strong>运行</strong>”，然后在“<strong>结果</strong>”窗格中查看查询结果。查询应会成功运行。</p>

    <p><a href="../images/0508.png" target="_blank"><img src="../images/0508.png" alt="此屏幕截图显示了数据库“查询编辑器”窗格，其中 SQL 代码已成功运行，并且输出在“结果”窗格中可见。"></a></p>
  </li>
</ol>

<p>恭喜！你已在 Azure 中创建了一个 SQL 数据库，并成功查询了该数据库中的数据。</p>

<p><strong>备注</strong>：为避免产生额外费用，你可以根据需要删除此资源组。搜索资源组，单击你的资源组，然后单击“<strong>删除资源组</strong>”。验证资源组的名称，然后单击“<strong>删除</strong>”。关注“<strong>通知</strong>”，了解删除操作的进度。</p>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/AZ-900T0xZH-MicrosoftAzureFundamentals" target="_blank" class="ml-2">
                    MicrosoftLearning/AZ-900T0xZH-MicrosoftAzureFundamentals
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D.js"></script>



</body></html>