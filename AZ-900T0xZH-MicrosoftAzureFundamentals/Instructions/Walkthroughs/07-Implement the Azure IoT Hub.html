<!DOCTYPE html><html lang="en"><head>
        <title>
            AZ-900T0xZH-MicrosoftAzureFundamentals
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                AZ-900T0xZH-MicrosoftAzureFundamentals
            </a>
            <a href="https://github.com/MicrosoftLearning/AZ-900T0xZH-MicrosoftAzureFundamentals" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    </ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="07---实现-azure-iot-中心10-分钟">07 - 实现 Azure IoT 中心（10 分钟）</h1>

<p>在本演练中，我们将在 Azure 门户中配置新的 Azure IoT 中心，并使用在线 Raspberry Pi 设备模拟器验证与 IoT 设备的连接。传感器数据和消息从 Raspberry Pi 模拟器传递到 Azure IoT 中心，你可以在 Azure 门户中查看消息传送活动的指标。</p>

<h1 id="任务-1创建一个-iot-中心">任务 1：创建一个 IoT 中心</h1>

<p>在此任务中，我们将创建一个 IoT 中心。</p>

<ol>
  <li>
    <p>登录到 <a href="https://portal.azure.com">Azure 门户</a>。</p>
  </li>
  <li>
    <p>从“<strong>所有服务</strong>”边栏选项卡，搜索并选择“<strong>IoT 中心</strong>”，然后单击“<strong>+ 添加</strong>”、“<strong>+ 创建</strong>”、“<strong>+ 新建</strong>”。</p>
  </li>
  <li>
    <p>在 <strong>“IoT 中心”</strong> 边栏选项卡的 <strong>“基本”</strong> 选项卡上，在字段中填写以下详细信息（将存储帐户名称中的 <strong>“xxxx”</strong> 替换为字母和数字，使该名称在全局范围内唯一）：</p>

    <table>
      <thead>
        <tr>
          <th>设置</th>
          <th>值</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>订阅</td>
          <td><strong>保留提供的默认值</strong></td>
        </tr>
        <tr>
          <td>资源组</td>
          <td><strong>创建新的资源组</strong></td>
        </tr>
        <tr>
          <td>IoT 中心名称</td>
          <td><strong>my-hub-groupxxxxx</strong></td>
        </tr>
        <tr>
          <td>区域</td>
          <td><strong>美国东部</strong></td>
        </tr>
      </tbody>
    </table>

    <p><strong>备注</strong>- 请记住更改 <strong>xxxxx</strong> 以使其成为唯一的 <strong>IoT 中心名称</strong>。</p>
  </li>
  <li>
    <p>转到“<strong>管理</strong>”选项卡，使用下拉列表将“<strong>定价和规模层</strong>”设置为“<strong>S1: 标准层</strong>”。</p>
  </li>
  <li>
    <p>单击 <strong>“查看 + 创建”</strong> 按钮。</p>
  </li>
  <li>
    <p>单击 <strong>“创建”</strong> 按钮开始创建新的 Azure IoT 中心实例。</p>
  </li>
  <li>
    <p>等待 Azure IoT 中心实例部署完成。</p>
  </li>
</ol>

<h1 id="任务-2添加-iot-设备">任务 2：添加 IoT 设备</h1>

<p>在此任务中，我们将 IoT 设备添加到 IoT 中心。</p>

<ol>
  <li>
    <p>部署完成后，在部署边栏选项卡单击 <strong>“前往资源”</strong>。或者，在 <strong>“所有服务”</strong> 边栏选项卡中，搜索并选择 <strong>“IoT 中心”</strong>，然后找到新的 IoT 中心实例</p>

    <p><a href="../images/0601.png" target="_blank"><img src="../images/0601.png" alt="此屏幕截图显示了 Azure 门户中正在进行部署和部署成功的通知。"></a></p>
  </li>
  <li>
    <p>若要添加新的 IoT 设备，向下滚动到“<strong>设备管理</strong>”部分，然后单击“<strong>设备</strong>”。然后，单击“<strong>+ 添加设备</strong>”。</p>

    <p><a href="../images/0602.png" target="_blank"><img src="../images/0602.png" alt="此屏幕截图显示了“IoT 设备”窗格，该窗格在 Azure 门户中的“IoT 中心导航”边栏选项卡中突出显示。突出显示“新建”按钮以说明如何将新的 IoT 设备标识添加到 IoT 中心。"></a></p>
  </li>
  <li>
    <p>将新 IoT 设备命名为 <strong>“myRaspberryPi”</strong>，然后单击 <strong>“保存”</strong> 按钮。这将在 Azure IoT 中心中创建新的 IoT 设备标识。</p>
  </li>
  <li>
    <p>如果看不到新设备，请 <strong>“刷新”</strong> IoT 设备页面。</p>
  </li>
  <li>
    <p>选择 <strong>“myRaspberryPi”</strong> 并复制 <strong>“主连接字符串”</strong> 值。你将在下一任务中使用此密钥来验证与 Raspberry Pi 模拟器的连接。</p>

    <p><a href="../images/0603.png" target="_blank"><img src="../images/0603.png" alt="此屏幕截图显示了“主连接字符串”页面，其中突出显示了“复制”图标。"></a></p>
  </li>
</ol>

<h1 id="任务-3使用-raspberry-pi-模拟器测试设备">任务 3：使用 Raspberry Pi 模拟器测试设备</h1>

<p>在此任务中，我们将使用 Raspberry Pi 模拟器测试设备。</p>

<ol>
  <li>
    <p>在 Web 浏览器中打开一个新的选项卡，然后键入此快捷链接 https://aka.ms/RaspPi 。你会进入 Raspberry Pi 模拟器站点。如果有时间，请阅读有关 Raspberry Pi 模拟器的信息。完成后选择“X”关闭弹出窗口。</p>
  </li>
  <li>
    <p>在右侧的编码区域中，找到带有’const connectionString =’的行。将它替换你在 Azure 门户中复制的连接字符串。请注意，连接字符串包含 DeviceId (<strong>myRaspberryPi</strong>) 和 SharedAccessKey 条目。</p>

    <p><a href="../images/0604.png" target="_blank"><img src="../images/0604.png" alt="Raspberry Pi 模拟器中编码区域的屏幕截图。"></a></p>
  </li>
  <li>
    <p>单击“<strong>运行</strong>”（代码区域下方）以运行应用程序。控制台输出应显示从 Raspberry Pi 模拟器发送到 Azure IoT 中心的传感器数据和消息。每次 Raspberry Pi 模拟器 LED 闪烁时，都会发送数据和消息。</p>

    <p><a href="../images/0605.png" target="_blank"><img src="../images/0605.png" alt="Raspberry Pi 模拟器控制台的屏幕截图。  控制台输出显示了从 Raspberry Pi 模拟器发送到 Azure IoT 中心的传感器数据和消息。"></a></p>
  </li>
  <li>
    <p>选择“<strong>停止</strong>”以停止发送数据。</p>
  </li>
  <li>
    <p>返回 Azure 门户。</p>
  </li>
  <li>
    <p>切换到 IoT 中心“<strong>概览</strong>”边栏选项卡并向下滚动到“<strong>IoT 中心使用情况</strong>”信息以查看使用情况。更改“<strong>显示过去某段时间的数据</strong>”中的时间范围以查看过去一小时的数据。</p>

    <p><a href="../images/0606.png" target="_blank"><img src="../images/0606.png" alt="此屏幕截图显示了 Azure 门户的 IoT 中心使用情况区域中的指标。"></a></p>
  </li>
</ol>

<p>恭喜！你已设置 Azure IoT 中心来从 IoT 设备收集传感器数据。</p>

<p><strong>备注</strong>：为避免产生额外费用，你可以根据需要删除此资源组。搜索资源组，单击你的资源组，然后单击“<strong>删除资源组</strong>”。验证资源组的名称，然后单击“<strong>删除</strong>”。关注“<strong>通知</strong>”，了解删除操作的进度。</p>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/AZ-900T0xZH-MicrosoftAzureFundamentals" target="_blank" class="ml-2">
                    MicrosoftLearning/AZ-900T0xZH-MicrosoftAzureFundamentals
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D.js"></script>



</body></html>