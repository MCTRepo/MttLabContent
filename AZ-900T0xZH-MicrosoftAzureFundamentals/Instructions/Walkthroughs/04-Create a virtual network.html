<!DOCTYPE html><html lang="en"><head>
        <title>
            AZ-900T0xZH-MicrosoftAzureFundamentals
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                AZ-900T0xZH-MicrosoftAzureFundamentals
            </a>
            <a href="https://github.com/MicrosoftLearning/AZ-900T0xZH-MicrosoftAzureFundamentals" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    </ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="04---创建虚拟网络20-分钟">04 - 创建虚拟网络（20 分钟）</h1>

<p>在本演练中，我们将创建一个虚拟网络，将两个虚拟机部署到该虚拟网络上，然后配置它们以允许一个虚拟机通过该虚拟网络 ping 至另一个虚拟机。</p>

<h1 id="任务-1创建虚拟网络">任务 1：创建虚拟网络</h1>

<p>在此任务中，我们将创建虚拟网络。</p>

<p>备注：在开始实验室之前，打开“开始”菜单 &gt;“设置”&gt;“网络和 Internet”&gt;“查找 Windows 防火墙”，禁用虚拟机中的公共和专用防火墙</p>

<ol>
  <li>
    <p>登录 Azure 门户：<a href="https://portal.azure.com" target="_blank"><span style="color: #0066cc;" color="#0066cc">https://portal.azure.com</span></a></p>
  </li>
  <li>
    <p>从“<strong>所有服务</strong>”边栏选项卡，搜索并选择“<strong>虚拟网络</strong>”，然后单击“<strong>+ 添加</strong>”、“<strong>+ 创建</strong>”、“<strong>+ 新建</strong>”。</p>
  </li>
  <li>
    <p>在“<strong>基本</strong>”选项卡上，填写以下信息（其他所有设置保留默认值）：</p>

    <table>
      <thead>
        <tr>
          <th>设置</th>
          <th>值</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>订阅</td>
          <td><strong>保留提供的默认值</strong></td>
        </tr>
        <tr>
          <td>资源组</td>
          <td><strong>创建新的资源组</strong></td>
        </tr>
        <tr>
          <td>名称</td>
          <td><strong>vnet1</strong></td>
        </tr>
        <tr>
          <td>区域</td>
          <td><strong>（美国）美国东部</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>单击“<strong>查看 + 创建</strong>”按钮。确保验证通过。然后点击“创建”来部署资源。</p>
  </li>
</ol>

<h1 id="任务-2创建两个虚拟机">任务 2：创建两个虚拟机</h1>

<p>在此任务中，我们将在虚拟网络中创建两个虚拟机。</p>

<ol>
  <li>
    <p>在“<strong>所有服务</strong>”边栏选项卡中，搜索“<strong>虚拟机</strong>”，然后单击“<strong>+ 添加</strong>”、“<strong>+ 创建</strong>”、“<strong>+ 新建</strong>”，从下拉列表中选择“<strong>虚拟机</strong>”。</p>
  </li>
  <li>
    <p>在“<strong>基本</strong>”选项卡上，填写以下信息（其他所有设置保留默认值）：</p>

    <table>
      <thead>
        <tr>
          <th>设置</th>
          <th>值</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>订阅</td>
          <td><strong>使用提供的默认值</strong></td>
        </tr>
        <tr>
          <td>资源组</td>
          <td><strong>选择下拉列表中的默认值</strong></td>
        </tr>
        <tr>
          <td>虚拟机名称</td>
          <td><strong>vm1</strong></td>
        </tr>
        <tr>
          <td>区域</td>
          <td><strong>（美国）美国东部</strong></td>
        </tr>
        <tr>
          <td>映像</td>
          <td><strong>Windows Server 2019 Datacenter - Gen2</strong></td>
        </tr>
        <tr>
          <td>用户名</td>
          <td><strong>azureuser</strong></td>
        </tr>
        <tr>
          <td>密码</td>
          <td><strong>Pa$$w0rd1234</strong></td>
        </tr>
        <tr>
          <td>公共入站端口</td>
          <td>选择“<strong>允许选定的端口</strong>”</td>
        </tr>
        <tr>
          <td>选定的入站端口</td>
          <td><strong>RDP (3389)</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>选择“<strong>网络</strong>”选项卡。确保虚拟机位于 <strong>vnet1</strong> 虚拟网络中。查看默认设置，但不要进行任何其他更改。</p>
  </li>
  <li>
    <p>单击“<strong>查看 + 创建</strong>”。验证通过后，单击“<strong>创建</strong>”。部署时间可能有所不同，通常需要三到六分钟才能完成部署。</p>
  </li>
  <li>
    <p>监视你的部署，同时继续执行下一步。</p>
  </li>
  <li>
    <p>通过重复上述步骤 <strong>2 至 4</strong> 创建第二个虚拟机。请务必使用其他虚拟机名称，并确保该虚拟机位于同一虚拟网络中，并且使用新的公共 IP 地址：</p>

    <table>
      <thead>
        <tr>
          <th>设置</th>
          <th>值</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>资源组</td>
          <td><strong>选择下拉列表中的默认值（与任务 1-3 和任务 2-2 相同）</strong></td>
        </tr>
        <tr>
          <td>虚拟机名称</td>
          <td><strong>vm2</strong></td>
        </tr>
        <tr>
          <td>虚拟网络</td>
          <td><strong>vnet1</strong></td>
        </tr>
        <tr>
          <td>公共 IP</td>
          <td><strong>vm2-ip</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>等待两台虚拟机部署完毕，状态显示“<em>正在运行</em>”。</p>
  </li>
</ol>

<h1 id="任务-3测试连接">任务 3：测试连接</h1>

<p>在此任务中，我们将尝试测试虚拟机能否相互通信 (ping)。如果无法相互通信，我们将安装一个规则以允许 ICMP 连接。通常，ICMP 连接会被自动阻止。</p>

<ol>
  <li>
    <p>在 <strong>“所有资源”</strong> 边栏选项卡中，搜索 <strong>“vm1”</strong>，打开其 <strong>“概述”</strong> 边栏选项卡，并确保其 <strong>“状态”</strong> 为 <strong>“正在运行”</strong>。你可能需要<strong>刷新</strong>页面。</p>
  </li>
  <li>
    <p>在“<strong>概述</strong>”边栏选项卡上，选择“<strong>连接</strong>”并从下拉列表选择“<strong>RDP</strong>”。</p>

    <p><strong>备注</strong>： 以下说明介绍如何从 Windows 计算机连接到 VM。</p>
  </li>
  <li>
    <p>在“<strong>连接 RDP</strong>”边栏选项卡上，保留默认选项，按 IP 地址通过端口 3389 进行连接，然后单击“<strong>下载 RDP 文件</strong>”。</p>
  </li>
  <li>
    <p>打开下载的 RDP 文件（位于 VM 的左下角）并在出现提示时单击“<strong>连接</strong>”。</p>
  </li>
  <li>
    <p>在“<strong>Windows 安全</strong>”窗口中，键入用户名“<strong>azureuser</strong>”和密码“<strong>Pa$$w0rd1234</strong>”，然后单击“<strong>确定</strong>”。</p>
  </li>
  <li>
    <p>在登录过程中，你可能会收到证书警告。单击“<strong>是</strong>”以创建连接并连接到已部署的 VM。你应该成功连接。关闭弹出的 Windows Server 和仪表板窗口。你应该会看到蓝色的 Windows 背景。现在你已处于虚拟机中。</p>
  </li>
  <li>
    <p>在新创建的虚拟机中，打开“开始”菜单 &gt;“设置”&gt;“网络和 Internet”&gt;“查找 Windows 防火墙”，禁用公共和专用防火墙</p>
  </li>
  <li>
    <p>单击“<strong>启动</strong>”按钮在虚拟机上打开 PowerShell，然后在搜索类型 PowerShell 中，右键单击“<strong>Windows PowerShell</strong>”并选择“<strong>以管理员身份运行</strong>”</p>
  </li>
  <li>
    <p>在 Powershell 中，尝试通过键入以下命令来 ping 通 vm2：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock0" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock0" class="mt-0"><code class="language-PowerShell">ping vm2
</code></pre>
  </li>
  <li>
    <p>尝试应会成功。现已从 VM1 ping 通 VM2。</p>
  </li>
</ol>

<p><strong>恭喜！</strong> 你已经在虚拟网络中配置并部署了两个虚拟机，然后可以连接它们了。</p>

<p><strong>备注</strong>：为避免产生额外费用，你可以根据需要删除此资源组。搜索资源组，单击你的资源组，然后单击“<strong>删除资源组</strong>”。验证资源组的名称，然后单击“<strong>删除</strong>”。关注“<strong>通知</strong>”，了解删除操作的进度。</p>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/AZ-900T0xZH-MicrosoftAzureFundamentals" target="_blank" class="ml-2">
                    MicrosoftLearning/AZ-900T0xZH-MicrosoftAzureFundamentals
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D.js"></script>



</body></html>