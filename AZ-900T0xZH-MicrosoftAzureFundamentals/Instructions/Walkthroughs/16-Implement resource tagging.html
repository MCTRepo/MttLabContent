<!DOCTYPE html><html lang="en"><head>
        <title>
            AZ-900T0xZH-MicrosoftAzureFundamentals
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                AZ-900T0xZH-MicrosoftAzureFundamentals
            </a>
            <a href="https://github.com/MicrosoftLearning/AZ-900T0xZH-MicrosoftAzureFundamentals" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    </ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="16---实现资源标记5-分钟">16 - 实现资源标记（5 分钟）</h1>

<p>在本演练中，我们将创建一个要求标记的策略分配、创建一个存储帐户并测试该标记、查看带有指定标记的资源，并删除该标记策略。</p>

<h1 id="任务-1创建策略分配">任务 1：创建策略分配</h1>

<p>在此任务中，我们将配置 <strong>“资源需要标记”</strong> 策略，并将其分配给我们的订阅。</p>

<ol>
  <li>
    <p>登录到 <a href="https://portal.azure.com">Azure 门户</a>。</p>
  </li>
  <li>
    <p>在 <strong>“所有服务”</strong> 边栏选项卡中，搜索并选择 <strong>“策略”</strong>。</p>
  </li>
  <li>
    <p>向下滚动到 <strong>“创作”</strong> 部分，单击 <strong>“分配”</strong>，然后在页面顶部单击 <strong>“分配策略”</strong>。</p>
  </li>
  <li>
    <p>注意，我们策略的 <strong>“范围”</strong> 覆盖整个订阅。</p>
  </li>
  <li>
    <p>在 <strong>“基本”</strong> 下方，选择 <strong>“策略定义”</strong> 省略号按钮（文本框右侧）。在 <strong>“搜索”</strong> 框中，输入值 <strong>tag</strong>。包含 <strong>“tag”</strong> 一词的相关策略列表随即显示。 向下滚动，直至看到 <strong>“资源需要标记”</strong> 定义，单击该定义，然后单击 <strong>“选择”</strong>。</p>

    <p><a href="../images/1701.png" target="_blank"><img src="../images/1701.png" alt="“可用定义”窗格的屏幕截图，其中选择了“资源需要标记”。"></a></p>
  </li>
  <li>
    <p>在“<strong>参数</strong>”选项卡上，键入“<strong>公司: Contoso</strong>”作为标记键/值对名称。单击“<strong>查看 + 创建</strong>”，然后再单击“<strong>创建</strong>”。</p>

    <p><a href="../images/1702.png" target="_blank"><img src="../images/1702.png" alt="“分配策略”窗格的屏幕截图，其中已填写标记名称。"></a></p>
  </li>
  <li>
    <p>“<strong>资源需要标记</strong>”策略分配已设置好。创建资源时，它必须包含具有“公司: Contoso”键的标记。
<strong>注意 - 你需要等待 30 分钟才能应用策略。</strong></p>

    <p><a href="../images/1703.png" target="_blank"><img src="../images/1703.png" alt="此屏幕截图显示了“策略 - 分配”窗格，其中突出显示了允许的位置分配。"></a></p>
  </li>
</ol>

<h1 id="任务-2创建一个存储帐户以测试所需的标记">任务 2：创建一个存储帐户以测试所需的标记</h1>

<p>在此任务中，我们将创建存储帐户以测试所需的标记。</p>

<ol>
  <li>
    <p>在 Azure 门户的“<strong>所有服务</strong>”边栏选项卡中，搜索并选择“<strong>存储帐户</strong>”，然后单击“<strong>+ 添加”、“+ 创建”、“+ 新建</strong>”。</p>
  </li>
  <li>
    <p>在 <strong>“创建存储帐户”</strong> 边栏选项卡的 <strong>“基本”</strong> 选项卡上，填写以下信息（将存储帐户名称中的 <strong>“xxxx”</strong> 替换为字母和数字，使该名称在全局范围内唯一）。其他设置均保留默认值。</p>

    <table>
      <thead>
        <tr>
          <th>设置</th>
          <th>值</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>订阅</td>
          <td><strong>使用提供的默认值</strong></td>
        </tr>
        <tr>
          <td>资源组</td>
          <td><strong>创建新的资源组</strong></td>
        </tr>
        <tr>
          <td>存储帐户名称</td>
          <td><strong>storageaccountxxxx</strong></td>
        </tr>
        <tr>
          <td>位置</td>
          <td><strong>（美国）美国东部</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>单击 <strong>“查看 + 创建”</strong>。</p>

    <p><strong>备注：</strong> 我们将测试未提供标记时会发生什么。请注意，策略最多可能需要 30 分钟才能生效。</p>
  </li>
  <li>
    <p>你将收到一条说明验证失败的消息。单击 <strong>“单击此处查看详细信息”</strong> 消息。在 <strong>“错误”</strong> 边栏选项卡的 <strong>“摘要”</strong> 选项卡上，请记下说明策略不允许资源的错误消息。</p>

    <p><strong>备注：</strong> 如果查看“原始错误”选项卡，将看到要求的特定标记名称。</p>

    <p><a href="../images/1704.png" target="_blank"><img src="../images/1704.png" alt="屏幕截图显示由于策略错误而未允许。"></a></p>
  </li>
  <li>
    <p>关闭 <strong>“错误”</strong> 窗格并单击 <strong>“上一步”</strong> （屏幕底部）。提供标记信息。</p>

    <table>
      <thead>
        <tr>
          <th>设置</th>
          <th>值</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>标记名称</td>
          <td>“<strong>公司: Contoso</strong>”（可能不在下拉列表中）</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>单击 <strong>“查看 + 创建”</strong>，验证是否已成功验证。单击 <strong>“创建”</strong> 以部署存储帐户。</p>
  </li>
</ol>

<h1 id="任务-3查看带有特定标记的所有资源">任务 3：查看带有特定标记的所有资源</h1>

<ol>
  <li>
    <p>在 Azure 门户的 <strong>“所有服务”</strong> 边栏选项卡中，搜索并选择 <strong>“标记”</strong>。</p>
  </li>
  <li>
    <p>记下所有标记及其值。单击 <strong>“Company:  Contoso”</strong> 键/值对。这将显示一个边栏选项卡，其中显示新创建的存储帐户，但前提是你在部署期间包含了此标记。</p>

    <p><a href="../images/1705.png" target="_blank"><img src="../images/1705.png" alt="此屏幕截图显示了标记，其中选中了“company”和“contoso”。"></a></p>
  </li>
  <li>
    <p>在门户中，显示 <strong>“所有资源”</strong> 边栏选项卡。</p>
  </li>
  <li>
    <p>单击 <strong>“添加筛选器”</strong>，然后添加 <strong>Company</strong> 标记密钥作为筛选类别。应用筛选器后，将仅列出你的存储帐户。</p>

    <p><a href="../images/1706.png" target="_blank"><img src="../images/1706.png" alt="此屏幕截图显示了“所有资源”筛选器，其中选择了“Company”。"></a></p>
  </li>
</ol>

<h1 id="任务-4删除策略分配">任务 4：删除策略分配</h1>

<p>在此任务中，我们将删除 <strong>“资源需要标记”</strong> 策略，以免影响我们后续的工作。</p>

<ol>
  <li>
    <p>在门户的 <strong>“所有服务”</strong> 边栏选项卡中，搜索并选择 <strong>“策略”</strong>。</p>
  </li>
  <li>
    <p>单击 <strong>“资源需要标记”</strong> 策略条目。</p>
  </li>
  <li>
    <p>在顶部菜单中单击 <strong>“删除分配”</strong>。</p>
  </li>
  <li>
    <p>通过在 <strong>“删除分配”</strong> 对话框中单击 <strong>“是”</strong>，确认希望删除策略分配</p>
  </li>
  <li>
    <p>如果有时间，请尝试创建另一个不含标记的资源以确保该策略不再有效。</p>
  </li>
</ol>

<p>恭喜！在本演练中，我们创建了一个要求标记的策略分配、创建了一个资源（存储帐户）并测试了该标记的策略、查看了带有指定标记的资源，并删除了该标记策略。</p>

<p><strong>备注</strong>：为避免产生额外费用，你可以根据需要删除此资源组。搜索资源组，单击你的资源组，然后单击“<strong>删除资源组</strong>”。验证资源组的名称，然后单击“<strong>删除</strong>”。关注“<strong>通知</strong>”，了解删除操作的进度。</p>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/AZ-900T0xZH-MicrosoftAzureFundamentals" target="_blank" class="ml-2">
                    MicrosoftLearning/AZ-900T0xZH-MicrosoftAzureFundamentals
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D.js"></script>



</body></html>