<!DOCTYPE html><html lang="en"><head>
        <title>
            AZ500-AzureSecurityTechnologies
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                AZ500-AzureSecurityTechnologies
            </a>
            <a href="https://github.com/MicrosoftLearning/AZ500-AzureSecurityTechnologies" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="#exercise-1-create-the-senior-admins-group-with-the-user-account-joseph-price-as-its-member">Exercise 1: Create the Senior Admins group with the user account Joseph Price as its member.</a></li><li class="nav-item"><a class="nav-link" href="#exercise-2-create-a-junior-admins-group-containing-the-user-account-of-isabel-garcia-as-its-member">Exercise 2: Create a Junior Admins group containing the user account of Isabel Garcia as its member.</a></li><li class="nav-item"><a class="nav-link" href="#exercise-3-create-a-service-desk-group-containing-the-user-account-of-dylan-williams-as-its-member">Exercise 3: Create a Service Desk group containing the user account of Dylan Williams as its member.</a></li><li class="nav-item"><a class="nav-link" href="#exercise-4-assign-the-virtual-machine-contributor-role-to-the-service-desk-group">Exercise 4: Assign the Virtual Machine Contributor role to the Service Desk group.</a></li></ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="lab-01-role-based-access-control">Lab 01: Role-Based Access Control</h1>
<h1 id="student-lab-manual">Student lab manual</h1>

<h2 id="lab-scenario">Lab scenario</h2>

<p>You have been asked to create a proof of concept showing how Azure users and groups are created. Also, how role-based access control is used to assign roles to groups. Specifically, you need to:</p>

<ul>
  <li>Create a Senior Admins group containing the user account of Joseph Price as its member.</li>
  <li>Create a Junior Admins group containing the user account of Isabel Garcia as its member.</li>
  <li>Create a Service Desk group containing the user account of Dylan Williams as its member.</li>
  <li>Assign the Virtual Machine Contributor role to the Service Desk group.</li>
</ul>

<blockquote>
  <p>For all the resources in this lab, we are using the <strong>East US</strong> region. Verify with your instructor this is the region to use for class.</p>
</blockquote>

<h2 id="lab-objectives">Lab objectives</h2>

<p>In this lab, you will complete the following exercises</p>

<ul>
  <li>Exercise 1: Create the Senior Admins group with the user account Joseph Price as its member (the Azure portal).</li>
  <li>Exercise 2: Create the Junior Admins group with the user account Isabel Garcia as its member (PowerShell).</li>
  <li>Exercise 3: Create the Service Desk group with the user Dylan Williams as its member (Azure CLI).</li>
  <li>Exercise 4: Assign the Virtual Machine Contributor role to the Service Desk group.</li>
</ul>

<h3 id="exercise-1-create-the-senior-admins-group-with-the-user-account-joseph-price-as-its-member">Exercise 1: Create the Senior Admins group with the user account Joseph Price as its member.</h3>

<h4 id="estimated-timing-10-minutes">Estimated timing: 10 minutes</h4>

<p>In this exercise, you will complete the following tasks:</p>

<ul>
  <li>Task 1: Use the Azure portal to create a user account for Joseph Price.</li>
  <li>Task 2: Use the Azure portal to create a Senior Admins group and add the user account of Joseph Price to the group.</li>
</ul>

<h4 id="task-1-use-the-azure-portal-to-create-a-user-account-for-joseph-price">Task 1: Use the Azure portal to create a user account for Joseph Price</h4>

<p>In this task, you will create a user account for Joseph Price.</p>

<ol>
  <li>
    <p>Start a browser session and sign-in to the Azure portal <strong><code>https://portal.azure.com/</code></strong>.</p>

    <blockquote>
      <p><strong>Note</strong>: Sign in to the Azure portal using an account that has the Owner or Contributor role in the Azure subscription you are using for this lab and the Global Administrator role in the Azure AD tenant associated with that subscription.</p>
    </blockquote>
  </li>
  <li>
    <p>In the <strong>Search resources, services, and docs</strong> text box at the top of the Azure portal page, type <strong>Azure Active Directory</strong> and press the <strong>Enter</strong> key.</p>
  </li>
  <li>
    <p>On the <strong>Overview</strong> blade of the Azure Active Directory tenant, in the <strong>Manage</strong> section, select <strong>Users</strong>, and then select <strong>+ New user</strong>.</p>
  </li>
  <li>
    <p>On the <strong>New User</strong> blade, ensure that the <strong>Create user</strong> option is selected, and specify the following settings:</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>User name</td>
          <td><strong>Joseph</strong></td>
        </tr>
        <tr>
          <td>Name</td>
          <td><strong>Joseph Price</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Click on the copy icon next to the <strong>User name</strong> to copy the full user.</p>
  </li>
  <li>
    <p>Ensure that the <strong>Auto-generate</strong> password is selected, select the <strong>Show password</strong> checkbox to identify the automatically generated password. You would need to provide this password, along with the user name to Joseph.</p>
  </li>
  <li>
    <p>Click <strong>Create</strong>.</p>
  </li>
  <li>
    <p>Refresh the <strong>Users | All users</strong> blade to verify the new user was created in your Azure AD tenant.</p>
  </li>
</ol>

<h4 id="task2-use-the-azure-portal-to-create-a-senior-admins-group-and-add-the-user-account-of-joseph-price-to-the-group">Task2: Use the Azure portal to create a Senior Admins group and add the user account of Joseph Price to the group.</h4>

<p>In this task, you will create the <em>Senior Admins</em> group, add the user account of Joseph Price to the group, and configure it as the group owner.</p>

<ol>
  <li>
    <p>In the Azure portal, navigate back to the blade displaying your Azure Active Directory tenant.</p>
  </li>
  <li>
    <p>In the <strong>Manage</strong> section, click <strong>Groups</strong>, and then select <strong>+ New group</strong>.</p>
  </li>
  <li>
    <p>On the <strong>New Group</strong> blade, specify the following settings (leave others with their default values):</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Group type</td>
          <td><strong>Security</strong></td>
        </tr>
        <tr>
          <td>Group name</td>
          <td><strong>Senior Admins</strong></td>
        </tr>
        <tr>
          <td>Membership type</td>
          <td><strong>Assigned</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Click the <strong>No owners selected</strong> link, on the <strong>Add owners</strong> blade, select <strong>Joseph Price</strong>, and click <strong>Select</strong>.</p>
  </li>
  <li>
    <p>Click the <strong>No members selected</strong> link, on the <strong>Add members</strong> blade, select <strong>Joseph Price</strong>, and click <strong>Select</strong>.</p>
  </li>
  <li>
    <p>Back on the <strong>New Group</strong> blade, click <strong>Create</strong>.</p>
  </li>
</ol>

<blockquote>
  <p>Result: You used the Azure Portal to create a user and a group, and assigned the user to the group.</p>
</blockquote>

<h3 id="exercise-2-create-a-junior-admins-group-containing-the-user-account-of-isabel-garcia-as-its-member">Exercise 2: Create a Junior Admins group containing the user account of Isabel Garcia as its member.</h3>

<h4 id="estimated-timing-10-minutes-1">Estimated timing: 10 minutes</h4>

<p>In this exercise, you will complete the following tasks:</p>

<ul>
  <li>Task 1: Use PowerShell to create a user account for Isabel Garcia.</li>
  <li>Task 2: Use PowerShell to create the Junior Admins group and add the user account of Isabel Garcia to the group.</li>
</ul>

<h4 id="task-1-use-powershell-to-create-a-user-account-for-isabel-garcia">Task 1: Use PowerShell to create a user account for Isabel Garcia.</h4>

<p>In this task, you will create a user account for Isabel Garcia by using PowerShell.</p>

<ol>
  <li>
    <p>Open the Cloud Shell by clicking the first icon in the top right of the Azure Portal. If prompted, select <strong>PowerShell</strong> and <strong>Create storage</strong>.</p>
  </li>
  <li>
    <p>Ensure <strong>PowerShell</strong> is selected in the drop-down menu in the upper-left corner of the Cloud Shell pane.</p>

    <blockquote>
      <p><strong>Note</strong>: To paste copied text into the Cloud Shell, right-click within the pane window and select <strong>Paste</strong>. Alternatively, you can use the <strong>Shift+Insert</strong> key combination.</p>
    </blockquote>
  </li>
  <li>
    <p>In the PowerShell session within the Cloud Shell pane, run the following to create a password profile object:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock0" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock0" class="mt-0"><code class="language-powershell"> $passwordProfile = New-Object -TypeName Microsoft.Open.AzureAD.Model.PasswordProfile
</code></pre>
  </li>
  <li>In the PowerShell session within the Cloud Shell pane, run the following to set the value of the password within the profile object:
    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock1" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock1" class="mt-0"><code class="language-powershell"> $passwordProfile.Password = "Pa55w.rd1234"
</code></pre>
  </li>
  <li>
    <p>In the PowerShell session within the Cloud Shell pane, run the following to connect to Azure Active Directory:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock2" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock2" class="mt-0"><code class="language-powershell"> Connect-AzureAD
</code></pre>
  </li>
  <li>
    <p>In the PowerShell session within the Cloud Shell pane, run the following to identify the name of your Azure AD tenant:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock3" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock3" class="mt-0"><code class="language-powershell"> $domainName = ((Get-AzureAdTenantDetail).VerifiedDomains)[0].Name
</code></pre>
  </li>
  <li>
    <p>In the PowerShell session within the Cloud Shell pane, run the following to create a user account for Isabel Garcia:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock4" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock4" class="mt-0"><code class="language-powershell"> New-AzureADUser -DisplayName 'Isabel Garcia' -PasswordProfile $passwordProfile -UserPrincipalName "Isabel@$domainName" -AccountEnabled $true -MailNickName 'Isabel'
</code></pre>
  </li>
  <li>
    <p>In the PowerShell session within the Cloud Shell pane, run the following to list Azure AD users (the accounts of Joseph and Isabel should appear on the listed):</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock5" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock5" class="mt-0"><code class="language-powershell"> Get-AzureADUser 
</code></pre>
  </li>
</ol>

<h4 id="task2-use-powershell-to-create-the-junior-admins-group-and-add-the-user-account-of-isabel-garcia-to-the-group">Task2: Use PowerShell to create the Junior Admins group and add the user account of Isabel Garcia to the group.</h4>

<p>In this task, you will create the Junior Admins group and add the user account of Isabel Garcia to the group by using PowerShell.</p>

<ol>
  <li>
    <p>In the same PowerShell session within the Cloud Shell pane, run the following to create a new security group named Junior Admins:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock6" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock6" class="mt-0"><code class="language-powershell"> New-AzureADGroup -DisplayName 'Junior Admins' -MailEnabled $false -SecurityEnabled $true -MailNickName JuniorAdmins
</code></pre>
  </li>
  <li>
    <p>In the PowerShell session within the Cloud Shell pane, run the following to list the groups in your Azure AD tenant (the list should include the Senior Admins and Junior Admins groups):</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock7" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock7" class="mt-0"><code class="language-powershell"> Get-AzureADGroup
</code></pre>
  </li>
  <li>
    <p>In the PowerShell session within the Cloud Shell pane, run the following to obtain a reference to the user account of Isabel Garcia:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock8" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock8" class="mt-0"><code class="language-powershell"> $user = Get-AzureADUser -Filter "MailNickName eq 'Isabel'"
</code></pre>
  </li>
  <li>
    <p>In the PowerShell session within the Cloud Shell pane, run the following to add the user account of Isabel to the Junior Admins group:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock9" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock9" class="mt-0"><code class="language-powershell"> Add-AzADGroupMember -MemberUserPrincipalName $user.userPrincipalName -TargetGroupDisplayName "Junior Admins" 
</code></pre>
  </li>
  <li>
    <p>In the PowerShell session within the Cloud Shell pane, run the following to verify that the Junior Admins group contains the user account of Isabel:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock10" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock10" class="mt-0"><code class="language-powershell"> Get-AzADGroupMember -GroupDisplayName "Junior Admins"
</code></pre>
  </li>
</ol>

<blockquote>
  <p>Result: You used PowerShell to create a user and a group account, and added the user account to the group account.</p>
</blockquote>

<h3 id="exercise-3-create-a-service-desk-group-containing-the-user-account-of-dylan-williams-as-its-member">Exercise 3: Create a Service Desk group containing the user account of Dylan Williams as its member.</h3>

<h4 id="estimated-timing-10-minutes-2">Estimated timing: 10 minutes</h4>

<p>In this exercise, you will complete the following tasks:</p>

<ul>
  <li>Task 1: Use Azure CLI to create a user account for Dylan Williams.</li>
  <li>Task 2: Use Azure CLI to create the Service Desk group and add the user account of Dylan to the group.</li>
</ul>

<h4 id="task-1-use-azure-cli-to-create-a-user-account-for-dylan-williams">Task 1: Use Azure CLI to create a user account for Dylan Williams.</h4>

<p>In this task, you will create a user account for Dylan Williams.</p>

<ol>
  <li>
    <p>In the drop-down menu in the upper-left corner of the Cloud Shell pane, select <strong>Bash</strong>, and, when prompted, click <strong>Confirm</strong>.</p>
  </li>
  <li>
    <p>In the Bash session within the Cloud Shell pane, run the following to identify the name of your Azure AD tenant:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock11" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock11" class="mt-0"><code class="language-cli"> DOMAINNAME=$(az ad signed-in-user show --query 'userPrincipalName' | cut -d '@' -f 2 | sed 's/\"//')
</code></pre>
  </li>
  <li>
    <p>In the Bash session within the Cloud Shell pane, run the following to create a user, Dylan Williams. Use <em>yourdomain</em>.</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock12" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock12" class="mt-0"><code class="language-cli"> az ad user create --display-name "Dylan Williams" --password "Pa55w.rd1234" --user-principal-name Dylan@$DOMAINNAME
</code></pre>
  </li>
  <li>
    <p>In the Bash session within the Cloud Shell pane, run the following to list Azure AD user accounts (the list should include user accounts of Joseph, Isabel, and Dylan)</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock13" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock13" class="mt-0"><code class="language-cli"> az ad user list --output table
</code></pre>
  </li>
</ol>

<h4 id="task-2-use-azure-cli-to-create-the-service-desk-group-and-add-the-user-account-of-dylan-to-the-group">Task 2: Use Azure CLI to create the Service Desk group and add the user account of Dylan to the group.</h4>

<p>In this task, you will create the Service Desk group and assign Dylan to the group.</p>

<ol>
  <li>
    <p>In the same Bash session within the Cloud Shell pane, run the following to create a new security group named Service Desk.</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock14" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock14" class="mt-0"><code class="language-cli"> az ad group create --display-name "Service Desk" --mail-nickname "ServiceDesk"
</code></pre>
  </li>
  <li>
    <p>In the Bash session within the Cloud Shell pane, run the following to list the Azure AD groups (the list should include Service Desk, Senior Admins, and Junior Admins groups):</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock15" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock15" class="mt-0"><code class="language-cli"> az ad group list -o table
</code></pre>
  </li>
  <li>
    <p>In the Bash session within the Cloud Shell pane, run the following to obtain a reference to the user account of Dylan Williams:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock16" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock16" class="mt-0"><code class="language-cli"> USER=$(az ad user list --filter "displayname eq 'Dylan Williams'")
</code></pre>
  </li>
  <li>
    <p>In the Bash session within the Cloud Shell pane, run the following to obtain the objectId property of the user account of Dylan Williams:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock17" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock17" class="mt-0"><code class="language-cli"> OBJECTID=$(echo $USER | jq '.[].objectId' | tr -d '"')
</code></pre>
  </li>
  <li>
    <p>In the Bash session within the Cloud Shell pane, run the following to add the user account of Dylan to the Service Desk group:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock18" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock18" class="mt-0"><code class="language-cli"> az ad group member add --group "Service Desk" --member-id $OBJECTID
</code></pre>
  </li>
  <li>
    <p>In the Bash session within the Cloud Shell pane, run the following to list members of the Service Desk group and verify that it includes the user account of Dylan:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock19" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock19" class="mt-0"><code class="language-cli"> az ad group member list --group "Service Desk"
</code></pre>
  </li>
  <li>
    <p>Close the Cloud Shell pane.</p>
  </li>
</ol>

<blockquote>
  <p>Result: Using Azure CLI you created a user and a group accounts, and added the user account to the group.</p>
</blockquote>

<h3 id="exercise-4-assign-the-virtual-machine-contributor-role-to-the-service-desk-group">Exercise 4: Assign the Virtual Machine Contributor role to the Service Desk group.</h3>

<h4 id="estimated-timing-10-minutes-3">Estimated timing: 10 minutes</h4>

<p>In this exercise, you will complete the following tasks:</p>

<ul>
  <li>Task 1: Create a resource group.</li>
  <li>Task 2: Assign the Service Desk Virtual Machine Contributor permissions to the resource group.</li>
</ul>

<h4 id="task-1-create-a-resource-group">Task 1: Create a resource group</h4>

<ol>
  <li>
    <p>In the Azure portal, in the <strong>Search resources, services, and docs</strong> text box at the top of the Azure portal page, type <strong>Resource groups</strong> and press the <strong>Enter</strong> key.</p>
  </li>
  <li>
    <p>On the <strong>Resource groups</strong> blade, click <strong>+ Create</strong> and specify the following settings:</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Subscription name</td>
          <td>the name of your Azure subscription</td>
        </tr>
        <tr>
          <td>Resource group name</td>
          <td><strong>AZ500Lab01</strong></td>
        </tr>
        <tr>
          <td>Location</td>
          <td><strong>East US</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Click <strong>Review + create</strong> and then <strong>Create</strong>.</p>

    <blockquote>
      <p><strong>Note</strong>: Wait for the resource group to deploy. Use the <strong>Notification</strong> icon (top right) to track progress of the deployment status.</p>
    </blockquote>
  </li>
  <li>
    <p>Back on the <strong>Resource groups</strong> blade, refresh the page and verify your new resource group appears in the list of resource groups.</p>
  </li>
</ol>

<h4 id="task-2-assign-the-service-desk-virtual-machine-contributor-permissions">Task 2: Assign the Service Desk Virtual Machine Contributor permissions.</h4>

<ol>
  <li>
    <p>On the <strong>Resource groups</strong> blade, click the <strong>AZ500LAB01</strong> resource group entry.</p>
  </li>
  <li>
    <p>On the <strong>AZ500Lab01</strong> blade, click <strong>Access control (IAM)</strong> in the middle pane.</p>
  </li>
  <li>
    <p>On the <strong>AZ500Lab01 | Access control (IAM)</strong> blade, click <strong>+ Add</strong> and then, in the drop-down menu, click <strong>Add role assignment</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Add role assignment</strong> blade, specify the following settings and click <strong>Next</strong> after each step:</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Role in the search tab</td>
          <td><strong>Virtual Machine Contributor</strong></td>
        </tr>
        <tr>
          <td>Assign access to (Under Members Pane)</td>
          <td><strong>User, group, or service principal</strong></td>
        </tr>
        <tr>
          <td>Select (+Select Members)</td>
          <td><strong>Service Desk</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Click <strong>Review + assign</strong> to create the role assignment.</p>
  </li>
  <li>
    <p>From the <strong>Access control (IAM)</strong> blade, select <strong>Role assignments</strong>.</p>
  </li>
  <li>
    <p>On the <strong>AZ500Lab01 | Access control (IAM)</strong> blade, on the <strong>Check access</strong> tab, in the <strong>Search by name or email address</strong> text box, type <strong>Dylan Williams</strong>.</p>
  </li>
  <li>
    <p>In the list of search results, select the user account of Dylan Williams and, on the <strong>Dylan Williams assignments - AZ500Lab01</strong> blade, view the newly created assignment.</p>
  </li>
  <li>
    <p>Close the <strong>Dylan Williams assignments - AZ500Lab01</strong> blade.</p>
  </li>
  <li>
    <p>Repeat the same last two steps to check access for <strong>Joseph Price</strong>.</p>
  </li>
</ol>

<blockquote>
  <p>Result: You have assigned and checked RBAC permissions.</p>
</blockquote>

<p><strong>Clean up resources</strong></p>

<blockquote>
  <p>Remember to remove any newly created Azure resources that you no longer use. Removing unused resources ensures you will not incur unexpected costs.</p>
</blockquote>

<ol>
  <li>
    <p>In the Azure portal, open the Cloud Shell by clicking the first icon in the top right of the Azure Portal.</p>
  </li>
  <li>
    <p>In the drop-down menu in the upper-left corner of the Cloud Shell pane, select <strong>PowerShell</strong>, and, when prompted, click <strong>Confirm</strong>.</p>
  </li>
  <li>
    <p>In the PowerShell session within the Cloud Shell pane, run the following to remove the resource group you created in this lab:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock20" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock20" class="mt-0"><code class="hljs apache"> <span class="hljs-attribute"><span class="hljs-attribute">Remove</span></span>-AzResourceGroup -Name <span class="hljs-string"><span class="hljs-string">"AZ500LAB01"</span></span> -Force -AsJob
</code></pre>
  </li>
  <li>
    <p>Close the <strong>Cloud Shell</strong> pane.</p>
  </li>
</ol>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/AZ500-AzureSecurityTechnologies" target="_blank" class="ml-2">
                    MicrosoftLearning/AZ500-AzureSecurityTechnologies
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D.js"></script>



</body></html>