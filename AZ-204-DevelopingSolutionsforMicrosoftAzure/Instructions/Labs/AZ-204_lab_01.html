<!DOCTYPE html><html lang="en"><head>
        <title>
            AZ-204: Developing solutions for Microsoft Azure
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D64f540ac7c8eef33997aaf23b6af9bd5b858530e.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                AZ-204: Developing solutions for Microsoft Azure
            </a>
            <a href="https://github.com/MicrosoftLearning/AZ-204-DevelopingSolutionsforMicrosoftAzure" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="#before-you-start">Before you start</a></li><li class="nav-item"><a class="nav-link" href="#exercise-1-build-a-backend-api-by-using-azure-storage-and-the-web-apps-feature-of-azure-app-service">Exercise 1: Build a backend API by using Azure Storage and the Web Apps feature of Azure App Service</a></li><li class="nav-item"><a class="nav-link" href="#exercise-2-build-a-front-end-web-application-by-using-azure-web-apps">Exercise 2: Build a front-end web application by using Azure Web Apps</a></li><li class="nav-item"><a class="nav-link" href="#exercise-3-clean-up-your-subscription">Exercise 3: Clean up your subscription</a></li></ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="lab-01-build-a-web-application-on-azure-platform-as-a-service-offering">Lab 01: Build a web application on Azure platform as a service offering</h1>

<h2 id="microsoft-azure-user-interface">Microsoft Azure user interface</h2>

<p>Given the dynamic nature of Microsoft cloud tools, you might experience Azure UI changes that occur after the development of this training content. As a result, the lab instructions and lab steps might not align correctly.</p>

<p>Microsoft updates this training course when the community alerts us to needed changes. However, cloud updates occur frequently, so you might encounter UI changes before this training content updates. <strong>If this occurs, adapt to the changes, and then work through them in the labs as needed.</strong></p>

<h2 id="instructions">Instructions</h2>

<h3 id="before-you-start">Before you start</h3>

<h4 id="sign-in-to-the-lab-environment">Sign in to the lab environment</h4>

<p>Sign in to your Windows 10 virtual machine (VM) by using the following credentials:</p>

<ul>
  <li>
    <p>Username: <strong>Admin</strong></p>
  </li>
  <li>
    <p>Password: <strong>Pa55w.rd</strong></p>
  </li>
</ul>

<blockquote>
  <p><strong>Note</strong>: Your instructor will provide instructions to connect to the virtual lab environment.</p>
</blockquote>

<h4 id="review-the-installed-applications">Review the installed applications</h4>
<p>Find the taskbar on your Windows 10 desktop. The taskbar contains the icons for the applications that you’ll use in this lab, including:</p>

<ul>
  <li>Microsoft Edge</li>
  <li>File Explorer</li>
  <li>Windows Terminal</li>
  <li>Visual Studio Code</li>
</ul>

<h2 id="architecture-diagram">Architecture diagram</h2>

<p><a href="media/Lab01-Diagram.png" target="_blank"><img src="media/Lab01-Diagram.png" alt="Architecture diagram depicting a user building a web application on Azure platform as a service offering."></a></p>

<h3 id="exercise-1-build-a-backend-api-by-using-azure-storage-and-the-web-apps-feature-of-azure-app-service">Exercise 1: Build a backend API by using Azure Storage and the Web Apps feature of Azure App Service</h3>

<h4 id="task-1-open-the-azure-portal">Task 1: Open the Azure portal</h4>

<ol>
  <li>
    <p>On the taskbar, select the <strong>Microsoft Edge</strong> icon.</p>
  </li>
  <li>
    <p>In the browser window, browse to the Azure portal (<a href="https://portal.azure.com">https://portal.azure.com</a>), and then sign in with the account you’ll be using for this lab.</p>

    <blockquote>
      <p><strong>Note</strong>: If this is your first time signing in to the Azure portal, you’ll be offered a tour of the portal. If you prefer to skip the tour, select <strong>Get Started</strong> to begin using the portal.</p>
    </blockquote>
  </li>
</ol>

<h4 id="task-2-create-a-storage-account">Task 2: Create a Storage account</h4>

<ol>
  <li>
    <p>In the Azure portal, use the <strong>Search resources, services, and docs</strong> text box to search for <strong>Storage Accounts</strong>, and then in the list of results, select <strong>Storage Accounts</strong>.</p>
  </li>
  <li>
    <p>On the&nbsp;<strong>Storage accounts</strong>&nbsp;blade, select <strong>+ Create</strong>.</p>
  </li>
  <li>
    <p>On the&nbsp;<strong>Create a storage account</strong>&nbsp;blade, on the <strong>Basics</strong> tab, perform the following actions, and then select <strong>Review + create</strong>:</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Subscription</strong> drop-down list</td>
          <td>Retain the default value.</td>
        </tr>
        <tr>
          <td><strong>Resource group</strong> section</td>
          <td>Select <strong>Create new</strong>, enter <strong>ManagedPlatform</strong>, and then select <strong>OK</strong>.</td>
        </tr>
        <tr>
          <td><strong>Storage account name</strong>&nbsp;text box</td>
          <td>Enter <strong>imgstor</strong><em>[yourname]</em>.</td>
        </tr>
        <tr>
          <td><strong>Region</strong> drop-down list</td>
          <td>Select <strong>(US) East US</strong>.</td>
        </tr>
        <tr>
          <td><strong>Performance</strong> section</td>
          <td>Select the <strong>Standard</strong> option.</td>
        </tr>
        <tr>
          <td><strong>Redundancy</strong> drop-down list</td>
          <td>Select <strong>Locally-redundant storage (LRS)</strong>.</td>
        </tr>
      </tbody>
    </table>

    <p>The following screenshot displays the configured settings on the <strong>Basics</strong> tab of the <strong>Create a storage account</strong> blade.</p>

    <p><a href="media/l01_create_a_storage_account.png" target="_blank"><img src="media/l01_create_a_storage_account.png" alt="Create a storage account blade"></a></p>
  </li>
  <li>
    <p>On the <strong>Review + create</strong> tab, review the options that you selected during the previous steps.</p>
  </li>
  <li>
    <p>Select <strong>Create</strong> to create the storage account by using your specified configuration.</p>

    <blockquote>
      <p><strong>Note</strong>: Wait for the creation task to complete before you proceed with this lab.</p>
    </blockquote>
  </li>
  <li>
    <p>On the <strong>Overview</strong> blade, select the <strong>Go to resource</strong> button to navigate to the blade of the newly created storage account.</p>
  </li>
  <li>
    <p>On the&nbsp;<strong>Storage account</strong>&nbsp;blade, in the&nbsp;<strong>Security + networking</strong>&nbsp;section, select <strong>Access keys</strong>.</p>
  </li>
  <li>
    <p>On the&nbsp;<strong>Access keys</strong>&nbsp;blade, select <strong>Show keys</strong>.</p>
  </li>
  <li>
    <p>Review any one of the keys, and then copy the value of either of the&nbsp;<strong>Connection string</strong>&nbsp;boxes to the clipboard.</p>

    <blockquote>
      <p><strong>Note</strong>: It doesn’t matter which connection string you choose. They are interchangeable.</p>
    </blockquote>
  </li>
  <li>
    <p>Open Notepad, and then paste the copied connection string value to Notepad. You’ll use this value later in this lab.</p>
  </li>
</ol>

<h4 id="task-3-upload-a-sample-blob">Task 3: Upload a sample blob</h4>

<ol>
  <li>
    <p>On the Azure portal’s navigation pane, select <strong>Resource groups</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Resource groups</strong> blade, select the <strong>ManagedPlatform</strong> resource group that you created previously in this lab.</p>
  </li>
  <li>
    <p>On the <strong>ManagedPlatform</strong> blade, select the <strong>imgstor</strong><em>yourname</em> storage account that you created previously in this lab.</p>
  </li>
  <li>
    <p>On the <strong>Storage Account</strong> blade, in the <strong>Data storage</strong> section, select the <strong>Containers</strong> link.</p>
  </li>
  <li>
    <p>On the <strong>Containers</strong> blade, select <strong>+ Container</strong>.</p>
  </li>
  <li>
    <p>In the <strong>New container</strong> window, perform the following actions:</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Name</strong> text box</td>
          <td>Enter <strong>images</strong>.</td>
        </tr>
        <tr>
          <td><strong>Public access level</strong> list</td>
          <td>Select <strong>Blob (anonymous read access for blobs only)</strong>, and then select <strong>Create</strong>.</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>On the <strong>Containers</strong> blade, select the newly created <strong>images</strong> container.</p>
  </li>
  <li>
    <p>On the <strong>images</strong> blade, select <strong>Upload</strong>.</p>
  </li>
  <li>
    <p>In the <strong>Upload blob</strong> window, perform the following actions:</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Files</strong> section</td>
          <td>Select the <strong>Folder</strong> icon.</td>
        </tr>
        <tr>
          <td><strong>File Explorer</strong> window</td>
          <td>Browse to <strong>Allfiles (F):\Allfiles\Labs\01\Starter\Images</strong>, select the <strong>grilledcheese.jpg</strong> file, and then select <strong>Open</strong>.</td>
        </tr>
        <tr>
          <td><strong>Overwrite if files already exist</strong> check box</td>
          <td>Ensure that the check box is selected, and then select <strong>Upload</strong>.</td>
        </tr>
      </tbody>
    </table>

    <blockquote>
      <p><strong>Note</strong>: Wait for the blob to upload before you continue with this lab.</p>
    </blockquote>
  </li>
</ol>

<h4 id="task-4-create-a-web-app">Task 4: Create a web app</h4>

<ol>
  <li>
    <p>On the Azure portal’s navigation pane, select <strong>Create a resource</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Create a resource</strong> blade, in the <strong>Search services and marketplace</strong> text box, enter <strong>Web App</strong>, and then select Enter.</p>
  </li>
  <li>
    <p>On the <strong>Marketplace</strong> search results blade, select the <strong>Web App</strong> result.</p>
  </li>
  <li>
    <p>On the <strong>Web App</strong> blade, select <strong>Create</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Create Web App</strong> blade, on the <strong>Basics</strong> tab, perform the following actions, and then select <strong>Next: Deployment</strong>:</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Subscription</strong> drop-down list</td>
          <td>Retain the default value.</td>
        </tr>
        <tr>
          <td><strong>Resource group</strong> section</td>
          <td>Select <strong>ManagedPlatform</strong>.</td>
        </tr>
        <tr>
          <td><strong>Name</strong>&nbsp;text box</td>
          <td>Enter <strong>imgapi</strong><em>[yourname]</em>.</td>
        </tr>
        <tr>
          <td><strong>Publish</strong> section</td>
          <td>Select <strong>Code</strong>.</td>
        </tr>
        <tr>
          <td><strong>Runtime stack</strong> drop-down list</td>
          <td>Select <strong>.NET Core 3.1 (LTS)</strong>.</td>
        </tr>
        <tr>
          <td><strong>Operating System</strong> section</td>
          <td>Select <strong>Windows</strong>.</td>
        </tr>
        <tr>
          <td><strong>Region</strong> drop-down list</td>
          <td>Select the <strong>East US</strong> region.</td>
        </tr>
        <tr>
          <td><strong>Windows Plan (East US)</strong> section</td>
          <td>Select <strong>Create new</strong>, enter the value <strong>ManagedPlan</strong> in the <strong>Name</strong> text box, and then select <strong>OK</strong>.</td>
        </tr>
        <tr>
          <td><strong>SKU and size</strong> section</td>
          <td>Retain the default value.</td>
        </tr>
      </tbody>
    </table>

    <p>The following screenshot displays the configured settings on the <strong>Create web app</strong> blade.</p>

    <p><a href="media/l01_create_a_web_app.png" target="_blank"><img src="media/l01_create_a_web_app.png" alt="Create web app blade"></a></p>
  </li>
  <li>
    <p>On the <strong>Deployment</strong> tab, select <strong>Next: Monitoring</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Monitoring</strong> tab, in the <strong>Enable Application Insights</strong> section, select <strong>No</strong>, and then select <strong>Review + create</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Review + create</strong> tab, review the options that you selected during the previous steps.</p>
  </li>
  <li>
    <p>Select <strong>Create</strong> to create the web app by using your specified configuration.</p>

    <blockquote>
      <p><strong>Note</strong>: Wait for the web app to be created before you continue with this lab.</p>
    </blockquote>
  </li>
</ol>

<h4 id="task-5-configure-the-web-app">Task 5: Configure the web app</h4>

<ol>
  <li>
    <p>On the Azure portal’s <strong>navigation</strong> pane, select <strong>Resource groups</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Resource groups</strong> blade, select the <strong>ManagedPlatform</strong> resource group that you created previously in this lab.</p>
  </li>
  <li>
    <p>On the <strong>ManagedPlatform</strong> blade, select the <strong>imgapi</strong><em>[yourname]</em> web app that you created previously in this lab.</p>

    <blockquote>
      <p><strong>Note</strong>: If the <strong>imgapi</strong><em>[yourname]</em> web app isn’t listed, select the <strong>Show hidden types</strong> check box to display it.</p>
    </blockquote>
  </li>
  <li>
    <p>On the <strong>App Service</strong> blade, in the <strong>Settings</strong> section, select the <strong>Configuration</strong> link.</p>
  </li>
  <li>
    <p>In the <strong>Configuration</strong> section, perform the following actions, select <strong>Save</strong>, and then select <strong>Continue</strong>.</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Application settings</strong> tab</td>
          <td>Select <strong>New application setting</strong>.</td>
        </tr>
        <tr>
          <td><strong>Add/Edit application setting</strong> pop-up dialog</td>
          <td>In the <strong>Name</strong> text box, enter <strong>StorageConnectionString</strong>.</td>
        </tr>
        <tr>
          <td><strong>Value</strong> text box</td>
          <td>Paste the storage connection string that you previously copied to Notepad.</td>
        </tr>
        <tr>
          <td><strong>Deployment slot setting</strong> text box</td>
          <td>Retain the default value, and then select <strong>OK</strong> to close the pop-up dialog and return to the <strong>Configuration</strong> section.</td>
        </tr>
      </tbody>
    </table>

    <p>Wait for your application settings to save before you continue with the lab.</p>
  </li>
  <li>
    <p>On the <strong>App Service</strong> blade in the <strong>Settings</strong> section, select the <strong>Properties</strong> link.</p>
  </li>
  <li>
    <p>In the <strong>Properties</strong> section, copy the value of the <strong>URL</strong> hyperlink, and then paste it to Notepad. You’ll use this value later in the lab.</p>

    <blockquote>
      <p><strong>Note</strong>: At this point, the web server at this URL will return a placeholder webpage. You haven’t deployed any code to the Web App yet. You’ll deploy code to the Web App later in this lab.</p>
    </blockquote>
  </li>
</ol>

<h4 id="task-6-deploy-an-aspnet-web-application-to-web-apps">Task 6: Deploy an <code>ASP.NET</code> web application to Web Apps</h4>

<ol>
  <li>
    <p>On the taskbar, select the <strong>Visual Studio Code</strong> icon.</p>
  </li>
  <li>
    <p>On the <strong>File</strong> menu, select <strong>Open Folder</strong>.</p>
  </li>
  <li>
    <p>In the <strong>File Explorer</strong> window, browse to <strong>Allfiles (F):\Allfiles\Labs\01\Starter\API</strong>, and then select <strong>Select Folder</strong>.</p>
  </li>
  <li>
    <p>On the&nbsp;<strong>Explorer</strong>&nbsp;pane of the <strong>Visual Studio Code</strong> window, expand the&nbsp;<strong>Controllers</strong> folder, and then select the <strong>ImagesController.cs</strong> file to open the file in the editor.</p>
  </li>
  <li>
    <p>In the editor, in the <strong>ImagesController</strong> class on line 26, observe the <strong>GetCloudBlobContainer</strong> method and the code used to retrieve a container.</p>
  </li>
  <li>
    <p>In the <strong>ImagesController</strong> class on line 36, observe the <strong>Get</strong> method and the code used to retrieve all blobs asynchronously from the <strong>images</strong> container.</p>
  </li>
  <li>
    <p>In the <strong>ImagesController</strong> class on line 55, observe the <strong>Post</strong> method and the code used to persist an uploaded image to  Storage.</p>
  </li>
  <li>
    <p>On the taskbar, select the <strong>Windows Terminal</strong> icon.</p>
  </li>
  <li>
    <p>At the open command prompt, enter the following command, and then select Enter to sign in to the Azure Command-Line Interface (CLI):</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock0" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock0" class="mt-0"><code class="hljs nginx"> <span class="hljs-attribute"><span class="hljs-attribute">az</span></span> login
</code></pre>
  </li>
  <li>
    <p>In the <strong>Microsoft Edge</strong> browser window, enter the email address and password for your Microsoft account, and then select <strong>Sign in</strong>.</p>
  </li>
  <li>
    <p>Return to the currently open Windows terminal <strong>Command Prompt</strong> window. Wait for the sign-in process to finish.</p>
  </li>
  <li>
    <p>At the command prompt, enter the following command, and then select Enter to list all the apps in your <strong>ManagedPlatform</strong> resource group:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock1" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock1" class="mt-0"><code class="hljs cpp"> az webapp <span class="hljs-built_in"><span class="hljs-built_in">list</span></span> --resource-group ManagedPlatform
</code></pre>
  </li>
  <li>
    <p>Enter the following command, and then select Enter to find the apps that have the <strong>imgapi*</strong> prefix:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock2" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock2" class="mt-0"><code class="hljs cpp"> az webapp <span class="hljs-built_in"><span class="hljs-built_in">list</span></span> --resource-group ManagedPlatform --query <span class="hljs-string"><span class="hljs-string">"[?starts_with(name, 'imgapi')]"</span></span>
</code></pre>
  </li>
  <li>
    <p>Enter the following command, and then select Enter to render only the name of the single app that has the <strong>imgapi*</strong> prefix:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock3" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock3" class="mt-0"><code class="hljs css"> <span class="hljs-selector-tag"><span class="hljs-selector-tag">az</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">webapp</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">list</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">--resource-group</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ManagedPlatform</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">--query</span></span> "<span class="hljs-selector-attr"><span class="hljs-selector-attr">[?starts_with(name, 'imgapi')]</span></span>.{<span class="hljs-attribute"><span class="hljs-attribute">Name</span></span>:name}" <span class="hljs-selector-tag"><span class="hljs-selector-tag">--output</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tsv</span></span>
</code></pre>
  </li>
  <li>
    <p>Enter the following command, and then select Enter to change the current directory to the <strong>Allfiles (F):\Allfiles\Labs\01\Starter\API</strong> directory that contains the lab files:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock4" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock4" class="mt-0"><code class="hljs bash"> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> F:\Allfiles\Labs\01\Starter\API\
</code></pre>
  </li>
  <li>
    <p>Enter the following command, and then select Enter to deploy the <strong>api.zip</strong> file to the web app that you created previously in this lab:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock5" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock5" class="mt-0"><code class="hljs sql"> az webapp deployment source config-zip <span class="hljs-comment"><span class="hljs-comment">--resource-group ManagedPlatform --src api.zip --name &lt;name-of-your-api-app&gt;</span></span>
</code></pre>

    <blockquote>
      <p><strong>Note</strong>: Replace the <em>&lt;name-of-your-api-app&gt;</em> placeholder with the name of the web app that you created previously in this lab. You recently queried this app’s name in the previous steps.</p>
    </blockquote>

    <p>Wait for the deployment to complete before you continue with this lab.</p>
  </li>
  <li>
    <p>On the Azure portal’s <strong>navigation</strong> pane, select the <strong>Resource groups</strong> link.</p>
  </li>
  <li>
    <p>On the <strong>Resource groups</strong> blade, select the <strong>ManagedPlatform</strong> resource group that you created previously in this lab.</p>
  </li>
  <li>
    <p>On the <strong>ManagedPlatform</strong> blade, select the <strong>imgapi<em>[yourname]</em></strong> web app that you created previously in this lab.</p>
  </li>
  <li>
    <p>From the <strong>App Service</strong> blade, select <strong>Browse</strong>.</p>

    <blockquote>
      <p><strong>Note</strong>: The <strong>Browse</strong> command will perform a GET request to the root of the website, which returns a JavaScript Object Notation (JSON) array. This array should contain the URL for your single uploaded image in your Storage account.</p>
    </blockquote>
  </li>
  <li>
    <p>Return to your browser window that contains the Azure portal.</p>
  </li>
  <li>
    <p>Close the currently running Visual Studio Code and Windows Terminal applications.</p>
  </li>
</ol>

<h4 id="review">Review</h4>

<p>In this exercise, you created a web app in Azure, and then deployed your <code>ASP.NET</code> web application to Web Apps by using the Azure CLI and Apache Kudu zip file deployment utility.</p>

<h3 id="exercise-2-build-a-front-end-web-application-by-using-azure-web-apps">Exercise 2: Build a front-end web application by using Azure Web Apps</h3>

<h4 id="task-1-create-a-web-app">Task 1: Create a web app</h4>

<ol>
  <li>
    <p>On the Azure portal’s <strong>navigation</strong> pane, select <strong>Create a resource</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Create a resource</strong> blade, in the <strong>Search services and marketplace</strong> text box, enter <strong>Web App</strong>, and then select Enter.</p>
  </li>
  <li>
    <p>On the <strong>Marketplace</strong> search results blade, select <strong>Web App</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Web App</strong> blade, select <strong>Create</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Create Web App</strong> blade, on the <strong>Basics</strong> tab, perform the following actions, and then select <strong>Next: Deployment</strong>:</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Subscription</strong> drop-down list</td>
          <td>Retain the default value.</td>
        </tr>
        <tr>
          <td><strong>Resource group</strong> section</td>
          <td>Select <strong>ManagedPlatform</strong>.</td>
        </tr>
        <tr>
          <td><strong>Name</strong>&nbsp;text box</td>
          <td>Enter <strong>imgweb</strong><em>[yourname]</em>.</td>
        </tr>
        <tr>
          <td><strong>Publish</strong> section</td>
          <td>Select <strong>Code</strong>.</td>
        </tr>
        <tr>
          <td><strong>Runtime stack</strong> drop-down list</td>
          <td>Select <strong>.NET Core 3.1 (LTS)</strong>.</td>
        </tr>
        <tr>
          <td><strong>Operating System</strong> section</td>
          <td>Select <strong>Windows</strong>.</td>
        </tr>
        <tr>
          <td><strong>Region</strong> drop-down list</td>
          <td>Select the <strong>East US</strong> region.</td>
        </tr>
        <tr>
          <td><strong>Windows Plan (East US)</strong> section</td>
          <td>Select <strong>ManagedPlan (S1)</strong>.</td>
        </tr>
      </tbody>
    </table>
  </li>
</ol>

<p>The following screenshot displays the configured settings on the <strong>Create web app</strong> blade.</p>

<p><a href="media/l01_create_a_front_end_web_app.png" target="_blank"><img src="media/l01_create_a_front_end_web_app.png" alt="Create web app blade"></a></p>

<ol>
  <li>
    <p>On the <strong>Deployment</strong> tab, select <strong>Next: Monitoring</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Monitoring</strong> tab, in the <strong>Enable Application Insights</strong> section, select <strong>No</strong>, and then select <strong>Review + create</strong>.</p>
  </li>
  <li>
    <p>From the <strong>Review + create</strong> tab, review the options that you selected during the previous steps.</p>
  </li>
  <li>
    <p>Select <strong>Create</strong> to create the web app by using your specified configuration.</p>

    <blockquote>
      <p><strong>Note</strong>: Wait for the creation task to complete before you continue with this lab.</p>
    </blockquote>
  </li>
</ol>

<h4 id="task-2-configure-a-web-app">Task 2: Configure a web app</h4>

<ol>
  <li>
    <p>On the Azure portal’s navigation pane, select <strong>Resource groups</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Resource groups</strong> blade, select the <strong>ManagedPlatform</strong> resource group that you created previously in this lab.</p>
  </li>
  <li>
    <p>On the <strong>ManagedPlatform</strong> blade, select the <strong>imgweb</strong><em>yourname</em> web app that you created previously in this lab.</p>

    <blockquote>
      <p><strong>Note</strong>: If the <strong>imgweb</strong><em>yourname</em> web app isn’t listed, select the <strong>Show hidden types</strong> check box to display it.</p>
    </blockquote>
  </li>
  <li>
    <p>On the <strong>App Service</strong> blade, in the <strong>Settings</strong> section, select the <strong>Configuration</strong> link.</p>
  </li>
  <li>
    <p>In the <strong>Configuration</strong> section, perform the following actions, select <strong>Save</strong>, and then select <strong>Continue</strong>:</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Application settings</strong> tab</td>
          <td>Select <strong>New application setting</strong></td>
        </tr>
        <tr>
          <td><strong>Add/Edit application setting</strong> pop-up dialog</td>
          <td>In the <strong>Name</strong> text box, enter <strong>ApiUrl</strong>.</td>
        </tr>
        <tr>
          <td><strong>Value</strong> text box</td>
          <td>Enter the web app URL that you copied previously in this lab. <strong>Note</strong>: Make sure you include the protocol, such as <strong>https://</strong>, in the URL that you copy into the <strong>Value</strong> text box for this application setting.</td>
        </tr>
        <tr>
          <td><strong>Deployment slot setting</strong> text box</td>
          <td>Retain the default value, and then select <strong>OK</strong>.</td>
        </tr>
      </tbody>
    </table>

    <blockquote>
      <p><strong>Note</strong>: Wait for the application settings to save before you continue with this lab.</p>
    </blockquote>
  </li>
</ol>

<h4 id="task-3-deploy-an-aspnet-web-application-to-web-apps">Task 3: Deploy an <code>ASP.NET</code> web application to Web Apps</h4>

<ol>
  <li>
    <p>On the taskbar, select the <strong>Visual Studio Code</strong> icon.</p>
  </li>
  <li>
    <p>On the <strong>File</strong> menu, select <strong>Open Folder</strong>.</p>
  </li>
  <li>
    <p>In the <strong>File Explorer</strong> window, browse to <strong>Allfiles (F):\Allfiles\Labs\01\Starter\Web</strong>, and then select <strong>Select Folder</strong>.</p>
  </li>
  <li>
    <p>On the&nbsp;<strong>Explorer</strong>&nbsp;pane of the <strong>Visual Studio Code</strong> window, expand the&nbsp;<strong>Pages</strong> folder, and then select the <strong>Index.cshtml.cs</strong> file to open the file in the editor.</p>
  </li>
  <li>
    <p>In the editor, in the <strong>IndexModel</strong> class on line 30, observe the <strong>OnGetAsync</strong> method and the code used to retrieve the list of images from the API.</p>
  </li>
  <li>
    <p>In the <strong>IndexModel</strong> class on line 41, observe the <strong>OnPostAsync</strong> method and the code used to stream an uploaded image to the backend API.</p>
  </li>
  <li>
    <p>On the taskbar, select the <strong>Windows Terminal</strong> icon.</p>
  </li>
  <li>
    <p>At the open command prompt, enter the following command, and then select Enter to sign in to the Azure CLI:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock6" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock6" class="mt-0"><code class="hljs nginx"> <span class="hljs-attribute"><span class="hljs-attribute">az</span></span> login
</code></pre>
  </li>
  <li>
    <p>In the <strong>Microsoft Edge</strong> browser window, enter the email address and password for your Microsoft account, and then select <strong>Sign in</strong>.</p>
  </li>
  <li>
    <p>Return to the currently open Windows Terminal <strong>Command Prompt</strong> window. Wait for the sign-in process to finish.</p>
  </li>
  <li>
    <p>Enter the following command, and then select Enter to list all the apps in your <strong>ManagedPlatform</strong> resource group:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock7" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock7" class="mt-0"><code class="hljs cpp"> az webapp <span class="hljs-built_in"><span class="hljs-built_in">list</span></span> --resource-group ManagedPlatform
</code></pre>
  </li>
  <li>
    <p>Enter the following command, and then select Enter to find the apps that have the <strong>imgweb*</strong> prefix:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock8" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock8" class="mt-0"><code class="hljs cpp"> az webapp <span class="hljs-built_in"><span class="hljs-built_in">list</span></span> --resource-group ManagedPlatform --query <span class="hljs-string"><span class="hljs-string">"[?starts_with(name, 'imgweb')]"</span></span>
</code></pre>
  </li>
  <li>
    <p>Enter the following command, and then select Enter to render only the name of the single app that has the <strong>imgweb*</strong> prefix:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock9" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock9" class="mt-0"><code class="hljs css"> <span class="hljs-selector-tag"><span class="hljs-selector-tag">az</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">webapp</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">list</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">--resource-group</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ManagedPlatform</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">--query</span></span> "<span class="hljs-selector-attr"><span class="hljs-selector-attr">[?starts_with(name, 'imgweb')]</span></span>.{<span class="hljs-attribute"><span class="hljs-attribute">Name</span></span>:name}" <span class="hljs-selector-tag"><span class="hljs-selector-tag">--output</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tsv</span></span>
</code></pre>
  </li>
  <li>
    <p>Enter the following command, and then select Enter to change the current directory to the <strong>Allfiles (F):\Allfiles\Labs\01\Starter\Web</strong> directory that contains the lab files:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock10" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock10" class="mt-0"><code class="hljs bash"> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> F:\Allfiles\Labs\01\Starter\Web\
</code></pre>
  </li>
  <li>
    <p>Enter the following command, and then select Enter to deploy the <strong>web.zip</strong> file to the web app that you created previously in this lab:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock11" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock11" class="mt-0"><code class="hljs sql"> az webapp deployment source config-zip <span class="hljs-comment"><span class="hljs-comment">--resource-group ManagedPlatform --src web.zip --name &lt;name-of-your-web-app&gt;</span></span>
</code></pre>

    <blockquote>
      <p><strong>Note</strong>: Replace the <em>&lt;name-of-your-web-app&gt;</em> placeholder with the name of the web app that you created previously in this lab. You recently queried this app’s name in the previous steps.</p>
    </blockquote>

    <p>Wait for the deployment to complete before you continue with this lab.</p>
  </li>
  <li>
    <p>On the Azure portal’s <strong>navigation</strong> pane, select <strong>Resource groups</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Resource groups</strong> blade, select the <strong>ManagedPlatform</strong> resource group that you created previously in this lab.</p>
  </li>
  <li>
    <p>On the <strong>ManagedPlatform</strong> blade, select the <strong>imgweb</strong><em>yourname</em> web app that you created previously in this lab.</p>
  </li>
  <li>
    <p>On the <strong>App Service</strong> blade, select <strong>Browse</strong>.</p>
  </li>
  <li>
    <p>Observe the list of images in the gallery. The gallery should list a single image that was uploaded to Storage previously in the lab.</p>
  </li>
  <li>
    <p>In the <strong>Contoso Photo Gallery</strong> webpage, in the <strong>Upload a new image</strong> section, perform the following actions:</p>

    <p>a.  Select <strong>Browse</strong>.</p>

    <p>b.  In the <strong>File Explorer</strong> window, browse to <strong>Allfiles (F):\Allfiles\Labs\01\Starter\Images</strong>, select the <strong>bahnmi.jpg</strong> file, and then select <strong>Open</strong>.</p>

    <p>c.  Select <strong>Upload</strong>.</p>
  </li>
  <li>
    <p>Observe that the list of gallery images has updated with your new image.</p>

    <blockquote>
      <p><strong>Note</strong>: In some rare cases, you might need to refresh your browser window to retrieve the new image.</p>
    </blockquote>
  </li>
  <li>
    <p>Return to the browser window that contains the Azure portal.</p>
  </li>
  <li>
    <p>Close the currently running Visual Studio Code and Windows Terminal applications.</p>
  </li>
</ol>

<h4 id="review-1">Review</h4>

<p>In this exercise, you created an Azure web app and deployed an existing web application’s code to the resource in the cloud.</p>

<h3 id="exercise-3-clean-up-your-subscription">Exercise 3: Clean up your subscription</h3>

<h4 id="task-1-open-azure-cloud-shell">Task 1: Open Azure Cloud Shell</h4>

<ol>
  <li>
    <p>In the Azure portal, select the <strong>Cloud Shell</strong> icon  <a href="media/az204_lab_CloudShell.png" target="_blank"><img src="media/az204_lab_CloudShell.png" alt="Cloud Shell icon"></a> to open a new Bash session. If Cloud Shell defaults to a PowerShell session, select <strong>PowerShell</strong>, and in the drop-down menu, select <strong>Bash</strong>.</p>

    <blockquote>
      <p><strong>Note</strong>: If this is the first time you’re starting <strong>Cloud Shell</strong>, when prompted to select either <strong>Bash</strong> or <strong>PowerShell</strong>, select <strong>PowerShell</strong>. When you’re presented with the <strong>You have no storage mounted</strong> message, select the subscription you’re using in this lab, and then select <strong>Create storage</strong>.</p>
    </blockquote>
  </li>
</ol>

<h4 id="task-2-delete-resource-groups">Task 2: Delete resource groups</h4>

<ol>
  <li>
    <p>On the <strong>Cloud Shell</strong> pane, run the following command to delete the <strong>ManagedPlatform</strong> resource group:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock12" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock12" class="mt-0"><code class="hljs coffeescript"> az group <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> --name ManagedPlatform --<span class="hljs-literal"><span class="hljs-literal">no</span></span>-wait --<span class="hljs-literal"><span class="hljs-literal">yes</span></span>
</code></pre>

    <blockquote>
      <p><strong>Note</strong>: The command executes asynchronously (as determined by the <em>–no-wait</em> parameter). While you’ll be able to run another Azure CLI command immediately after the command executes, within the same Bash session, it’ll take a few minutes before the resource groups are actually removed.</p>
    </blockquote>
  </li>
  <li>
    <p>Close the <strong>Cloud Shell</strong> pane in the portal.</p>
  </li>
</ol>

<h4 id="task-3-close-the-active-applications">Task 3: Close the active applications</h4>

<ul>
  <li>Close the currently running Microsoft Edge application.</li>
</ul>

<h4 id="review-2">Review</h4>

<p>In this exercise, you cleaned up your subscription by removing the resource groups used in this lab.</p>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/AZ-204-DevelopingSolutionsforMicrosoftAzure" target="_blank" class="ml-2">
                    MicrosoftLearning/AZ-204-DevelopingSolutionsforMicrosoftAzure
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D64f540ac7c8eef33997aaf23b6af9bd5b858530e.js"></script>



</body></html>