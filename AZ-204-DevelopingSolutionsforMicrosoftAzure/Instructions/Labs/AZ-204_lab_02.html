<!DOCTYPE html><html lang="en"><head>
        <title>
            AZ-204: Developing solutions for Microsoft Azure
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D64f540ac7c8eef33997aaf23b6af9bd5b858530e.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                AZ-204: Developing solutions for Microsoft Azure
            </a>
            <a href="https://github.com/MicrosoftLearning/AZ-204-DevelopingSolutionsforMicrosoftAzure" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="#before-you-start">Before you start</a></li><li class="nav-item"><a class="nav-link" href="#exercise-1-create-azure-resources">Exercise 1: Create Azure resources</a></li><li class="nav-item"><a class="nav-link" href="#exercise-2-configure-a-local-azure-functions-project">Exercise 2: Configure a local Azure Functions project</a></li><li class="nav-item"><a class="nav-link" href="#exercise-3-create-a-function-thats-triggered-by-an-http-request">Exercise 3: Create a function that’s triggered by an HTTP request</a></li><li class="nav-item"><a class="nav-link" href="#exercise-4-create-a-function-that-triggers-on-a-schedule">Exercise 4: Create a function that triggers on a schedule</a></li><li class="nav-item"><a class="nav-link" href="#exercise-5-create-a-function-that-integrates-with-other-services">Exercise 5: Create a function that integrates with other services</a></li><li class="nav-item"><a class="nav-link" href="#exercise-6-deploy-a-local-function-project-to-an-azure-functions-app">Exercise 6: Deploy a local function project to an Azure Functions app</a></li><li class="nav-item"><a class="nav-link" href="#exercise-7-clean-up-your-subscription">Exercise 7: Clean up your subscription</a></li></ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="lab-02-implement-task-processing-logic-by-using-azure-functions">Lab 02: Implement task processing logic by using Azure Functions</h1>

<h2 id="microsoft-azure-user-interface">Microsoft Azure user interface</h2>

<p>Given the dynamic nature of Microsoft cloud tools, you might experience Azure UI changes that occur after the development of this training content. As a result, the lab instructions and lab steps might not align correctly.</p>

<p>Microsoft updates this training course when the community alerts us to needed changes. However, cloud updates occur frequently, so you might encounter UI changes before this training content updates. <strong>If this occurs, adapt to the changes, and then work through them in the labs as needed.</strong></p>

<h2 id="instructions">Instructions</h2>

<h3 id="before-you-start">Before you start</h3>

<h4 id="sign-in-to-the-lab-environment">Sign in to the lab environment</h4>

<p>Sign in to your Windows 10 virtual machine (VM) by using the following credentials:</p>

<ul>
  <li>Username: <strong>Admin</strong></li>
  <li>Password: <strong>Pa55w.rd</strong></li>
</ul>

<blockquote>
  <p><strong>Note</strong>: Your instructor will provide instructions to connect to the virtual lab environment.</p>
</blockquote>

<h4 id="review-the-installed-applications">Review the installed applications</h4>

<p>Find the taskbar on your Windows 10 desktop. The taskbar contains the icons for the applications that you’ll use in this lab, including:</p>

<ul>
  <li>Microsoft Edge</li>
  <li>File Explorer</li>
  <li>Windows Terminal</li>
  <li>Visual Studio Code</li>
</ul>

<h2 id="architecture-diagram">Architecture diagram</h2>

<p><a href="media/Lab02-Diagram.png" target="_blank"><img src="media/Lab02-Diagram.png" alt="Architecture diagram depicting a user implementing task processing logic by using Azure Functions."></a></p>

<h3 id="exercise-1-create-azure-resources">Exercise 1: Create Azure resources</h3>

<h4 id="task-1-open-the-azure-portal">Task 1: Open the Azure portal</h4>

<ol>
  <li>On the taskbar, select the <strong>Microsoft Edge</strong> icon.</li>
  <li>
    <p>In the browser window, browse to the Azure portal (<a href="https://portal.azure.com">https://portal.azure.com</a>), and then sign in with the account you’ll be using for this lab.</p>

    <blockquote>
      <p><strong>Note</strong>: If this is your first time signing in to the Azure portal, you’ll be offered a tour of the portal. If you prefer to skip the tour, select <strong>Get Started</strong> to begin using the portal.</p>
    </blockquote>
  </li>
</ol>

<h4 id="task-2-create-an-azure-storage-account">Task 2: Create an Azure Storage account</h4>

<ol>
  <li>
    <p>In the Azure portal, use the <strong>Search resources, services, and docs</strong> text box to search for <strong>Storage Accounts</strong>, and then, in the list of results, select <strong>Storage Accounts</strong>.</p>
  </li>
  <li>
    <p>On the&nbsp;<strong>Storage accounts</strong>&nbsp;blade, select <strong>+ Create</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Create a storage account</strong> blade, on the <strong>Basics</strong> tab, perform the following actions, and then select <strong>Review + create</strong>:</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Subscription</strong> drop-down list</td>
          <td>Retain the default value.</td>
        </tr>
        <tr>
          <td><strong>Resource group</strong> section</td>
          <td>Select <strong>Create new</strong>, enter <strong>Serverless</strong>, and then select <strong>OK</strong>.</td>
        </tr>
        <tr>
          <td><strong>Storage account name</strong>&nbsp;text box</td>
          <td>Enter <strong>funcstor</strong><em>[yourname]</em>.</td>
        </tr>
        <tr>
          <td><strong>Region</strong> drop-down list</td>
          <td>Select <strong>(US) East US</strong>.</td>
        </tr>
        <tr>
          <td><strong>Performance</strong> section</td>
          <td>Select the <strong>Standard</strong> option.</td>
        </tr>
        <tr>
          <td><strong>Redundancy</strong> drop-down list</td>
          <td>Select <strong>Locally-redundant storage (LRS)</strong>.</td>
        </tr>
      </tbody>
    </table>

    <p>The following screenshot displays the configured settings in the <strong>Create a storage account</strong> blade.</p>

    <p><a href="media/l02_create_a_storage_account.png" target="_blank"><img src="media/l02_create_a_storage_account.png" alt="Screenshot displaying the configured settings on the Create a storage account blade"></a></p>
  </li>
  <li>
    <p>On the <strong>Review + create</strong> tab, review the options that you selected during the previous steps.</p>
  </li>
  <li>
    <p>Select <strong>Create</strong> to create the storage account by using your specified configuration.</p>

    <blockquote>
      <p><strong>Note</strong>: Wait for the creation task to complete before you proceed with this lab.</p>
    </blockquote>
  </li>
  <li>
    <p>On the <strong>Overview</strong> blade, select the <strong>Go to resource</strong> button to navigate to the blade of the newly created storage account.</p>
  </li>
  <li>
    <p>On the&nbsp;<strong>Storage account</strong>&nbsp;blade, in the&nbsp;<strong>Security + networking</strong>&nbsp;section, select <strong>Access keys</strong>.</p>
  </li>
  <li>
    <p>On the&nbsp;<strong>Access keys</strong>&nbsp;blade, select <strong>Show keys</strong>.</p>
  </li>
  <li>
    <p>Review any one of the keys, and then copy the value of either of the&nbsp;<strong>Connection string</strong>&nbsp;boxes to the clipboard.</p>

    <blockquote>
      <p><strong>Note</strong>: It doesn’t matter which connection string you choose. They are interchangeable.</p>
    </blockquote>
  </li>
  <li>
    <p>Open Notepad, and then paste the copied connection string value to Notepad. You’ll use this value later in this lab.</p>
  </li>
</ol>

<h4 id="task-3-create-a-function-app">Task 3: Create a function app</h4>

<ol>
  <li>
    <p>On the Azure portal’s navigation pane, select the <strong>Create a resource</strong> link.</p>
  </li>
  <li>
    <p>On the <strong>Create a resource</strong> blade, in the <strong>Search services and marketplace</strong> text box, enter <strong>Function</strong>, and then select Enter.</p>
  </li>
  <li>
    <p>On the <strong>Marketplace</strong> search results blade, select the <strong>Function App</strong> result.</p>
  </li>
  <li>
    <p>On the <strong>Function App</strong> blade, select <strong>Create</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Create Function App</strong> blade, on the <strong>Basics</strong> tab, perform the following actions, and then select <strong>Next: Hosting</strong>:</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Subscription</strong> drop-down list</td>
          <td>Retain the default value.</td>
        </tr>
        <tr>
          <td><strong>Resource group</strong> section</td>
          <td>Select <strong>Serverless</strong>.</td>
        </tr>
        <tr>
          <td><strong>Function App name</strong>&nbsp;text box</td>
          <td>Enter <strong>funclogic</strong><em>[yourname]</em>.</td>
        </tr>
        <tr>
          <td><strong>Publish</strong> section</td>
          <td>Select <strong>Code</strong>.</td>
        </tr>
        <tr>
          <td><strong>Runtime stack</strong> drop-down list</td>
          <td>Select <strong>.NET</strong>.</td>
        </tr>
        <tr>
          <td><strong>Version</strong> drop-down list</td>
          <td>Select <strong>3.1</strong>.</td>
        </tr>
        <tr>
          <td><strong>Region</strong> drop-down list</td>
          <td>Select the <strong>East US</strong> region.</td>
        </tr>
      </tbody>
    </table>

    <p>The following screenshot displays the configured settings in the <strong>Create Function App</strong> blade.</p>

    <p><a href="media/l02_create_a_function_app.png" target="_blank"><img src="media/l02_create_a_function_app.png" alt="Screenshot displaying the configured settings on the Create Function App blade"></a></p>
  </li>
  <li>
    <p>On the <strong>Hosting</strong> tab, perform the following actions, and then select <strong>Review + create</strong>:</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Storage account</strong> drop-down list</td>
          <td>Select the <strong>funcstor</strong><em>[yourname]</em> storage account.</td>
        </tr>
        <tr>
          <td><strong>Operating System</strong> section</td>
          <td>Select <strong>Linux</strong>.</td>
        </tr>
        <tr>
          <td><strong>Plan type</strong> drop-down list</td>
          <td>Select <strong>Consumption (Serverless)</strong>.</td>
        </tr>
      </tbody>
    </table>

    <p>The following screenshot displays the configured settings on the <strong>Hosting</strong> tab on the <strong>Create Function App</strong> blade.</p>

    <p><a href="media/l02_create_a_function_app_hosting_tab.png" target="_blank"><img src="media/l02_create_a_function_app_hosting_tab.png" alt="Screenshot displaying the configured settings on the Hosting tab on the Create Function App blade "></a></p>
  </li>
  <li>
    <p>On the <strong>Review + create</strong> tab, review the options that you selected during the previous steps.</p>
  </li>
  <li>
    <p>Select <strong>Create</strong> to create the function app by using your specified configuration.</p>

    <blockquote>
      <p><strong>Note</strong>: Wait for the creation task to complete before you move forward with this lab.</p>
    </blockquote>
  </li>
</ol>

<h4 id="review">Review</h4>

<p>In this exercise, you created all the resources that you’ll use in this lab.</p>

<h3 id="exercise-2-configure-a-local-azure-functions-project">Exercise 2: Configure a local Azure Functions project</h3>

<h4 id="task-1-initialize-a-function-project">Task 1: Initialize a function project</h4>

<ol>
  <li>
    <p>On the taskbar, select the <strong>Windows Terminal</strong> icon.</p>
  </li>
  <li>
    <p>Run the following command to change the current directory to the <strong>Allfiles (F):\Allfiles\Labs\02\Starter\func</strong> empty directory:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock0" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock0" class="mt-0"><code class="language-powershell"> cd F:\Allfiles\Labs\02\Starter\func
</code></pre>
  </li>
  <li>
    <p>Run the following command to use the <strong>Azure Functions Core Tools</strong> to create a new local Azure Functions project in the current directory using the <strong>dotnet</strong> runtime:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock1" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock1" class="mt-0"><code class="language-powershell"> func init --worker-runtime dotnet --force
</code></pre>

    <blockquote>
      <p><strong>Note</strong>: You can review the documentation to [create a new project][azure-functions-core-tools-new-project] using the <strong>Azure Functions Core Tools</strong>.</p>
    </blockquote>
  </li>
  <li>
    <p>Close the <strong>Windows Terminal</strong> application.</p>
  </li>
</ol>

<h4 id="task-2-configure-a-connection-string">Task 2: Configure a connection string</h4>

<ol>
  <li>On the <strong>Start</strong> screen, select the <strong>Visual Studio Code</strong> tile.</li>
  <li>On the <strong>File</strong> menu, select <strong>Open Folder</strong>.</li>
  <li>In the <strong>File Explorer</strong> window that opens, browse to <strong>Allfiles (F):\Allfiles\Labs\02\Starter\func</strong>, and then select <strong>Select Folder</strong>.</li>
  <li>On the <strong>Explorer</strong> pane of the <strong>Visual Studio Code</strong> window, open the <strong>local.settings.json</strong> file.</li>
  <li>
    <p>Observe the current value of the <strong>AzureWebJobsStorage</strong> setting:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock2" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock2" class="mt-0"><code class="language-json hljs"> <span class="hljs-string"><span class="hljs-string">"AzureWebJobsStorage"</span></span>: <span class="hljs-string"><span class="hljs-string">"UseDevelopmentStorage=true"</span></span>,
</code></pre>
  </li>
  <li>Update the value of the <strong>AzureWebJobsStorage</strong> by setting it to the&nbsp;<strong>connection string</strong> of the storage account that you recorded earlier in this lab.</li>
  <li>Save the <strong>local.settings.json</strong> file.</li>
</ol>

<h4 id="task-3-build-and-validate-a-project">Task 3: Build and validate a project</h4>

<ol>
  <li>On the taskbar, select the <strong>Windows Terminal</strong> icon.</li>
  <li>
    <p>Run the following command to change the current directory to the <strong>Allfiles (F):\Allfiles\Labs\02\Starter\func</strong> empty directory:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock3" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock3" class="mt-0"><code class="language-powershell"> cd F:\Allfiles\Labs\02\Starter\func
</code></pre>
  </li>
  <li>
    <p>Run the following command to <strong>build</strong> the .NET Core 3.1 project:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock4" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock4" class="mt-0"><code class="language-powershell"> dotnet build
</code></pre>
  </li>
</ol>

<h4 id="review-1">Review</h4>

<p>In this exercise, you created a local project that you’ll use for Azure Functions development.</p>

<h3 id="exercise-3-create-a-function-thats-triggered-by-an-http-request">Exercise 3: Create a function that’s triggered by an HTTP request</h3>

<h4 id="task-1-create-an-http-triggered-function">Task 1: Create an HTTP-triggered function</h4>

<ol>
  <li>On the taskbar, select the <strong>Windows Terminal</strong> icon.</li>
  <li>
    <p>Run the following command to change the current directory to the <strong>Allfiles (F):\Allfiles\Labs\02\Starter\func</strong> empty directory:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock5" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock5" class="mt-0"><code class="language-powershell"> cd F:\Allfiles\Labs\02\Starter\func
</code></pre>
  </li>
  <li>
    <p>Run the following command to use the <strong>Azure Functions Core Tools</strong> to create a new function named <strong>Echo</strong> using the <strong>HTTP trigger</strong> template:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock6" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock6" class="mt-0"><code class="language-powershell"> func new --template "HTTP trigger" --name "Echo"
</code></pre>

    <blockquote>
      <p><strong>Note</strong>: You can review the documentation to [create a new function][azure-functions-core-tools-new-function] using the <strong>Azure Functions Core Tools</strong>.</p>
    </blockquote>
  </li>
  <li>Close the currently running <strong>Windows Terminal</strong> application.</li>
</ol>

<h4 id="task-2-write-http-triggered-function-code">Task 2: Write HTTP-triggered function code</h4>

<ol>
  <li>On the <strong>Start</strong> screen, select the <strong>Visual Studio Code</strong> tile.</li>
  <li>On the <strong>File</strong> menu, select <strong>Open Folder</strong>.</li>
  <li>In the <strong>File Explorer</strong> window that opens, browse to <strong>Allfiles (F):\Allfiles\Labs\02\Starter\func</strong>, and then select <strong>Select Folder</strong>.</li>
  <li>On the <strong>Explorer</strong> pane of the <strong>Visual Studio Code</strong> window, open the <strong>Echo.cs</strong> file.</li>
  <li>
    <p>In the code editor, observe the example implementation:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock7" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock7" class="mt-0"><code class="language-csharp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.IO;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Threading.Tasks;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Mvc;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Azure.WebJobs;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Azure.WebJobs.Extensions.Http;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Http;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Extensions.Logging;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Newtonsoft.Json;

 <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">func</span></span>
 {
     <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Echo</span></span>
     {
         [<span class="hljs-meta"><span class="hljs-meta">FunctionName(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Echo"</span></span></span><span class="hljs-meta">)</span></span>]
         <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task&lt;IActionResult&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">
             [HttpTrigger(AuthorizationLevel.Function, </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"get"</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"post"</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Route = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">null</span></span></span></span></span><span class="hljs-function">)] HttpRequest req,
             ILogger log)
         </span></span>{
             log.LogInformation(<span class="hljs-string"><span class="hljs-string">"C# HTTP trigger function processed a request."</span></span>);

             <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> name = req.Query[<span class="hljs-string"><span class="hljs-string">"name"</span></span>];

             <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> requestBody = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StreamReader(req.Body).ReadToEndAsync();
             <span class="hljs-keyword"><span class="hljs-keyword">dynamic</span></span> data = JsonConvert.DeserializeObject(requestBody);
             name = name ?? data?.name;

             <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> responseMessage = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(name)
                 ? <span class="hljs-string"><span class="hljs-string">"This HTTP triggered function executed successfully. Pass a name in the query string or in the request body for a personalized response."</span></span>
                 : <span class="hljs-string"><span class="hljs-string">$"Hello, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{name}</span></span></span><span class="hljs-string">. This HTTP triggered function executed successfully."</span></span>;

             <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OkObjectResult(responseMessage);
         }
     }
 }
</code></pre>
  </li>
  <li>Delete all the content within the <strong>Echo.cs</strong> file.</li>
  <li>
    <p>Add the following lines of code to add <strong>using directives</strong> for the <strong>Microsoft.AspNetCore.Mvc</strong>, <strong>Microsoft.Azure.WebJobs</strong>, <strong>Microsoft.AspNetCore.Http</strong>, and <strong>Microsoft.Extensions.Logging</strong> namespaces:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock8" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock8" class="mt-0"><code class="language-csharp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Mvc;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Azure.WebJobs;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Http;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Extensions.Logging;
</code></pre>
  </li>
  <li>
    <p>Create a new <strong>public static</strong> class named <strong>Echo</strong>:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock9" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock9" class="mt-0"><code class="language-csharp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Echo</span></span>
 { }
</code></pre>
  </li>
  <li>
    <p>Observe the <strong>Echo.cs</strong> file again, which should now include:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock10" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock10" class="mt-0"><code class="language-csharp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Mvc;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Azure.WebJobs;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Http;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Extensions.Logging;

 <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Echo</span></span>
 { }
</code></pre>
  </li>
  <li>
    <p>Within the <strong>Echo</strong> class, add the following code block to create a new <strong>public static</strong> method named <strong>Run</strong> that returns a variable of type <strong>IActionResult</strong> and that also takes in variables of type <strong>HttpRequest</strong> and <strong>ILogger</strong> as parameters named <em>request</em> and <em>logger</em>:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock11" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock11" class="mt-0"><code class="language-csharp hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">
     HttpRequest request,
     ILogger logger</span></span></span><span class="hljs-function">)
 </span></span>{ }
</code></pre>
  </li>
  <li>
    <p>Add the following code to append an attribute to the <strong>Run</strong> method of type <strong>FunctionNameAttribute</strong> that has its <strong>name</strong> parameter set to a value of <strong>Echo</strong>:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock12" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock12" class="mt-0"><code class="language-csharp hljs"> [<span class="hljs-meta"><span class="hljs-meta">FunctionName(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Echo"</span></span></span><span class="hljs-meta">)</span></span>]
 <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">
     HttpRequest request,
     ILogger logger</span></span></span><span class="hljs-function">)
 </span></span>{ }
</code></pre>
  </li>
  <li>
    <p>Add the following code to append an attribute to the <strong>request</strong> parameter of type <strong>HttpTriggerAttribute</strong> that has its <strong>methods</strong> parameter array set to a single value of <strong>POST</strong>:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock13" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock13" class="mt-0"><code class="language-csharp hljs"> [<span class="hljs-meta"><span class="hljs-meta">FunctionName(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Echo"</span></span></span><span class="hljs-meta">)</span></span>]
 <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">
     [HttpTrigger(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"POST"</span></span></span></span></span><span class="hljs-function">)] HttpRequest request,
     ILogger logger)
 </span></span>{ }
</code></pre>
  </li>
  <li>
    <p>Observe the <strong>Echo.cs</strong> file again, which should now include the following code:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock14" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock14" class="mt-0"><code class="language-csharp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Mvc;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Azure.WebJobs;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Http;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Extensions.Logging;

 <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Echo</span></span>
 {
     [<span class="hljs-meta"><span class="hljs-meta">FunctionName(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Echo"</span></span></span><span class="hljs-meta">)</span></span>]
     <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">
         [HttpTrigger(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"POST"</span></span></span></span></span><span class="hljs-function">)] HttpRequest request,
         ILogger logger)
     </span></span>{ }
 }
</code></pre>
  </li>
  <li>
    <p>In the <strong>Run</strong> method, enter the following line of code to log a fixed message:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock15" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock15" class="mt-0"><code class="language-csharp hljs"> logger.LogInformation(<span class="hljs-string"><span class="hljs-string">"Received a request"</span></span>);
</code></pre>
  </li>
  <li>
    <p>Enter the following line of code to echo the body of the HTTP request as the HTTP response:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock16" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock16" class="mt-0"><code class="language-csharp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OkObjectResult(request.Body);
</code></pre>
  </li>
  <li>
    <p>Observe the <strong>Echo.cs</strong> file again, which should now include the following code:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock17" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock17" class="mt-0"><code class="language-csharp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Mvc;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Azure.WebJobs;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Http;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Extensions.Logging;

 <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Echo</span></span>
 {
     [<span class="hljs-meta"><span class="hljs-meta">FunctionName(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Echo"</span></span></span><span class="hljs-meta">)</span></span>]
     <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">
         [HttpTrigger(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"POST"</span></span></span></span></span><span class="hljs-function">)] HttpRequest request,
         ILogger logger)
     </span></span>{
         logger.LogInformation(<span class="hljs-string"><span class="hljs-string">"Received a request"</span></span>);
         <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OkObjectResult(request.Body);
     }
 }
</code></pre>
  </li>
  <li>Select <strong>Save</strong> to save your changes to the <strong>Echo.cs</strong> file.</li>
</ol>

<h4 id="task-3-test-the-http-triggered-function-by-using-httprepl">Task 3: Test the HTTP-triggered function by using httprepl</h4>

<ol>
  <li>On the taskbar, select the <strong>Windows Terminal</strong> icon.</li>
  <li>
    <p>Run the following command to change the current directory to the <strong>Allfiles (F):\Allfiles\Labs\02\Starter\func</strong> empty directory:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock18" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock18" class="mt-0"><code class="language-powershell"> cd F:\Allfiles\Labs\02\Starter\func
</code></pre>
  </li>
  <li>
    <p>Run the following command to run the function app project:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock19" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock19" class="mt-0"><code class="language-powershell"> func start --build
</code></pre>

    <blockquote>
      <p><strong>Note</strong>: You can review the documentation to [start the function app project locally][azure-functions-core-tools-start-function] using the <strong>Azure Functions Core Tools</strong>.</p>
    </blockquote>
  </li>
  <li>On the taskbar, select the <strong>Windows Terminal</strong> icon again to open a new instance of the application.</li>
  <li>
    <p>When you receive the open command prompt, run the following command to start the <strong>httprepl</strong> tool, setting the base Uniform Resource Identifier (URI) to <code>http://localhost:7071</code>:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock20" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock20" class="mt-0"><code class="language-powershell"> httprepl http://localhost:7071
</code></pre>

    <blockquote>
      <p><strong>Note</strong>: An error message is displayed by the <strong>httprepl</strong> tool. This message occurs because the tool is searching for a Swagger definition file to use to traverse the API. Because your function project doesn’t produce a Swagger definition file, you’ll need to traverse the API manually.</p>
    </blockquote>
  </li>
  <li>
    <p>When you receive the tool prompt, run the following command to browse to the relative <strong>api</strong> directory:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock21" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock21" class="mt-0"><code class="language-powershell"> cd api
</code></pre>
  </li>
  <li>
    <p>Run the following command to browse to the relative <strong>echo</strong> directory:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock22" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock22" class="mt-0"><code class="language-powershell"> cd echo
</code></pre>
  </li>
  <li>
    <p>Run the following command to run the <strong>post</strong> command, sending in an HTTP request body set to a numeric value of <strong>3</strong> by using the <strong>--content</strong> option:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock23" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock23" class="mt-0"><code class="language-powershell"> post --content 3
</code></pre>
  </li>
  <li>
    <p>Run the following command to run the <strong>post</strong> command, sending in an HTTP request body set to a numeric value of <strong>5</strong> by using the <strong>--content</strong> option:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock24" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock24" class="mt-0"><code class="language-powershell"> post --content 5
</code></pre>
  </li>
  <li>
    <p>Run the following command to run the <strong>post</strong> command, sending in an HTTP request body set to a string value of <strong>Hello</strong> by using the <strong>--content</strong> option:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock25" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock25" class="mt-0"><code class="language-powershell"> post --content "Hello"
</code></pre>
  </li>
  <li>
    <p>Run the following command to run the <strong>post</strong> command, sending in an HTTP request body set to a JavaScript Object Notation (JSON) value of <strong>{“msg”: “Successful”}</strong> by using the <strong>--content</strong> option:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock26" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock26" class="mt-0"><code class="language-powershell"> post --content "{"msg": "Successful"}"
</code></pre>
  </li>
  <li>
    <p>Run the following command to exit the <strong>httprepl</strong> application:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock27" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock27" class="mt-0"><code class="language-powershell"> exit
</code></pre>
  </li>
  <li>Close all currently running instances of the <strong>Windows Terminal</strong> application.</li>
</ol>

<h4 id="review-2">Review</h4>

<p>In this exercise, you created a basic function that echoes the content sent through an HTTP POST request.</p>

<h3 id="exercise-4-create-a-function-that-triggers-on-a-schedule">Exercise 4: Create a function that triggers on a schedule</h3>

<h4 id="task-1-create-a-schedule-triggered-function">Task 1: Create a schedule-triggered function</h4>

<ol>
  <li>On the taskbar, select the <strong>Windows Terminal</strong> icon.</li>
  <li>
    <p>Run the following command to change the current directory to the <strong>Allfiles (F):\Allfiles\Labs\02\Starter\func</strong> empty directory:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock28" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock28" class="mt-0"><code class="language-powershell"> cd F:\Allfiles\Labs\02\Starter\func
</code></pre>
  </li>
  <li>
    <p>When you receive the open command prompt, run the following command to use the <strong>Azure Functions Core Tools</strong> to create a new function named <strong>Recurring</strong>, using the <strong>Timer trigger</strong> template:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock29" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock29" class="mt-0"><code class="language-powershell"> func new --template "Timer trigger" --name "Recurring"
</code></pre>

    <blockquote>
      <p><strong>Note</strong>: You can review the documentation to [create a new function][azure-functions-core-tools-new-function] using the <strong>Azure Functions Core Tools</strong>.</p>
    </blockquote>
  </li>
  <li>Close the currently running <strong>Windows Terminal</strong> application.</li>
</ol>

<h4 id="task-2-observe-function-code">Task 2: Observe function code</h4>

<ol>
  <li>On the <strong>Start</strong> screen, select the <strong>Visual Studio Code</strong> tile.</li>
  <li>On the <strong>File</strong> menu, select <strong>Open Folder</strong>.</li>
  <li>In the <strong>File Explorer</strong> window that opens, browse to <strong>Allfiles (F):\Allfiles\Labs\02\Starter\func</strong>, and then select <strong>Select Folder</strong>.</li>
  <li>On the <strong>Explorer</strong> pane of the <strong>Visual Studio Code</strong> window, open the <strong>Recurring.cs</strong> file.</li>
  <li>
    <p>In the code editor, observe the implementation:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock30" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock30" class="mt-0"><code class="language-csharp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Azure.WebJobs;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Azure.WebJobs.Host;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Extensions.Logging;
    
 <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">func</span></span>
 {
     <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Recurring</span></span>
     {
         [<span class="hljs-meta"><span class="hljs-meta">FunctionName(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Recurring"</span></span></span><span class="hljs-meta">)</span></span>]
         <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[TimerTrigger(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"0 */5 * * * *"</span></span></span></span></span><span class="hljs-function">)]TimerInfo myTimer, ILogger log)
         </span></span>{
             log.LogInformation(<span class="hljs-string"><span class="hljs-string">$"C# Timer trigger function executed at: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{DateTime.Now}</span></span></span><span class="hljs-string">"</span></span>);
         }
     }
 }
</code></pre>
  </li>
</ol>

<h4 id="task-3-observe-function-runs">Task 3: Observe function runs</h4>

<ol>
  <li>On the taskbar, select the <strong>Windows Terminal</strong> icon.</li>
  <li>
    <p>Run the following command to change the current directory to the <strong>Allfiles (F):\Allfiles\Labs\02\Starter\func</strong> empty directory:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock31" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock31" class="mt-0"><code class="language-powershell"> cd F:\Allfiles\Labs\02\Starter\func
</code></pre>
  </li>
  <li>
    <p>When you receive the open command prompt, run the following command to run the function app project:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock32" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock32" class="mt-0"><code class="language-powershell"> func start --build
</code></pre>

    <blockquote>
      <p><strong>Note</strong>: You can review the documentation to [start the function app project locally][azure-functions-core-tools-start-function] using the <strong>Azure Functions Core Tools</strong>.</p>
    </blockquote>
  </li>
  <li>Observe the function run that occurs about every five minutes. Each function run should render a simple message to the log.</li>
  <li>Close the currently running <strong>Windows Terminal</strong> application.</li>
</ol>

<h4 id="task-4-update-the-function-integration-configuration">Task 4: Update the function integration configuration</h4>

<ol>
  <li>On the <strong>Start</strong> screen, select the <strong>Visual Studio Code</strong> tile.</li>
  <li>On the <strong>File</strong> menu, select <strong>Open Folder</strong>.</li>
  <li>In the <strong>File Explorer</strong> window that opens, browse to <strong>Allfiles (F):\Allfiles\Labs\02\Starter\func</strong>, and then select <strong>Select Folder</strong>.</li>
  <li>On the <strong>Explorer</strong> pane of the <strong>Visual Studio Code</strong> window, open the <strong>Recurring.cs</strong> file.</li>
  <li>
    <p>In the code editor, observe the existing <strong>Run</strong> method signature:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock33" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock33" class="mt-0"><code class="language-csharp hljs"> [<span class="hljs-meta"><span class="hljs-meta">FunctionName(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Recurring"</span></span></span><span class="hljs-meta">)</span></span>]
 <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[TimerTrigger(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"0 */5 * * * *"</span></span></span></span></span><span class="hljs-function">)]TimerInfo myTimer, ILogger log)
</span></span></code></pre>
  </li>
  <li>
    <p>Update the <strong>Run</strong> method signature code block to change the schedule to run once every <strong>30 seconds</strong>:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock34" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock34" class="mt-0"><code class="language-csharp hljs"> [<span class="hljs-meta"><span class="hljs-meta">FunctionName(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Recurring"</span></span></span><span class="hljs-meta">)</span></span>]
 <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[TimerTrigger(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"*/30 * * * * *"</span></span></span></span></span><span class="hljs-function">)]TimerInfo myTimer, ILogger log)
</span></span></code></pre>
  </li>
  <li>Select <strong>Save</strong> to save your changes to the <strong>Recurring.cs</strong> file.</li>
</ol>

<h4 id="task-5-observe-function-runs">Task 5: Observe function runs</h4>

<ol>
  <li>
    <p>On the taskbar, select the <strong>Windows Terminal</strong> icon.</p>
  </li>
  <li>
    <p>Run the following command to change the current directory to the <strong>Allfiles (F):\Allfiles\Labs\02\Starter\func</strong> empty directory:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock35" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock35" class="mt-0"><code class="language-powershell"> cd F:\Allfiles\Labs\02\Starter\func
</code></pre>
  </li>
  <li>
    <p>When you receive the open command prompt, run the following command to run the function app project:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock36" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock36" class="mt-0"><code class="language-powershell"> func start --build
</code></pre>

    <blockquote>
      <p><strong>Note</strong>: You can review the documentation to [start the function app project locally][azure-functions-core-tools-start-function] using the <strong>Azure Functions Core Tools</strong>.</p>
    </blockquote>
  </li>
  <li>
    <p>Observe the function run that occurs about every 30 seconds. Each function run should render a simple message to the log.</p>
  </li>
  <li>
    <p>Close the currently running <strong>Windows Terminal</strong> application.</p>
  </li>
  <li>
    <p>Close the Visual Studio Code window.</p>
  </li>
</ol>

<h4 id="review-3">Review</h4>

<p>In this exercise, you created a function that runs automatically based on a fixed schedule.</p>

<h3 id="exercise-5-create-a-function-that-integrates-with-other-services">Exercise 5: Create a function that integrates with other services</h3>

<h4 id="task-1-upload-sample-content-to-azure-blob-storage">Task 1: Upload sample content to Azure Blob Storage</h4>

<ol>
  <li>On the Azure portal’s <strong>navigation</strong> pane, select the <strong>Resource groups</strong> link.</li>
  <li>On the <strong>Resource groups</strong> blade, select the <strong>Serverless</strong> resource group that you created previously in this lab.</li>
  <li>On the <strong>Serverless</strong> blade, select the <strong>funcstor</strong><em>[yourname]</em> storage account that you created previously in this lab.</li>
  <li>On the <strong>Storage account</strong> blade, select the <strong>Containers</strong> link in the <strong>Data storage</strong> section.</li>
  <li>In the <strong>Containers</strong> section, select <strong>+ Container</strong>.</li>
  <li>
    <p>In the <strong>New container</strong> pop-up window, perform the following actions, and then select <strong>Create</strong>:</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Name</strong> text box</td>
          <td>Enter <strong>content</strong>.</td>
        </tr>
        <tr>
          <td><strong>Public access level</strong> drop-down list</td>
          <td>Select <strong>Private (no anonymous access)</strong>.</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>Return to the <strong>Containers</strong> section, and then select the recently created <strong>content</strong> container.</li>
  <li>On the <strong>Container</strong> blade, select <strong>Upload</strong>.</li>
  <li>
    <p>In the <strong>Upload blob</strong> window, perform the following actions, and then select <strong>Upload</strong>:</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Files</strong> section</td>
          <td>Select the <strong>Folder</strong> icon.</td>
        </tr>
        <tr>
          <td><strong>File Explorer</strong> window</td>
          <td>Browse to <strong>Allfiles (F):\Allfiles\Labs\02\Starter</strong>, select the <strong>settings.json</strong> file, and then select <strong>Open</strong>.</td>
        </tr>
        <tr>
          <td><strong>Overwrite if files already exist</strong> check box</td>
          <td>Ensure that this check box is selected.</td>
        </tr>
      </tbody>
    </table>

    <blockquote>
      <p><strong>Note</strong>: Wait for the blob to upload before you continue with this lab.</p>
    </blockquote>
  </li>
</ol>

<h4 id="task-2-create-an-http-triggered-function">Task 2: Create an HTTP-triggered function</h4>

<ol>
  <li>On the taskbar, select the <strong>Windows Terminal</strong> icon.</li>
  <li>
    <p>Run the following command to change the current directory to the <strong>Allfiles (F):\Allfiles\Labs\02\Starter\func</strong> empty directory:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock37" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock37" class="mt-0"><code class="language-powershell"> cd F:\Allfiles\Labs\02\Starter\func
</code></pre>
  </li>
  <li>
    <p>When you receive the open command prompt, run the following command to use the <strong>Azure Functions Core Tools</strong> to create a new function named <strong>GetSettingInfo</strong>, using the <strong>HTTP trigger</strong> template:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock38" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock38" class="mt-0"><code class="language-powershell"> func new --template "HTTP trigger" --name "GetSettingInfo"
</code></pre>

    <blockquote>
      <p><strong>Note</strong>: You can review the documentation to [create a new function][azure-functions-core-tools-new-function] using the <strong>Azure Functions Core Tools</strong>.</p>
    </blockquote>
  </li>
  <li>Close the currently running <strong>Windows Terminal</strong> application.</li>
</ol>

<h4 id="task-3-write-http-triggered-and-blob-inputted-function-code">Task 3: Write HTTP-triggered and blob-inputted function code</h4>

<ol>
  <li>On the <strong>Start</strong> screen, select the <strong>Visual Studio Code</strong> tile.</li>
  <li>On the <strong>File</strong> menu, select <strong>Open Folder</strong>.</li>
  <li>In the <strong>File Explorer</strong> window that opens, browse to <strong>Allfiles (F):\Allfiles\Labs\02\Starter\func</strong>, and then select <strong>Select Folder</strong>.</li>
  <li>On the <strong>Explorer</strong> pane of the <strong>Visual Studio Code</strong> window, open the <strong>GetSettingInfo.cs</strong> file.</li>
  <li>
    <p>In the code editor, observe the example implementation:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock39" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock39" class="mt-0"><code class="language-csharp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.IO;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Threading.Tasks;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Mvc;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Azure.WebJobs;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Azure.WebJobs.Extensions.Http;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Http;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Extensions.Logging;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Newtonsoft.Json;
    
 <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">func</span></span>
 {
     <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GetSettingInfo</span></span>
     {
         [<span class="hljs-meta"><span class="hljs-meta">FunctionName(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"GetSettingInfo"</span></span></span><span class="hljs-meta">)</span></span>]
         <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task&lt;IActionResult&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">
             [HttpTrigger(AuthorizationLevel.Function, </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"get"</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"post"</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Route = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">null</span></span></span></span></span><span class="hljs-function">)] HttpRequest req,
             ILogger log)
         </span></span>{
             log.LogInformation(<span class="hljs-string"><span class="hljs-string">"C# HTTP trigger function processed a request."</span></span>);
    
             <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> name = req.Query[<span class="hljs-string"><span class="hljs-string">"name"</span></span>];
    
             <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> requestBody = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StreamReader(req.Body).ReadToEndAsync();
             <span class="hljs-keyword"><span class="hljs-keyword">dynamic</span></span> data = JsonConvert.DeserializeObject(requestBody);
             name = name ?? data?.name;
    
             <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> responseMessage = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(name)
                 ? <span class="hljs-string"><span class="hljs-string">"This HTTP triggered function executed successfully. Pass a name in the query string or in the request body for a personalized response."</span></span>
                 : <span class="hljs-string"><span class="hljs-string">$"Hello, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{name}</span></span></span><span class="hljs-string">. This HTTP triggered function executed successfully."</span></span>;
    
             <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OkObjectResult(responseMessage);
         }
     }
 }
</code></pre>
  </li>
  <li>
    <p>Delete all the content within the <strong>GetSettingInfo.cs</strong> file.</p>
  </li>
  <li>
    <p>Add the following lines of code to add <strong>using directives</strong> for the <strong>Microsoft.AspNetCore.Http</strong>, <strong>Microsoft.AspNetCore.Mvc</strong>, and <strong>Microsoft.Azure.WebJobs</strong> namespaces:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock40" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock40" class="mt-0"><code class="language-csharp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Http;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Mvc;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Azure.WebJobs;
</code></pre>
  </li>
  <li>
    <p>Create a new <strong>public static</strong> class named <strong>GetSettingInfo</strong>:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock41" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock41" class="mt-0"><code class="language-csharp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GetSettingInfo</span></span>
 { }
</code></pre>
  </li>
  <li>
    <p>Observe the <strong>GetSettingInfo.cs</strong> file again, which should now include the following code:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock42" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock42" class="mt-0"><code class="language-csharp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Http;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Mvc;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Azure.WebJobs;

 <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GetSettingInfo</span></span>
 { }
</code></pre>
  </li>
  <li>
    <p>Within the <strong>GetSettingInfo</strong> class, add the following code block to create a new <strong>public static</strong> expression-bodied method named <strong>Run</strong> that returns a variable of type <strong>IActionResult</strong> and that also takes in variables of type <strong>HttpRequest</strong> and <strong>string</strong> as parameters named <em>request</em> and <em>json</em>:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock43" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock43" class="mt-0"><code class="language-csharp hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">
     HttpRequest request,
     </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> json</span></span></span><span class="hljs-function">)
     </span></span>=&gt; <span class="hljs-literal"><span class="hljs-literal">null</span></span>;
</code></pre>

    <blockquote>
      <p><strong>Note</strong>: You are only temporarily setting the return value to <strong>null</strong>.</p>
    </blockquote>
  </li>
  <li>
    <p>Add the following code to append an attribute to the <strong>Run</strong> method of type <strong>FunctionNameAttribute</strong> that has its <strong>name</strong> parameter set to a value of <strong>GetSettingInfo</strong>:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock44" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock44" class="mt-0"><code class="language-csharp hljs"> [<span class="hljs-meta"><span class="hljs-meta">FunctionName(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"GetSettingInfo"</span></span></span><span class="hljs-meta">)</span></span>]
 <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">
     HttpRequest request,
     </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> json</span></span></span><span class="hljs-function">)
     </span></span>=&gt; <span class="hljs-literal"><span class="hljs-literal">null</span></span>;
</code></pre>
  </li>
  <li>
    <p>Add the following code to append an attribute to the <strong>request</strong> parameter of type <strong>HttpTriggerAttribute</strong> that has its <strong>methods</strong> parameter array set to a single value of <strong>GET</strong>:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock45" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock45" class="mt-0"><code class="language-csharp hljs"> [<span class="hljs-meta"><span class="hljs-meta">FunctionName(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"GetSettingInfo"</span></span></span><span class="hljs-meta">)</span></span>]
 <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">
     [HttpTrigger(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"GET"</span></span></span></span></span><span class="hljs-function">)] HttpRequest request,
     </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> json)
     </span></span>=&gt; <span class="hljs-literal"><span class="hljs-literal">null</span></span>;
</code></pre>
  </li>
  <li>
    <p>Add the following code to append an attribute to the <strong>json</strong> parameter of type <strong>BlobAttribute</strong> that has its <strong>blobPath</strong> parameter set to a value of <strong>content/settings.json</strong>:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock46" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock46" class="mt-0"><code class="language-csharp hljs"> [<span class="hljs-meta"><span class="hljs-meta">FunctionName(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"GetSettingInfo"</span></span></span><span class="hljs-meta">)</span></span>]
 <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">
     [HttpTrigger(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"GET"</span></span></span></span></span><span class="hljs-function">)] HttpRequest request,
     [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Blob</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"content/settings.json"</span></span></span></span></span><span class="hljs-function">)] </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> json)
     </span></span>=&gt; <span class="hljs-literal"><span class="hljs-literal">null</span></span>;
</code></pre>
  </li>
  <li>
    <p>Add the following code to update the <strong>Run</strong> expression-bodied method to return a new instance of the <strong>OkObjectResult</strong> class passing in the value of the <strong>json</strong> method parameter as the sole constructor parameter:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock47" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock47" class="mt-0"><code class="language-csharp hljs"> [<span class="hljs-meta"><span class="hljs-meta">FunctionName(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"GetSettingInfo"</span></span></span><span class="hljs-meta">)</span></span>]
 <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">
     [HttpTrigger(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"GET"</span></span></span></span></span><span class="hljs-function">)] HttpRequest request,
     [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Blob</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"content/settings.json"</span></span></span></span></span><span class="hljs-function">)] </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> json)
     </span></span>=&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OkObjectResult(json);
</code></pre>
  </li>
  <li>
    <p>Observe the <strong>GetSettingInfo.cs</strong> file again, which should now include the following code:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">c#</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock48" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock48" class="mt-0"><code class="language-csharp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Http;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Mvc;
 <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Azure.WebJobs;

 <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GetSettingInfo</span></span>
 {
     [<span class="hljs-meta"><span class="hljs-meta">FunctionName(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"GetSettingInfo"</span></span></span><span class="hljs-meta">)</span></span>]
     <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">
         [HttpTrigger(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"GET"</span></span></span></span></span><span class="hljs-function">)] HttpRequest request,
         [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Blob</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"content/settings.json"</span></span></span></span></span><span class="hljs-function">)] </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> json)
         </span></span>=&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OkObjectResult(json);
 }
</code></pre>
  </li>
  <li>Select <strong>Save</strong> to save your changes to the <strong>GetSettingInfo.cs</strong> file.</li>
</ol>

<h4 id="task-4-register-azure-storage-blob-extensions">Task 4: Register Azure Storage Blob extensions</h4>

<ol>
  <li>On the taskbar, select the <strong>Windows Terminal</strong> icon.</li>
  <li>
    <p>Run the following command to change the current directory to the <strong>Allfiles (F):\Allfiles\Labs\02\Starter\func</strong> empty directory:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock49" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock49" class="mt-0"><code class="language-powershell"> cd F:\Allfiles\Labs\02\Starter\func
</code></pre>
  </li>
  <li>
    <p>When you receive the open command prompt, run the following command to register the <a href="https://www.nuget.org/packages/Microsoft.Azure.WebJobs.Extensions.Storage/4.0.4">Microsoft.Azure.WebJobs.Extensions.Storage</a> extension:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock50" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock50" class="mt-0"><code class="language-powershell"> func extensions install --package Microsoft.Azure.WebJobs.Extensions.Storage --version 4.0.4
</code></pre>
  </li>
  <li>
    <p>Run the following command to build the .NET project and to validate the extensions were installed correctly:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock51" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock51" class="mt-0"><code class="language-powershell"> dotnet build
</code></pre>
  </li>
  <li>Close all currently running instances of the <strong>Windows Terminal</strong> application.</li>
</ol>

<h4 id="task-5-test-the-function-by-using-httprepl">Task 5: Test the function by using httprepl</h4>

<ol>
  <li>On the taskbar, select the <strong>Windows Terminal</strong> icon.</li>
  <li>
    <p>Run the following command to change the current directory to the <strong>Allfiles (F):\Allfiles\Labs\02\Starter\func</strong> empty directory:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock52" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock52" class="mt-0"><code class="language-powershell"> cd F:\Allfiles\Labs\02\Starter\func
</code></pre>
  </li>
  <li>
    <p>When you receive the open command prompt, run the following command to run the function app project:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock53" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock53" class="mt-0"><code class="language-powershell"> func start --build
</code></pre>

    <blockquote>
      <p><strong>Note</strong>: You can review the documentation to [start the function app project locally][azure-functions-core-tools-start-function] using the <strong>Azure Functions Core Tools</strong>.</p>
    </blockquote>
  </li>
  <li>On the taskbar, select the <strong>Windows Terminal</strong> icon again to open a new instance of the <strong>Windows Terminal</strong> application.</li>
  <li>
    <p>When you receive the open command prompt, run the following command to start the <strong>httprepl</strong> tool setting the base Uniform Resource Identifier (URI) to <code>http://localhost:7071</code>:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock54" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock54" class="mt-0"><code class="language-powershell"> httprepl http://localhost:7071
</code></pre>

    <blockquote>
      <p><strong>Note</strong>: An error message is displayed by the <strong>httprepl</strong> tool. This message occurs because the tool is searching for a Swagger definition file to use to traverse the API. Because your function project doesn’t produce a Swagger definition file, you’ll need to traverse the API manually.</p>
    </blockquote>
  </li>
  <li>
    <p>When you receive the tool prompt, run the following command to browse to the relative <strong>api</strong> endpoint:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock55" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock55" class="mt-0"><code class="language-powershell"> cd api
</code></pre>
  </li>
  <li>
    <p>Run the following command to browse to the relative <strong>getsettinginfo</strong> endpoint:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock56" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock56" class="mt-0"><code class="language-powershell"> cd getsettinginfo
</code></pre>
  </li>
  <li>
    <p>Run the following command to run the <strong>get</strong> command for the current endpoint:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock57" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock57" class="mt-0"><code class="language-powershell"> get
</code></pre>
  </li>
  <li>
    <p>Observe the JSON content of the response from the function app, which should now include:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock58" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock58" class="mt-0"><code class="language-json hljs"> {
     <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.2.4"</span></span>,
     <span class="hljs-attr"><span class="hljs-attr">"root"</span></span>: <span class="hljs-string"><span class="hljs-string">"/usr/libexec/mews_principal/"</span></span>,
     <span class="hljs-attr"><span class="hljs-attr">"device"</span></span>: {
         <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"21e46d2b2b926cba031a23c6919"</span></span>
     },
     <span class="hljs-attr"><span class="hljs-attr">"notifications"</span></span>: {
         <span class="hljs-attr"><span class="hljs-attr">"email"</span></span>: <span class="hljs-string"><span class="hljs-string">"joseph.price@contoso.com"</span></span>,
         <span class="hljs-attr"><span class="hljs-attr">"phone"</span></span>: <span class="hljs-string"><span class="hljs-string">"(425) 555-0162 x4151"</span></span>
     }
 }
</code></pre>
  </li>
  <li>
    <p>Run the following command to exit the <strong>httprepl</strong> application:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock59" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock59" class="mt-0"><code class="language-powershell"> exit
</code></pre>
  </li>
  <li>Close all currently running instances of the <strong>Windows Terminal</strong> application.</li>
</ol>

<h4 id="review-4">Review</h4>

<p>In this exercise, you created a function that returns the content of a JSON file in Storage.</p>

<h3 id="exercise-6-deploy-a-local-function-project-to-an-azure-functions-app">Exercise 6: Deploy a local function project to an Azure Functions app</h3>

<h4 id="task-1-deploy-using-the-azure-functions-core-tools">Task 1: Deploy using the Azure Functions Core Tools</h4>

<ol>
  <li>On the taskbar, select the <strong>Windows Terminal</strong> icon.</li>
  <li>
    <p>Run the following command to change the current directory to the <strong>Allfiles (F):\Allfiles\Labs\02\Starter\func</strong> empty directory:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock60" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock60" class="mt-0"><code class="language-powershell"> cd F:\Allfiles\Labs\02\Starter\func
</code></pre>
  </li>
  <li>
    <p>When you receive the open command prompt, run the following command to login to the Azure Command-Line Interface (CLI):</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock61" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock61" class="mt-0"><code class="language-powershell"> az login
</code></pre>
  </li>
  <li>In the <strong>Microsoft Edge</strong> browser window, enter the email address and password for your Microsoft account, and then select <strong>Sign in</strong>.</li>
  <li>Return to the currently open <strong>Windows Terminal</strong> window. Wait for the sign-in process to finish.</li>
  <li>
    <p>Run the following command to publish the function app project:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock62" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock62" class="mt-0"><code class="language-powershell"> func azure functionapp publish &lt;function-app-name&gt;
</code></pre>

    <blockquote>
      <p><strong>Note</strong>: For example, if your <strong>Function App name</strong> is <strong>funclogicstudent</strong>, your command would be <code>func azure functionapp publish funclogicstudent</code>. You can review the documentation to [publish the local function app project][azure-functions-core-tools-publish-azure] using the <strong>Azure Functions Core Tools</strong>.</p>
    </blockquote>
  </li>
  <li>Wait for the deployment to finalize before you move forward with the lab.</li>
  <li>Close the currently running <strong>Windows Terminal</strong> application.</li>
</ol>

<h4 id="task-2-validate-deployment">Task 2: Validate deployment</h4>

<ol>
  <li>On the taskbar, select the <strong>Microsoft Edge</strong> icon, and select the tab that contains the Azure portal (<a href="https://portal.azure.com">https://portal.azure.com</a>).</li>
  <li>On the Azure portal’s <strong>navigation</strong> pane, select the <strong>Resource groups</strong> link.</li>
  <li>On the <strong>Resource groups</strong> blade, select the <strong>Serverless</strong> resource group that you created previously in this lab.</li>
  <li>On the <strong>Serverless</strong> blade, select the <strong>funclogic</strong><em>[yourname]</em> function app that you created previously in this lab.</li>
  <li>On the <strong>App Service</strong> blade, select the <strong>Functions</strong> option in the <strong>Functions</strong> section.</li>
  <li>On the <strong>Functions</strong> pane, select the existing <strong>GetSettingInfo</strong> function.</li>
  <li>In the <strong>Function</strong> blade, select the <strong>Code + Test</strong> option in the <strong>Developer</strong> section.</li>
  <li>In the function editor, select <strong>Test/Run</strong>.</li>
  <li>In the popup dialog that appears, perform the following actions: <!--Conan, as there is only sub step here, can we just combine the two as follows: In the popup dialog that appears, in the **HTTP method** list, select **GET**.-->
    <ul>
      <li>In the <strong>HTTP method</strong> list, select <strong>GET</strong>.</li>
    </ul>
  </li>
  <li>Select <strong>Run</strong> to test the function.</li>
  <li>
    <p>Observe the results of the test run. The JSON content should now include the following code:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock63" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock63" class="mt-0"><code class="language-json hljs"> {
     <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.2.4"</span></span>,
     <span class="hljs-attr"><span class="hljs-attr">"root"</span></span>: <span class="hljs-string"><span class="hljs-string">"/usr/libexec/mews_principal/"</span></span>,
     <span class="hljs-attr"><span class="hljs-attr">"device"</span></span>: {
         <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"21e46d2b2b926cba031a23c6919"</span></span>
     },
     <span class="hljs-attr"><span class="hljs-attr">"notifications"</span></span>: {
         <span class="hljs-attr"><span class="hljs-attr">"email"</span></span>: <span class="hljs-string"><span class="hljs-string">"joseph.price@contoso.com"</span></span>,
         <span class="hljs-attr"><span class="hljs-attr">"phone"</span></span>: <span class="hljs-string"><span class="hljs-string">"(425) 555-0162 x4151"</span></span>
     }
 }
</code></pre>
  </li>
</ol>

<h4 id="review-5">Review</h4>

<p>In this exercise, you deployed a local function project to Azure Functions and validated that the functions work in Azure.</p>

<h3 id="exercise-7-clean-up-your-subscription">Exercise 7: Clean up your subscription</h3>

<h4 id="task-1-open-azure-cloud-shell-and-list-resource-groups">Task 1: Open Azure Cloud Shell and list resource groups</h4>

<ol>
  <li>
    <p>In the Azure portal, select the <strong>Cloud Shell</strong> icon <a href="media/az204_lab_CloudShell.png" target="_blank"><img src="media/az204_lab_CloudShell.png" alt="Cloud Shell icon"></a> to open a new Bash session. If Cloud Shell defaults to a PowerShell session, select <strong>PowerShell</strong>, and in the drop-down menu, select <strong>Bash</strong>.</p>

    <blockquote>
      <p><strong>Note</strong>: If this is the first time you’re starting <strong>Cloud Shell</strong>, when prompted to select either <strong>Bash</strong> or <strong>PowerShell</strong>, select <strong>PowerShell</strong>. When you’re presented with the <strong>You have no storage mounted</strong> message, select the subscription you’re using in this lab, and then select <strong>Create storage</strong>.</p>
    </blockquote>
  </li>
</ol>

<h4 id="task-2-delete-a-resource-group">Task 2: Delete a resource group</h4>

<ol>
  <li>
    <p>On the <strong>Cloud Shell</strong> pane, run the following command to delete the <strong>Serverless</strong> resource group:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock64" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock64" class="mt-0"><code class="language-powershell"> az group delete --name Serverless --no-wait --yes
</code></pre>
    <blockquote>
      <p><strong>Note</strong>: The command executes asynchronously (as determined by the <em>–no-wait</em> parameter), so while you’ll be able to run another Azure CLI command immediately afterwards within the same Bash session, it’ll take a few minutes before the resource groups are removed.</p>
    </blockquote>
  </li>
  <li>
    <p>Close the <strong>Cloud Shell</strong> pane in the portal.</p>
  </li>
</ol>

<h4 id="task-3-close-the-active-application">Task 3: Close the active application</h4>

<ul>
  <li>Close the currently running Microsoft Edge application.</li>
</ul>

<h4 id="review-6">Review</h4>

<p>In this exercise, you cleaned up your subscription by removing the resource group that was used in this lab.</p>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/AZ-204-DevelopingSolutionsforMicrosoftAzure" target="_blank" class="ml-2">
                    MicrosoftLearning/AZ-204-DevelopingSolutionsforMicrosoftAzure
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D64f540ac7c8eef33997aaf23b6af9bd5b858530e.js"></script>



</body></html>