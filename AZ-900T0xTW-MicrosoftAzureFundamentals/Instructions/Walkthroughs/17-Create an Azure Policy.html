<!DOCTYPE html><html lang="en"><head>
        <title>
            AZ-900T0xTW-MicrosoftAzureFundamentals
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                AZ-900T0xTW-MicrosoftAzureFundamentals
            </a>
            <a href="https://github.com/MicrosoftLearning/AZ-900T0xTW-MicrosoftAzureFundamentals" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    </ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="17---建立-azure-原則-10-分鐘">17 - 建立 Azure 原則 (10 分鐘)</h1>

<p>在這個逐步解說中，我們將建立 Azure 原則以將 Azure 資源的部署限制到特定位置。</p>

<h1 id="工作-1建立原則指派">工作 1：建立原則指派</h1>

<p>在這個工作中，我們將設定 [允許的位置] 原則並將其指派給我們的訂用帳戶。</p>

<ol>
  <li>
    <p>登入到 <a href="https://portal.azure.com">Azure 入口網站</a>。</p>
  </li>
  <li>
    <p>從 [<strong>所有服務</strong>] 刀鋒視窗，搜尋並㥷 [<strong>原則</strong>]，在 [<strong>製作</strong>] 區段下，按一下 [<strong>定義</strong>]。  請花點時間檢閱內置原則定義的清單。例如，在 [<strong>類別</strong>] 下拉式清單中，僅選取 [<strong>計算</strong>]。注意，[<strong>允許的虛擬機器大小 SKU</strong>] 定義使您能够指定組織可以部署的一組虛擬機器 SKU。</p>
  </li>
  <li>
    <p>返回到 [<strong>原則</strong>] 頁面，在 [<strong>製作</strong>] 區段，按一下 [<strong>指派</strong>]。指派是指已指派在特定範圍內執行的原則。例如，可以將定義指派給訂用帳戶範圍。</p>
  </li>
  <li>
    <p>按一下 [<strong>原則 - 指派</strong>] 頁面頂部的 [<strong>指派原則</strong>]。</p>
  </li>
  <li>
    <p>在 [<strong>指派原則</strong>] 頁面，保留預設範圍。</p>

    <table>
      <thead>
        <tr>
          <th>設定</th>
          <th>值</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>範圍</td>
          <td><strong>使用選定的預設值</strong></td>
        </tr>
        <tr>
          <td>原則定義</td>
          <td>按一下省略號，然後搜尋 [<strong>允許的位置</strong>]，然後<strong>選取</strong></td>
        </tr>
        <tr>
          <td>指派名稱</td>
          <td><strong>允許的位置</strong></td>
        </tr>
      </tbody>
    </table>

    <p><a href="../images/1402.png" target="_blank"><img src="../images/1402.png" alt="填寫欄位值並醒目提示 [選取] 按鈕的 [範圍] 窗格的螢幕擷取畫面。 "></a></p>
  </li>
  <li>
    <p>在 [<strong>參數</strong>] 索引標籤上，選取 [<strong>日本西部</strong>]。按一下 [<strong>檢閱 + 建立</strong>]，然後按一下 [<strong>建立</strong>]。</p>

    <p><strong>注意</strong>：範圍確定原則指派套用到哪些資源或資源群組。在本例中，我們可以將此原則指派給特定的資源群組，但是我們選擇在訂用帳戶級別指派原則。請注意，可以根據範圍設定排除資源。排除是選用的。</p>

    <p><strong>注意</strong>：該 [<strong>允許的位置</strong>] 原則定義將指定所有資源必須部署到的位置。如果選擇了其他位置，則不允許部署。若需詳細資訊，請檢視 <a href="https://docs.microsoft.com/zh-tw/azure/governance/policy/samples/index">Azure 原則範例</a>頁面。</p>

    <p><a href="../images/1403.png" target="_blank"><img src="../images/1403.png" alt="[可用定義] 窗格的螢幕擷取畫面，其中醒目提示了各個欄位，並選取了 [稽核不使用受管理磁碟的 VM] 選項。"></a></p>
  </li>
  <li>
    <p>[<strong>允許的位置</strong>] 原則指派現在列在 [<strong>原則 - 指派</strong>] 窗格上，並且它現在已經就位，在我們指定的範圍級別 (訂用帳戶級別) 強制執行原則。</p>
  </li>
</ol>

<h1 id="工作-2測試-允許的位置-原則">工作 2：測試 [允許的位置] 原則</h1>

<p>在這個工作中，我們將測試 [允許的位置] 原則。</p>

<ol>
  <li>
    <p>在 Azure 入口網站的 [<strong>所有服務</strong>] 刀鋒視窗，搜尋並選取 [<strong>儲存體帳戶</strong>]，然後按一下 [<strong>+ 建立</strong>]。</p>
  </li>
  <li>
    <p>設定儲存體帳戶 (將儲存體帳戶名稱中的 <strong>xxxx</strong> 替換為字母和數位，以便名稱具有全域唯一性)。其他內容都保留預設值。</p>

    <table>
      <thead>
        <tr>
          <th>設定</th>
          <th>值</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>訂用帳戶</td>
          <td><strong>使用提供的預設值</strong></td>
        </tr>
        <tr>
          <td>資源群組</td>
          <td><strong>myRGPolicy</strong> (新增)</td>
        </tr>
        <tr>
          <td>儲存體帳戶名稱</td>
          <td><strong>storageaccountxxxx</strong></td>
        </tr>
        <tr>
          <td>位置</td>
          <td><strong>美國東部</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>按一下 [<strong>檢閱 + 建立</strong>]，然後按一下 [<strong>建立</strong>]。</p>
  </li>
  <li>
    <p>您將收到<strong>部署失敗</strong>錯誤，說明原則不允許使用資源，包括 [<strong>允許的位置</strong>] 原則名稱。</p>
  </li>
</ol>

<h1 id="工作-3刪除原則指派">工作 3：刪除原則指派</h1>

<p>在這個工作中，我們將刪除 [允許的位置] 原則指派並進行測試。</p>

<p>我們將删除原則指派，以確保我們在未來想完成的工作中不會遭到封鎖。</p>

<ol>
  <li>
    <p>從 [<strong>所有服務</strong>] 刀鋒視窗，搜尋並選取 [<strong>原則</strong>]，然後按一下 [<strong>允許的位置</strong>] 原則。</p>

    <p><strong>注意</strong>：在 [<strong>原則</strong>] 刀鋒視窗，您可以檢視已指派的各種原則的合規性狀態。</p>

    <p><strong>注意</strong>：[允許的位置] 原則可能顯示不符合的資源。如果是，則這些是在原則指派之前建立的資源。</p>
  </li>
  <li>
    <p>按一下 [<strong>允許的位置</strong>]，這會開啟 [允許的位置原則合規性] 視窗。</p>
  </li>
  <li>
    <p>按一下頂部功能表的 [<strong>刪除指派</strong>]。按一下 [<strong>是</strong>] 確認要删除策略指派</p>

    <p><a href="../images/1407.png" target="_blank"><img src="../images/1407.png" alt="[删除指派] 功能表項目的螢幕擷取畫面。"></a></p>
  </li>
  <li>
    <p>嘗試建立另一個儲存體帳戶以確保原則不再有效。</p>

    <p><strong>注意</strong>：[<strong>允許的位置</strong>] 原則可能有用的常見場景包括：</p>
    <ul>
      <li><em>成本跟蹤</em>：您可以為不同的區域位置提供不同的訂用帳戶。該原則將確保所有資源都部署在預期區域，以協助跟踪成本。</li>
      <li><em>資料駐落地和安全性與合規性</em>：您還可以具有資料落地需求，並為每個客戶或特定工作負載建立訂用帳戶，並定義必須在特定資料中心部署所有資源，以確保符合資料和安全性需求。</li>
    </ul>
  </li>
</ol>

<p>恭喜！您已建立 Azure 原則以限制將 Azure 資源部署到特定資料中心。</p>

<p><strong>注意</strong>：為了避免額外的成本，您可以删除此資源群組。搜尋資源群組，按一下您的資源群組，然後按一下 [<strong>删除資源群組</strong>]。驗證資源群組的名稱，然後按一下 [<strong>删除</strong>]。監視 [<strong>通知</strong>] 以驗證删除的狀態。</p>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/AZ-900T0xTW-MicrosoftAzureFundamentals" target="_blank" class="ml-2">
                    MicrosoftLearning/AZ-900T0xTW-MicrosoftAzureFundamentals
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D.js"></script>



</body></html>