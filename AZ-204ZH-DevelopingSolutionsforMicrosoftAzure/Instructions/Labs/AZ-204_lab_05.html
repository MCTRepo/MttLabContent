<!DOCTYPE html><html lang="en"><head>
        <title>
            AZ-204ZH-DevelopingSolutionsforMicrosoftAzure
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                AZ-204ZH-DevelopingSolutionsforMicrosoftAzure
            </a>
            <a href="https://github.com/MicrosoftLearning/AZ-204ZH-DevelopingSolutionsforMicrosoftAzure" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="#准备工作">准备工作</a></li><li class="nav-item"><a class="nav-link" href="#练习-1使用-azure-命令行接口-cli-创建-vm">练习 1：使用 Azure 命令行接口 (CLI) 创建 VM</a></li><li class="nav-item"><a class="nav-link" href="#练习-2创建-docker-容器映像并将其部署到-azure-容器注册表">练习 2：创建 Docker 容器映像并将其部署到 Azure 容器注册表</a></li><li class="nav-item"><a class="nav-link" href="#练习-3部署-azure-容器实例">练习 3：部署 Azure 容器实例</a></li><li class="nav-item"><a class="nav-link" href="#练习-4清理订阅">练习 4：清理订阅</a></li></ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="实验室-05使用映像和容器部署计算工作负载">实验室 05：使用映像和容器部署计算工作负载</h1>

<h2 id="microsoft-azure-用户界面">Microsoft Azure 用户界面</h2>

<p>鉴于 Microsoft 云工具的动态特性，Azure UI 在此培训内容开发后可能会发生更改。这些更改可能会导致实验室说明和实验室步骤不匹配。</p>

<p>当社区要求我们进行更改时，Microsoft 将更新此培训课程。但是，由于云更新频繁发生，因此在此培训内容更新之前，你可能会遇到 UI 更改情况。<strong>如果发生这种情况，请适应这些更改，并根据需要在实验室中熟悉这些更改。</strong></p>

<h2 id="说明">说明</h2>

<h3 id="准备工作">准备工作</h3>

<h4 id="登录到实验室虚拟机">登录到实验室虚拟机</h4>

<p>使用以下凭据登录到 Windows 10 虚拟机 (VM)：</p>

<ul>
  <li>
    <p>用户名： <strong>Admin</strong></p>
  </li>
  <li>
    <p>密码： <strong>Pa55w.rd</strong></p>
  </li>
</ul>

<blockquote>
  <p><strong>备注</strong>：你的讲师将提供连接到虚拟实验室环境的说明。</p>
</blockquote>

<h4 id="查看已安装的应用程序">查看已安装的应用程序</h4>

<p>在你的 Windows 10 桌面上找到任务栏。任务栏里有本实验室中你将使用的应用程序的图标：</p>

<ul>
  <li>
    <p>Microsoft Edge</p>
  </li>
  <li>
    <p>文件资源管理器</p>
  </li>
</ul>

<h3 id="练习-1使用-azure-命令行接口-cli-创建-vm">练习 1：使用 Azure 命令行接口 (CLI) 创建 VM</h3>

<h4 id="任务-1打开-azure-门户">任务 1：打开 Azure 门户</h4>

<ol>
  <li>
    <p>在任务栏上，选择 <strong>“Microsoft Edge”</strong> 图标。</p>
  </li>
  <li>
    <p>在打开的浏览器窗口中，转到 Azure 门户 (<a href="https://portal.azure.com">https://portal.azure.com</a>)。</p>
  </li>
  <li>
    <p>输入你的 Microsoft 帐户的电子邮件地址，然后选择 <strong>“下一步”</strong>。</p>
  </li>
  <li>
    <p>输入 Microsoft 帐户的密码，然后选择 <strong>“登录”</strong>。</p>

    <blockquote>
      <p><strong>备注</strong>：你第一次登录 Azure 门户时会为你提供门户导览。选择 <strong>“开始使用”</strong>，开始使用门户。</p>
    </blockquote>
  </li>
</ol>

<h4 id="任务-2创建资源组">任务 2：创建资源组</h4>

<ol>
  <li>
    <p>在 Azure 门户的“导航”窗格中，选择 <strong>“创建资源”</strong> 链接。</p>

    <blockquote>
      <p><strong>备注</strong>：如果你找不到 <strong>“创建资源”</strong> 链接的话，门户中的加号 (+) 就是 <strong>“创建资源”</strong> 的图标。</p>
    </blockquote>
  </li>
  <li>
    <p>在 <strong>“创建资源”</strong> 边栏选项卡上，找到 <strong>“搜索服务和市场”</strong> 文本框。</p>
  </li>
  <li>
    <p>在搜索框中，输入文本 <strong>“资源组”</strong>，然后按 Enter。</p>
  </li>
  <li>
    <p>在 <strong>“市场”</strong> 搜索结果边栏选项卡中，选择 <strong>“资源组”</strong> 结果。</p>
  </li>
  <li>
    <p>在 <strong>“资源组”</strong> 边栏选项卡中，选择 <strong>“创建”</strong>。</p>
  </li>
  <li>
    <p>在附加 <strong>“资源组”</strong> 边栏选项卡中，找到边栏选项卡的选项卡，如 <strong>“基本”</strong>。</p>

    <blockquote>
      <p><strong>备注</strong>：每个选项卡代表工作流中创建新资源组的一个步骤。你可以随时选择 <strong>“查看 + 创建”</strong> 跳过其余选项卡。</p>
    </blockquote>
  </li>
  <li>
    <p>在 <strong>“基本信息”</strong> 选项卡中，执行以下操作：</p>

    <ol>
      <li>
        <p>将 <strong>“订阅”</strong> 文本框保留设置为默认值。</p>
      </li>
      <li>
        <p>在 <strong>“资源组”</strong> 文本框中，输入值 <strong>“ContainerCompute”</strong>。</p>
      </li>
      <li>
        <p>在 <strong>“区域”</strong> 下拉列表中，选择 <strong>“（美国）美国东部”</strong> 位置。</p>
      </li>
      <li>
        <p>选择 <strong>“查看 + 创建”</strong>。</p>
      </li>
    </ol>
  </li>
  <li>
    <p>在 <strong>“查看 + 创建”</strong> 选项卡中，查看在先前步骤中选择的选项。</p>
  </li>
  <li>
    <p>选择 <strong>“创建”</strong> 以使用指定的配置创建资源组。</p>

    <blockquote>
      <p><strong>备注</strong>： 等待创建任务完成后再继续本实验室。</p>
    </blockquote>
  </li>
</ol>

<h4 id="任务-3打开-azure-cloud-shell">任务 3：打开 Azure Cloud Shell</h4>

<ol>
  <li>
    <p>在 Azure 门户中，选择 <strong>“Cloud Shell”</strong> 图标以打开一个新的 shell 实例。</p>

    <blockquote>
      <p><strong>备注</strong>： <strong>“Cloud Shell”</strong> 图标使用大于符号 () 和下划线字符 (_) 表示。</p>
    </blockquote>
  </li>
  <li>
    <p>如果这是你第一次使用订阅打开 Cloud Shell，则可以使用 <strong>“欢迎使用 Azure Cloud Shell 向导”</strong> 来配置 Cloud Shell，以便首次使用。在向导中执行以下操作：</p>

    <ol>
      <li>对话框提示你配置 shell。选择 <strong>“Bash”</strong>，查看选定的订阅，然后选择 <strong>“创建存储”</strong>。</li>
    </ol>

    <blockquote>
      <p><strong>备注</strong>：等待 Cloud Shell 完成首次设置过程后，再继续本实验室。如果 <strong>Cloud Shell</strong> 配置选项未显示，很可能是因为你使用的是本课程实验室中的现有订阅。实验是假设你使用的是新订阅的情况下编写的。</p>
    </blockquote>
  </li>
  <li>
    <p>在门户的 <strong>“Cloud Shell”</strong> 命令提示符处，输入以下命令然后按 Enter，以查看 Azure CLI 工具的版本：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock0" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock0" class="mt-0"><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">az</span></span> --version
</code></pre>
  </li>
</ol>

<h4 id="任务-4使用-azure-cli-命令">任务 4：使用 Azure CLI 命令</h4>

<ol>
  <li>
    <p>输入以下命令并按 Enter 以获取 CLI 根级别的子组和命令列表：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock1" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock1" class="mt-0"><code class="hljs bash">az --<span class="hljs-built_in"><span class="hljs-built_in">help</span></span>
</code></pre>
  </li>
  <li>
    <p>输入以下命令，然后选择 Enter，以获取 Azure 虚拟机的子组和命令列表：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock2" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock2" class="mt-0"><code class="hljs bash">az vm --<span class="hljs-built_in"><span class="hljs-built_in">help</span></span>
</code></pre>
  </li>
  <li>
    <p>输入以下命令然后按 Enter，以查看 <strong>“创建虚拟机”</strong> 命令的参数和示例列表：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock3" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock3" class="mt-0"><code class="hljs sql">az vm <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-comment"><span class="hljs-comment">--help</span></span>
</code></pre>
  </li>
  <li>
    <p>输入以下命令然后按 Enter，以使用以下设置创建新的<strong>虚拟机</strong>：</p>

    <ul>
      <li>
        <p>资源组： <strong>ContainerCompute</strong></p>
      </li>
      <li>
        <p>名称： <strong>quickvm</strong></p>
      </li>
      <li>
        <p>映像： <strong>Debian</strong></p>
      </li>
      <li>
        <p>用户名： <strong>Student</strong></p>
      </li>
      <li>
        <p>密码： <strong>StudentPa55w.rd</strong></p>
      </li>
    </ul>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock4" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock4" class="mt-0"><code class="hljs sql">az vm <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-comment"><span class="hljs-comment">--resource-group ContainerCompute --name quickvm --image Debian --admin-username student --admin-password StudentPa55w.rd</span></span>
</code></pre>

    <blockquote>
      <p><strong>备注</strong>： 请等待 VM 创建过程完成。该过程完成后，命令将返回一个包含计算机相关详细信息的 JSON 文件。</p>
    </blockquote>
  </li>
  <li>
    <p>输入以下命令然后按 Enter，以获取更详细的 JavaScript 对象表示法 (JSON) 文件，其中包含有关新创建的 VM 的各种元数据：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock5" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock5" class="mt-0"><code class="hljs sql">az vm <span class="hljs-keyword"><span class="hljs-keyword">show</span></span> <span class="hljs-comment"><span class="hljs-comment">--resource-group ContainerCompute --name quickvm</span></span>
</code></pre>
  </li>
  <li>
    <p>输入以下命令然后按 Enter，以列出与 VM 关联的所有 IP 地址：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock6" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock6" class="mt-0"><code class="hljs cpp">az vm <span class="hljs-built_in"><span class="hljs-built_in">list</span></span>-ip-addresses --resource-group ContainerCompute --name quickvm
</code></pre>
  </li>
  <li>
    <p>输入以下命令，然后按 Enter 以筛选输出，以便只返回第一个 IP 地址值：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock7" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock7" class="mt-0"><code class="hljs cs">az vm list-ip-addresses --resource-<span class="hljs-keyword"><span class="hljs-keyword">group</span></span> ContainerCompute --name quickvm --query <span class="hljs-string"><span class="hljs-string">'[].{ip:virtualMachine.network.publicIpAddresses[0].ipAddress}'</span></span> --output tsv
</code></pre>
  </li>
  <li>
    <p>输入以下命令然后按 Enter，以将上一个命令的结果存储在名为 <em>ipAddress</em> 的新 Bash Shell 变量中：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock8" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock8" class="mt-0"><code class="hljs ini"><span class="hljs-attr"><span class="hljs-attr">ipAddress</span></span>=$(az vm list-ip-addresses --resource-group ContainerCompute --name quickvm --query <span class="hljs-string"><span class="hljs-string">'[].{ip:virtualMachine.network.publicIpAddresses[0].ipAddress}'</span></span> --output tsv)
</code></pre>
  </li>
  <li>
    <p>输入以下命令然后按 Enter，以呈现 Bash Shell 变量 <em>ipAddress</em> 的值：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock9" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock9" class="mt-0"><code class="hljs bash"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">$ipAddress</span></span>
</code></pre>
  </li>
  <li>
    <p>输入以下命令然后按 Enter，以通过使用 Secure Shell (SSH) 工具和存储在 Bash Shell 变量 <em>ipAddress</em> 中的 IP 地址连接到之前在本实验室中创建的 VM：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock10" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock10" class="mt-0"><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">ssh</span></span> student@<span class="hljs-variable"><span class="hljs-variable">$ipAddress</span></span>
</code></pre>
  </li>
  <li>
    <p>SSH 工具首先将通知你无法建立主机的真实性，然后询问是否要继续连接。输入 <strong>yes</strong> 然后按 Enter，以继续连接到 VM。</p>
  </li>
  <li>
    <p>然后 SSH 工具会要求你输入密码。输入 <strong>“StudentPa55w.rd”</strong>，然后选择“Enter”对 VM 进行身份验证。</p>
  </li>
  <li>
    <p>使用 SSH 连接到 VM 后，输入以下命令然后按 Enter，以获取描述 Linux VM 的元数据：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock11" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock11" class="mt-0"><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">uname</span></span> -a
</code></pre>
  </li>
  <li>
    <p>使用<strong>出口</strong>命令结束 SSH 会话：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock12" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock12" class="mt-0"><code class="hljs bash"><span class="hljs-built_in"><span class="hljs-built_in">exit</span></span>
</code></pre>
  </li>
  <li>
    <p>关闭门户中的 Cloud Shell 窗格。</p>
  </li>
</ol>

<h4 id="回顾">回顾</h4>

<p>在本练习中，你使用了 Cloud Shell 作为自动脚本的一部分创建 VM。</p>

<h3 id="练习-2创建-docker-容器映像并将其部署到-azure-容器注册表">练习 2：创建 Docker 容器映像并将其部署到 Azure 容器注册表</h3>

<h4 id="任务-1打开-cloud-shell-和编辑器">任务 1：打开 Cloud Shell 和编辑器</h4>

<ol>
  <li>
    <p>在 Azure 门户的“导航”窗格中，选择 <strong>“Cloud Shell”</strong> 图标以打开一个新的 shell 实例。</p>

    <blockquote>
      <p><strong>备注</strong>： 等待 Cloud Shell 完成连接到实例，再继续进行本实验室。</p>
    </blockquote>
  </li>
  <li>
    <p>在门户中的 <strong>“Cloud Shell”</strong> 命令提示符中，输入以下命令然后按 Enter，以从根目录移动到 <strong>~/clouddrive</strong> 目录：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock13" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock13" class="mt-0"><code class="hljs bash"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/clouddrive
</code></pre>
  </li>
  <li>
    <p>输入以下命令并按 Enter 键，以在 <strong>~/clouddrive</strong> 目录中创建名为 <strong>ipcheck</strong> 的新目录：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock14" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock14" class="mt-0"><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">mkdir</span></span> ipcheck
</code></pre>
  </li>
  <li>
    <p>输入以下命令然后按 Enter，以将活动目录从 <strong>~/clouddrive</strong> 更改为 <strong>~/clouddrive/ipcheck</strong>：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock15" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock15" class="mt-0"><code class="hljs bash"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/clouddrive/ipcheck
</code></pre>
  </li>
  <li>
    <p>输入以下命令然后按 Enter，以在当前目录中创建新的 .NET 控制台应用程序：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock16" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock16" class="mt-0"><code class="hljs coffeescript">dotnet <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span> --output . --name ipcheck
</code></pre>
  </li>
  <li>
    <p>输入以下命令然后按 Enter，以在名为 <strong>Dockerfile</strong> 的 <strong>~/clouddrive/ipcheck</strong> 目录中创建一个新文件：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock17" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock17" class="mt-0"><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">touch</span></span> Dockerfile
</code></pre>
  </li>
  <li>
    <p>输入以下命令并按 Enter 以在当前目录打开嵌入式图形编辑器：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock18" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock18" class="mt-0"><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">code</span></span> .
</code></pre>
  </li>
</ol>

<h4 id="任务-2创建并测试-net-应用程序">任务 2：创建并测试 .NET 应用程序</h4>

<ol>
  <li>
    <p>在图形编辑器中，找到“文件”窗格，然后打开 <strong>“Program.cs”</strong> 文件，以在编辑器中打开该文件。</p>
  </li>
  <li>
    <p>删除 <strong>“Program.cs”</strong> 文件的全部内容。</p>
  </li>
  <li>
    <p>将以下代码复制并粘贴到 <strong>“Program.cs”</strong> 文件中：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock19" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock19" class="mt-0"><code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span>
{
    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)
    </span></span>{        
        <span class="hljs-comment"><span class="hljs-comment">// Check if network is available</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (System.Net.NetworkInformation.NetworkInterface.GetIsNetworkAvailable())
        {
            System.Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"Current IP Addresses:"</span></span>);

            <span class="hljs-comment"><span class="hljs-comment">// Get host entry for current hostname</span></span>
            <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> hostname = System.Net.Dns.GetHostName();
            System.Net.IPHostEntry host = System.Net.Dns.GetHostEntry(hostname);
                
            <span class="hljs-comment"><span class="hljs-comment">// Iterate over each IP address and render their values</span></span>
            <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>(System.Net.IPAddress address <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> host.AddressList)
            {
                System.Console.WriteLine(<span class="hljs-string"><span class="hljs-string">$"\t</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{address}</span></span></span><span class="hljs-string">"</span></span>);
            }
        }
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
        {
            System.Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"No Network Connection"</span></span>);
        }
    }
}
</code></pre>
  </li>
  <li>
    <p>使用图形编辑器中的菜单或 Ctrl+S 键盘快捷键保存 <strong>Program.cs</strong> 文件。  不要关闭图形编辑器。</p>
  </li>
  <li>
    <p>返回命令提示符，输入以下命令然后按 Enter，以运行应用程序：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock20" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock20" class="mt-0"><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">dotnet</span></span> run
</code></pre>
  </li>
  <li>
    <p>查找运行结果。应该为 Cloud Shell 实例列出至少一个 IP 地址。</p>
  </li>
  <li>
    <p>在图形编辑器中，找到编辑器上的“文件”窗格，然后在编辑器中打开 <strong>“Dockerfile”</strong> 文件。</p>
  </li>
  <li>
    <p>将以下代码复制并粘贴到 <strong>“Dockerfile”</strong> 文件中：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock21" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock21" class="mt-0"><code class="hljs shell"><span class="hljs-meta"><span class="hljs-meta">#</span></span><span class="bash"><span class="bash"> Start using the .NET Core 3.1 SDK container image</span></span>
FROM mcr.microsoft.com/dotnet/sdk:3.1-alpine AS build
<span class="hljs-meta"><span class="hljs-meta">
#</span></span><span class="bash"><span class="bash"> Change current working directory</span></span>
WORKDIR /app
<span class="hljs-meta"><span class="hljs-meta">
#</span></span><span class="bash"><span class="bash"> Copy existing files from host machine</span></span>
COPY . ./
<span class="hljs-meta"><span class="hljs-meta">
#</span></span><span class="bash"><span class="bash"> Publish application to the </span><span class="hljs-string"><span class="bash"><span class="hljs-string">"out"</span></span></span><span class="bash"> folder</span></span>
RUN dotnet publish --configuration Release --output out
<span class="hljs-meta"><span class="hljs-meta">
#</span></span><span class="bash"><span class="bash"> Start container by running application DLL</span></span>
ENTRYPOINT ["dotnet", "out/ipcheck.dll"]
</code></pre>
  </li>
  <li>
    <p>使用图形编辑器中的菜单或 Ctrl+S 键盘快捷键保存 <strong>Dockerfile</strong> 文件。</p>
  </li>
  <li>
    <p>关闭门户中的 Cloud Shell 窗格。</p>
  </li>
</ol>

<h4 id="任务-3创建-azure-容器注册表资源">任务 3：创建 Azure 容器注册表资源</h4>

<ol>
  <li>
    <p>在 Azure 门户的“导航”窗格中，选择 <strong>“创建资源”</strong> 链接。</p>
  </li>
  <li>
    <p>在 <strong>“创建资源”</strong> 边栏选项卡上，找到 <strong>“搜索服务和市场”</strong> 文本框。</p>
  </li>
  <li>
    <p>在搜索框中，输入 <strong>Container Registry</strong>，然后按 Enter。</p>
  </li>
  <li>
    <p>在 <strong>“市场”</strong> 搜索结果边栏选项卡中，选择 <strong>“容器注册表”</strong> 结果。</p>
  </li>
  <li>
    <p>在 <strong>“容器注册表”</strong> 边栏选项卡中，选择 <strong>“创建”</strong>。</p>
  </li>
  <li>
    <p>在 <strong>“创建容器注册表”</strong> 边栏选项卡中，执行以下操作：</p>

    <ol>
      <li>
        <p>在 <strong>“注册表名称”</strong> 文本框中，为注册表提供全局唯一名称。</p>

        <blockquote>
          <p><strong>备注</strong>：边栏选项卡将自动检查名称的唯一性，并在需要选择其他名称时通知你。</p>
        </blockquote>
      </li>
      <li>
        <p>将 <strong>“订阅”</strong> 文本框保留设置为默认值。</p>
      </li>
      <li>
        <p>在 <strong>“资源组”</strong> 下拉列表中，选择现有的 <strong>ContainerCompute</strong> 选项。</p>
      </li>
      <li>
        <p>在 <strong>“位置”</strong> 文本框中，选择 <strong>“美国东部”</strong>。</p>
      </li>
      <li>
        <p>在 <strong>“SKU”</strong> 下拉列表中，选择 <strong>“基本设置”</strong>。</p>
      </li>
      <li>
        <p>选择“<strong>查看 + 创建</strong>”。</p>
      </li>
    </ol>
  </li>
  <li>
    <p>在“<strong>查看 + 创建</strong>”选项卡中，查看你在先前步骤中选择的选项。</p>
  </li>
  <li>
    <p>选择“<strong>创建</strong>”以使用指定配置创建容器注册表。</p>

    <blockquote>
      <p><strong>备注</strong>：等待创建任务完成后再继续本实验室。</p>
    </blockquote>
  </li>
</ol>

<h4 id="任务-4打开-azure-cloud-shell-并存储容器注册表元数据">任务 4：打开 Azure Cloud Shell 并存储容器注册表元数据</h4>

<ol>
  <li>
    <p>在 Azure 门户中，选择 <strong>“Cloud Shell”</strong> 图标以打开一个新的 shell 实例。</p>

    <blockquote>
      <p><strong>备注</strong>： 等待 Cloud Shell 完成连接到实例，再继续进行本实验室。</p>
    </blockquote>
  </li>
  <li>
    <p>在门户的 <strong>Cloud Shell</strong> 命令提示符中，输入以下命令，然后按 Enter 键以查看订阅中的所有容器注册表列表：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock22" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock22" class="mt-0"><code class="hljs cpp">az acr <span class="hljs-built_in"><span class="hljs-built_in">list</span></span>
</code></pre>
  </li>
  <li>
    <p>输入以下命令然后按 Enter：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock23" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock23" class="mt-0"><code class="hljs cpp">az acr <span class="hljs-built_in"><span class="hljs-built_in">list</span></span> --query <span class="hljs-string"><span class="hljs-string">"max_by([], &amp;creationDate).name"</span></span> --output tsv
</code></pre>
  </li>
  <li>
    <p>输入以下命令然后按 Enter：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock24" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock24" class="mt-0"><code class="hljs ini"><span class="hljs-attr"><span class="hljs-attr">acrName</span></span>=$(az acr list --query <span class="hljs-string"><span class="hljs-string">"max_by([], &amp;creationDate).name"</span></span> --output tsv)
</code></pre>
  </li>
  <li>
    <p>输入以下命令然后按 Enter：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock25" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock25" class="mt-0"><code class="hljs bash"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">$acrName</span></span>
</code></pre>
  </li>
</ol>

<h4 id="任务-5将-docker-容器映像部署到容器注册表">任务 5：将 Docker 容器映像部署到容器注册表</h4>

<ol>
  <li>
    <p>输入以下命令然后按 Enter，以将活动目录从 <strong>~/</strong> 更改为 <strong>~/clouddrive/ipcheck</strong>：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock26" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock26" class="mt-0"><code class="hljs bash"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/clouddrive/ipcheck
</code></pre>
  </li>
  <li>
    <p>输入以下命令然后按 Enter，获取当前目录的内容：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock27" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock27" class="mt-0"><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">dir</span></span>
</code></pre>
  </li>
  <li>
    <p>输入以下命令并按 Enter 以将源代码上传到容器注册表并将容器映像构建为容器注册表任务：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock28" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock28" class="mt-0"><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">az</span></span> acr build --registry <span class="hljs-variable"><span class="hljs-variable">$acrName</span></span> --image ipcheck:latest .
</code></pre>

    <blockquote>
      <p><strong>备注</strong>： 等待生成任务完成后再继续本实验室。</p>
    </blockquote>
  </li>
  <li>
    <p>关闭门户中的 Cloud Shell 窗格。</p>
  </li>
</ol>

<h4 id="任务-6在容器注册表中验证容器映像">任务 6：在容器注册表中验证容器映像</h4>

<ol>
  <li>
    <p>在 Azure 门户的“导航”窗格中，选择 <strong>“资源组”</strong> 链接。</p>
  </li>
  <li>
    <p>在 <strong>“资源组”</strong> 边栏选项卡中，找到并选择你之前在本实验室中创建的 <strong>“ContainerCompute”</strong> 资源组。</p>
  </li>
  <li>
    <p>在 <strong>“ContainerCompute”</strong> 边栏选项卡中，选择你之前在本实验室中创建的容器注册表。</p>
  </li>
  <li>
    <p>在 <strong>“容器注册表”</strong> 边栏选项卡中，找到 <strong>“服务”</strong> 部分并选择 <strong>“存储库”</strong> 链接。</p>
  </li>
  <li>
    <p>在 <strong>“存储库”</strong> 部分，选择 <strong>“ipcheck”</strong> 容器映像存储库。</p>
  </li>
  <li>
    <p>在 <strong>“存储库”</strong> 边栏选项卡中，选择 <strong>“最新”</strong> 标记。</p>
  </li>
  <li>
    <p>查找具有 <strong>“最新”</strong> 标记的容器映像版本的元数据。</p>

    <blockquote>
      <p><strong>备注</strong>：你也可以选择 <strong>“运行 ID”</strong> 链接以查看有关生成任务的元数据。</p>
    </blockquote>
  </li>
</ol>

<h4 id="回顾-1">回顾</h4>

<p>在本练习中，你创建了一个 .NET 控制台应用程序来显示计算机的当前 IP 地址。然后，你将 <strong>Dockerfile</strong> 文件添加到应用程序，以便将其转换为 Docker 容器映像。最后，你将容器映像部署到容器注册表。</p>

<h3 id="练习-3部署-azure-容器实例">练习 3：部署 Azure 容器实例</h3>

<h4 id="任务-1在容器注册表中启用管理员用户">任务 1：在容器注册表中启用管理员用户</h4>

<ol>
  <li>
    <p>在 Azure 门户的“导航”窗格中，选择 <strong>“资源组”</strong> 链接。</p>
  </li>
  <li>
    <p>在 <strong>“资源组”</strong> 边栏选项卡中，找到并选择你之前在本实验室中创建的 <strong>“ContainerCompute”</strong> 资源组。</p>
  </li>
  <li>
    <p>在 <strong>“ContainerCompute”</strong> 边栏选项卡中，选择你之前在本实验室中创建的容器注册表。</p>
  </li>
  <li>
    <p>在 <strong>“容器注册表”</strong> 边栏选项卡中，选择 <strong>“更新”</strong>。</p>
  </li>
  <li>
    <p>在 <strong>“更新容器注册表”</strong> 边栏选项卡中，执行以下操作：</p>

    <ol>
      <li>
        <p>在 “<strong>管理员用户</strong>” 部分，选择 “<strong>启用</strong>”。</p>
      </li>
      <li>
        <p>选择 “<strong>保存</strong>”。</p>
      </li>
      <li>
        <p>关闭边栏选项卡。</p>
      </li>
    </ol>
  </li>
  <li>
    <p>关闭 <strong>“更新容器注册表”</strong> 边栏选项卡。</p>
  </li>
</ol>

<h4 id="任务-2自动将容器映像部署到-azure-容器实例">任务 2：自动将容器映像部署到 Azure 容器实例</h4>

<ol>
  <li>
    <p>在 <strong>“容器注册表”</strong> 边栏选项卡中，找到 <strong>“服务”</strong> 部分并选择 <strong>“存储库”</strong> 链接。</p>
  </li>
  <li>
    <p>在 <strong>“存储库”</strong> 部分，选择 <strong>“ipcheck”</strong> 容器映像存储库。</p>
  </li>
  <li>
    <p>在 <strong>“存储库”</strong> 边栏选项卡中，选择与 <strong>“最新”</strong> 标记条目关联的省略号菜单。</p>
  </li>
  <li>
    <p>在弹出菜单中，选择 <strong>“运行实例”</strong> 链接。</p>
  </li>
  <li>
    <p>在 <strong>“创建容器实例”</strong> 边栏选项卡中，执行以下操作：</p>

    <ol>
      <li>
        <p>在 <strong>“容器名称”</strong> 文本框中，输入 <strong>“manualcompute”</strong>。</p>
      </li>
      <li>
        <p>将 <strong>“容器映像”</strong> 文本框保留设置为默认值。</p>
      </li>
      <li>
        <p>在 <strong>“OS 类型”</strong> 部分，选择 <strong>“Linux”</strong>。</p>
      </li>
      <li>
        <p>将 <strong>“订阅”</strong> 文本框设置为默认值。</p>
      </li>
      <li>
        <p>在 <strong>“资源组”</strong> 下拉列表中，选择 <strong>“ContainerCompute”</strong>。</p>
      </li>
      <li>
        <p>在 <strong>“位置”</strong> 下拉列表中，选择 <strong>“美国东部”</strong>。</p>
      </li>
      <li>
        <p>在 <strong>“核心数量”</strong> 下拉列表中，选择 <strong>“2”</strong>。</p>
      </li>
      <li>
        <p>在 <strong>“内存 (GB)”</strong> 文本框中，输入 <strong>“4”</strong>。</p>
      </li>
      <li>
        <p>在 <strong>“公共 IP 地址”</strong> 部分，选择 <strong>“否”</strong>。</p>
      </li>
      <li>
        <p>选择 <strong>“确定”</strong>。</p>
      </li>
    </ol>

    <blockquote>
      <p><strong>备注</strong>： 等待创建任务完成后再继续本实验室。</p>
    </blockquote>
  </li>
</ol>

<h4 id="任务-3手动将容器映像部署到容器实例">任务 3：手动将容器映像部署到容器实例</h4>

<ol>
  <li>
    <p>在 Azure 门户的“导航”窗格中，选择 <strong>“创建资源”</strong> 链接。</p>
  </li>
  <li>
    <p>在 <strong>“创建资源”</strong> 边栏选项卡上，找到 <strong>“搜索服务和市场”</strong> 文本框。</p>
  </li>
  <li>
    <p>在搜索框中，输入 <strong>“容器实例”</strong>，然后按 Enter。</p>
  </li>
  <li>
    <p>在 <strong>“市场”</strong> 搜索结果边栏选项卡中，选择 <strong>“容器实例”</strong> 结果。</p>
  </li>
  <li>
    <p>在 <strong>“容器实例”</strong> 边栏选项卡中，选择 <strong>“创建”</strong>。</p>
  </li>
  <li>
    <p>在 <strong>“创建容器实例”</strong> 边栏选项卡查找选项卡，例如 <strong>“基本设置”</strong>、 <strong>“网络”</strong> 和 <strong>“高级”</strong>。</p>

    <blockquote>
      <p><strong>备注</strong>： 每个选项卡代表工作流中创建新容器实例的一步。</p>
    </blockquote>
  </li>
  <li>
    <p>在 <strong>“基本信息”</strong> 选项卡中，执行以下操作：</p>

    <ol>
      <li>
        <p>将 <strong>“订阅”</strong> 文本框保留设置为默认值。</p>
      </li>
      <li>
        <p>在 <strong>“资源组”</strong> 下拉列表中，选择 <strong>“ContainerCompute”</strong>。</p>
      </li>
      <li>
        <p>在 <strong>“容器名称”</strong> 文本框中，输入 <strong>manualcompute</strong>。</p>
      </li>
      <li>
        <p>在 <strong>“区域”</strong> 下拉列表中，选择 <strong>“（美国）美国东部”</strong>。</p>
      </li>
      <li>
        <p>在 <strong>“映像源”</strong> 部分，选择 <strong>“Azure 容器注册表”</strong>。</p>
      </li>
      <li>
        <p>在 <strong>“注册表”</strong> 下拉列表中，选择你之前在本实验室中创建的 <strong>“Azure 容器注册表”</strong> 资源。</p>
      </li>
      <li>
        <p>在 <strong>“映像”</strong> 下拉列表中，选择 <strong>“ipcheck”</strong>。</p>
      </li>
      <li>
        <p>在 <strong>“映像标记”</strong> 下拉列表中，选择 <strong>“最新”</strong>。</p>
      </li>
      <li>
        <p>选择 <strong>“查看 + 创建”</strong>。</p>
      </li>
    </ol>
  </li>
  <li>
    <p>在 <strong>“查看 + 创建”</strong> 选项卡中，查看选定的选项。</p>
  </li>
  <li>
    <p>选择 <strong>“创建”</strong> 以使用指定配置创建容器实例。</p>

    <blockquote>
      <p><strong>备注</strong>：等待创建任务完成后再继续本实验室。</p>
    </blockquote>
  </li>
</ol>

<h4 id="任务-4验证容器实例是否成功运行">任务 4：验证容器实例是否成功运行</h4>

<ol>
  <li>
    <p>在 Azure 门户的“导航”窗格中，选择 <strong>“资源组”</strong> 链接。</p>
  </li>
  <li>
    <p>在 <strong>“资源组”</strong> 边栏选项卡中，找到并选择你之前在本实验室中创建的 <strong>“ContainerCompute”</strong> 资源组。</p>
  </li>
  <li>
    <p>在 <strong>“ContainerCompute”</strong> 边栏选项卡中，选择你之前在本实验室中创建的 <strong>“manualcompute”</strong> 容器实例。</p>
  </li>
  <li>
    <p>在 <strong>“容器实例”</strong> 边栏选项卡中，找到 <strong>“设置”</strong> 部分，然后选择 <strong>“容器”</strong> 链接。</p>
  </li>
  <li>
    <p>在 <strong>“容器”</strong> 部分，查找 <strong>“事件”</strong> 列表。</p>
  </li>
  <li>
    <p>选择 <strong>“日志”</strong> 选项卡，然后找到容器实例中的短信日志。</p>
  </li>
</ol>

<blockquote>
  <p><strong>备注</strong>： 你也可以选择查看 <strong>managedcompute</strong> 容器实例中的 <strong>“事件”</strong> 和 <strong>“日志”</strong>。</p>
</blockquote>

<blockquote>
  <p><strong>备注</strong>：应用程序完成运行后，容器因为已完成工作而终止。对于手动创建的容器实例，你表示可以接受成功退出，因此该容器只运行一次。自动创建的实例没有提供此选项，并且假定该容器应始终处于运行状态，因此该容器会反复重启。</p>
</blockquote>

<h4 id="回顾-2">回顾</h4>

<p>在本练习中，你使用了多种方法将容器映像部署到 Azure 容器实例。通过使用手动方法，你还可以进一步自定义部署，并将基于任务的应用程序作为容器运行的一部分运行。</p>

<h3 id="练习-4清理订阅">练习 4：清理订阅</h3>

<h4 id="任务-1打开-azure-cloud-shell-并列出资源组">任务 1：打开 Azure Cloud Shell 并列出资源组</h4>

<ol>
  <li>
    <p>在 Azure 门户的“导航”窗格中，选择 <strong>“Cloud Shell”</strong> 图标以打开一个新的 shell 实例。</p>

    <blockquote>
      <p><strong>备注</strong>： <strong>“Cloud Shell”</strong> 图标使用大于符号 () 和下划线字符 (_) 表示。</p>
    </blockquote>
  </li>
  <li>
    <p>如果这是你第一次使用订阅打开 Cloud Shell，则可以使用 <strong>“欢迎使用 Azure Cloud Shell 向导”</strong> 来配置 Cloud Shell，以便首次使用。在向导中执行以下操作：</p>

    <ol>
      <li>对话框提示你配置 shell。选择 <strong>“Bash”</strong>，查看选定的订阅，然后选择 <strong>“创建存储”</strong>。</li>
    </ol>

    <blockquote>
      <p><strong>备注</strong>：等待 Cloud Shell 完成首次设置过程后，再继续本实验室。如果 Cloud Shell 配置选项未显示，这很可能是因为你在本课程实验室中使用的是现有订阅。实验室是在你使用的是新订阅的假设下编写的。</p>
    </blockquote>
  </li>
</ol>

<h4 id="任务-2删除资源组">任务 2：删除资源组</h4>

<ol>
  <li>
    <p>输入以下命令然后按 Enter，以删除 <strong>ContainerCompute</strong> 资源组：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock29" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock29" class="mt-0"><code class="hljs coffeescript">az group <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> --name ContainerCompute --<span class="hljs-literal"><span class="hljs-literal">no</span></span>-wait --<span class="hljs-literal"><span class="hljs-literal">yes</span></span>
</code></pre>
  </li>
  <li>
    <p>关闭门户中的 Cloud Shell 窗格。</p>
  </li>
</ol>

<h4 id="任务-3关闭活动应用程序">任务 3：关闭活动应用程序</h4>

<ul>
  <li>关闭当前正在运行的 Microsoft Edge 应用程序。</li>
</ul>

<h4 id="回顾-3">回顾</h4>

<p>在本练习中，你通过删除本实验室中使用的资源组清理订阅。</p>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/AZ-204ZH-DevelopingSolutionsforMicrosoftAzure" target="_blank" class="ml-2">
                    MicrosoftLearning/AZ-204ZH-DevelopingSolutionsforMicrosoftAzure
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D.js"></script>



</body></html>