<!DOCTYPE html><html lang="en"><head>
        <title>
            dp-080-Transact-SQL
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D2df2a36a02d76b7c7d5687e30ec4acf097392490.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                dp-080-Transact-SQL
            </a>
            <a href="https://github.com/MicrosoftLearning/dp-080-Transact-SQL" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="#challenge-1-assignment-of-values-to-variables">Challenge 1: Assignment of values to variables</a></li><li class="nav-item"><a class="nav-link" href="#challenge-2-aggregate-product-sales">Challenge 2: Aggregate product sales</a></li><li class="nav-item"><a class="nav-link" href="#challenge-1">Challenge 1</a></li><li class="nav-item"><a class="nav-link" href="#challenge-2">Challenge 2</a></li></ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="introduction-to-programming-with-t-sql">Introduction to programming with T-SQL</h1>

<p>In this lab, you’ll use get an introduction to programming using T-SQL techniques using the <strong>adventureworks</strong> database. For your reference, the following diagram shows the tables in the database (you may need to resize the pane to see them clearly).</p>

<p><a href="images/adventureworks-erd.png" target="_blank"><img src="images/adventureworks-erd.png" alt="An entity relationship diagram of the adventureworks database"></a></p>

<blockquote>
  <p><strong>Note</strong>: If you’re familiar with the standard <strong>AdventureWorks</strong> sample database, you may notice that in this lab we are using a simplified version that makes it easier to focus on learning Transact-SQL syntax.</p>
</blockquote>

<h2 id="declare-variables-and-retrieve-values">Declare variables and retrieve values</h2>

<ol>
  <li>Start Azure Data Studio</li>
  <li>From the Servers pane, double-click the <strong>AdventureWorks connection</strong>. A green dot will appear when the connection is successful.</li>
  <li>Right click on the AdventureWorks connection and select <strong>New Query</strong>. A new query window is displayed with a connection to the AdventureWorks database.</li>
  <li>The previous step will open a query screen that is connected to the adventureworks database.</li>
  <li>
    <p>In the query pane, type the following T-SQL code:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock0" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock0" class="mt-0"><code class="hljs sql"> <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">num</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> = <span class="hljs-number"><span class="hljs-number">5</span></span>;

 <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">num</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> mynumber;
</code></pre>
  </li>
  <li>Highlight the above T-SQL code and select <strong>⏵Run</strong>.</li>
  <li>
    <p>This will give the result:</p>

    <table>
      <thead>
        <tr>
          <th>mynumber</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>5</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>In the query pane, type the following T-SQL code after the previous one:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock1" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock1" class="mt-0"><code class="hljs sql"> <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span>
 @num1 <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>,
 @num2 <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>;
    
 <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> @num1 = <span class="hljs-number"><span class="hljs-number">4</span></span>;
 <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> @num2 = <span class="hljs-number"><span class="hljs-number">6</span></span>;
    
 <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> @num1 + @num2 <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> totalnum;
</code></pre>
  </li>
  <li>Highlight the written T-SQL code and select <strong>⏵Run</strong>.</li>
  <li>
    <p>This will give the result:</p>

    <table>
      <thead>
        <tr>
          <th>totalnum</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>10</td>
        </tr>
      </tbody>
    </table>

    <p>You’ve now seen how to declare variables and how to retrieve values.</p>
  </li>
</ol>

<h2 id="use-variables-with-batches">Use variables with batches</h2>

<p>Now, we’ll look at how to declare variables in batches.</p>

<ol>
  <li>Right click on the TSQL connection and select <strong>New Query</strong>
</li>
  <li>
    <p>In the query pane, type the following T-SQL code:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock2" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock2" class="mt-0"><code class="hljs sql"> <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> 
 @empname <span class="hljs-keyword"><span class="hljs-keyword">nvarchar</span></span>(<span class="hljs-number"><span class="hljs-number">30</span></span>),
 @empid <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>;
    
 <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> @empid = <span class="hljs-number"><span class="hljs-number">5</span></span>;
    
 <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> @empname = (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> FirstName + N<span class="hljs-string"><span class="hljs-string">' '</span></span> + LastName <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> SalesLT.Customer <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> CustomerID = @empid)
    
 <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> @empname <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> employee;
</code></pre>
  </li>
  <li>Highlight the written T-SQL code and Select <strong>⏵Run</strong>.</li>
  <li>
    <p>This will give you this result:</p>

    <table>
      <thead>
        <tr>
          <th>employee</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Lucy Harrington</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Change the <a href="https://github.com/empid" class="user-mention">@empid</a> variable’s value from 5 to 2 and execute the modified T-SQL code you’ll get:</p>

    <table>
      <thead>
        <tr>
          <th>employee</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Keith Harris</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Now, in the code you just copied, add the batch delimiter GO before this statement:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock3" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock3" class="mt-0"><code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> @empname <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> employee;
</code></pre>
  </li>
  <li>
    <p>Make sure your T-SQL code looks like this:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock4" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock4" class="mt-0"><code class="hljs sql"> <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> 
 @empname <span class="hljs-keyword"><span class="hljs-keyword">nvarchar</span></span>(<span class="hljs-number"><span class="hljs-number">30</span></span>),
 @empid <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>;
    
 <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> @empid = <span class="hljs-number"><span class="hljs-number">5</span></span>;
    
 <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> @empname = (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> FirstName + N<span class="hljs-string"><span class="hljs-string">' '</span></span> + LastName <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> SalesLT.Customer <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> CustomerID = @empid)
    
 <span class="hljs-keyword"><span class="hljs-keyword">GO</span></span>
 <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> @empname <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> employee;
</code></pre>
  </li>
  <li>Highlight the written T-SQL code and select <strong>⏵Run</strong>**.</li>
  <li>
    <p>Observe the error:</p>

    <p>Must declare the scalar variable “<a href="https://github.com/empname" class="user-mention">@empname</a>”.</p>
  </li>
</ol>

<p>Variables are local to the batch in which they’re defined. If you try to refer to a variable that was defined in another batch, you get an error saying that the variable wasn’t defined. Also, keep in mind that GO is a client command, not a server T-SQL command.</p>

<h2 id="write-basic-conditional-logic">Write basic conditional logic</h2>

<ol>
  <li>Right click on the TSQL connection and select <strong>New Query</strong>
</li>
  <li>
    <p>In the query pane, type the following T-SQL code:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock5" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock5" class="mt-0"><code class="hljs nginx"> <span class="hljs-attribute"><span class="hljs-attribute">DECLARE</span></span> 
 <span class="hljs-variable"><span class="hljs-variable">@i</span></span> int = <span class="hljs-number"><span class="hljs-number">8</span></span>,
 <span class="hljs-variable"><span class="hljs-variable">@result</span></span> nvarchar(<span class="hljs-number"><span class="hljs-number">20</span></span>);
    
 <span class="hljs-attribute"><span class="hljs-attribute">IF</span></span> <span class="hljs-variable"><span class="hljs-variable">@i</span></span> &lt; <span class="hljs-number"><span class="hljs-number">5</span></span>
     SET <span class="hljs-variable"><span class="hljs-variable">@result</span></span> = N<span class="hljs-string"><span class="hljs-string">'Less than 5'</span></span>
 ELSE IF <span class="hljs-variable"><span class="hljs-variable">@i</span></span> &lt;= <span class="hljs-number"><span class="hljs-number">10</span></span>
     SET <span class="hljs-variable"><span class="hljs-variable">@result</span></span> = N<span class="hljs-string"><span class="hljs-string">'Between 5 and 10'</span></span>
 ELSE if <span class="hljs-variable"><span class="hljs-variable">@i</span></span> &gt; <span class="hljs-number"><span class="hljs-number">10</span></span>
     SET <span class="hljs-variable"><span class="hljs-variable">@result</span></span> = N<span class="hljs-string"><span class="hljs-string">'More than 10'</span></span>
 ELSE
     SET <span class="hljs-variable"><span class="hljs-variable">@result</span></span> = N<span class="hljs-string"><span class="hljs-string">'Unknown'</span></span>;
    
 <span class="hljs-attribute"><span class="hljs-attribute">SELECT</span></span> <span class="hljs-variable"><span class="hljs-variable">@result</span></span> AS result;
</code></pre>
  </li>
  <li>Highlight the written T-SQL code and select <strong>⏵Run</strong>.</li>
  <li>
    <p>Which should result in:</p>

    <table>
      <thead>
        <tr>
          <th>result</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Between 5 and 10</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>In the query pane, type the following T-SQL code after the previous code:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock6" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock6" class="mt-0"><code class="hljs sql"> <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> 
 @i <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> = <span class="hljs-number"><span class="hljs-number">8</span></span>,
 @<span class="hljs-keyword"><span class="hljs-keyword">result</span></span> <span class="hljs-keyword"><span class="hljs-keyword">nvarchar</span></span>(<span class="hljs-number"><span class="hljs-number">20</span></span>);
    
 <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">result</span></span> = 
 <span class="hljs-keyword"><span class="hljs-keyword">CASE</span></span> 
 <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> @i &lt; <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span>
     N<span class="hljs-string"><span class="hljs-string">'Less than 5'</span></span>
 <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> @i &lt;= <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span>
     N<span class="hljs-string"><span class="hljs-string">'Between 5 and 10'</span></span>
 <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> @i &gt; <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span>
     N<span class="hljs-string"><span class="hljs-string">'More than 10'</span></span>
 <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span>
     N<span class="hljs-string"><span class="hljs-string">'Unknown'</span></span>
 <span class="hljs-keyword"><span class="hljs-keyword">END</span></span>;

 <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">result</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">result</span></span>;
</code></pre>
  </li>
</ol>

<p>This code uses a CASE expression and only one SET expression to get the same result as the previous T-SQL code. Remember to use a CASE expression when it’s a matter of returning an expression. However, if you need to execute multiple statements, you can’t replace IF with CASE.</p>

<ol>
  <li>Highlight the written T-SQL code and select <strong>⏵Run</strong>.</li>
  <li>
    <p>Which should result in the same answer that we had before:</p>

    <table>
      <thead>
        <tr>
          <th>result</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Between 5 and 10</td>
        </tr>
      </tbody>
    </table>
  </li>
</ol>

<h2 id="execute-loops-with-while-statements">Execute loops with WHILE statements</h2>

<ol>
  <li>Right click on the TSQL connection and select <strong>New Query</strong>
</li>
  <li>
    <p>In the query pane, type the following T-SQL code:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock7" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock7" class="mt-0"><code class="hljs ruby"> DECLARE @i int = <span class="hljs-number"><span class="hljs-number">1</span></span>;
    
 WHILE @i &lt;= <span class="hljs-number"><span class="hljs-number">10</span></span>
 <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span>
     PRINT @i;
     SET @i = @i + <span class="hljs-number"><span class="hljs-number">1</span></span>;
 <span class="hljs-keyword"><span class="hljs-keyword">END</span></span>;
</code></pre>
  </li>
  <li>Highlight the written T-SQL code and select <strong>⏵Run</strong>.</li>
  <li>
    <p>This will result in:</p>

    <table>
      <thead>
        <tr>
          <th>Started executing query at Line 1</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
        </tr>
        <tr>
          <td>2</td>
        </tr>
        <tr>
          <td>3</td>
        </tr>
        <tr>
          <td>4</td>
        </tr>
        <tr>
          <td>5</td>
        </tr>
        <tr>
          <td>6</td>
        </tr>
        <tr>
          <td>7</td>
        </tr>
        <tr>
          <td>8</td>
        </tr>
        <tr>
          <td>9</td>
        </tr>
        <tr>
          <td>10</td>
        </tr>
      </tbody>
    </table>
  </li>
</ol>

<h2 id="return-to-microsoft-learn">Return to Microsoft Learn</h2>

<p>When you’ve finished the exercise, make sure to end the lab environment before you complete the knowledge check in Microsoft Learn.</p>

<h2 id="challenges">Challenges</h2>

<p>Now it’s time to try using what you’ve learnt.</p>

<blockquote>
  <p><strong>Tip</strong>: Try to determine the appropriate solutions for yourself. If you get stuck, suggested answers are provided at the end of this lab.</p>
</blockquote>

<h3 id="challenge-1-assignment-of-values-to-variables">Challenge 1: Assignment of values to variables</h3>

<p>You are developing a new T-SQL application that needs to temporarily store values drawn from the database, and depending on their values, display the outcome to the user.</p>

<ol>
  <li>Create your variables.
    <ul>
      <li>Write a T-SQL statement to declare two variables. The first is an nvarchar with length 30 called salesOrderNumber, and the other is an integer called customerID.</li>
    </ul>
  </li>
  <li>Assign a value to the integer variable.
    <ul>
      <li>Extend your TSQL code to assign the value 29847 to the customerID.</li>
    </ul>
  </li>
  <li>Assign a value from the database and display the result.
    <ul>
      <li>Extend your TSQL to set the value of the variable salesOrderNumber using the column <strong>salesOrderNUmber</strong> from the SalesOrderHeader table, filter using the <strong>customerID</strong> column and the customerID variable.  Display the result to the user as OrderNumber.</li>
    </ul>
  </li>
</ol>

<h3 id="challenge-2-aggregate-product-sales">Challenge 2: Aggregate product sales</h3>

<p>The sales manager would like a list of the first 10 customers that registered and made purchases online as part of a promotion. You’ve been asked to build the list.</p>

<ol>
  <li>Declare the variables:
    <ul>
      <li>Write a T-SQL statement to declare three variables. The first is called <strong>customerID</strong> and will be an Integer with an initial value of 1. The next two variables will be called <strong>fname</strong> and <strong>lname</strong>. Both will be NVARCHAR, give fname a length 20 and lname a length 30.</li>
    </ul>
  </li>
  <li>Construct a terminating loop:
    <ul>
      <li>Extend your T-SQL code and create a WHILE loop that will stop when the customerID variable reaches 10.</li>
    </ul>
  </li>
  <li>Select the customer first name and last name and display:
    <ul>
      <li>Extend the T-SQL code, adding a SELECT statement to retrieve the <strong>FirstName</strong> and <strong>LastName</strong> columns and assign them respectively to fname and lname. Combine and PRINT the fname and lname.  Filter using the <strong>customerID</strong> column and the customerID variable.</li>
    </ul>
  </li>
</ol>

<h2 id="challenge-solutions">Challenge Solutions</h2>

<p>This section contains suggested solutions for the challenge queries.</p>

<h3 id="challenge-1">Challenge 1</h3>

<ol>
  <li>
    <p>Create your variables</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock8" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock8" class="mt-0"><code class="hljs sql"> <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> 
 @salesOrderNUmber <span class="hljs-keyword"><span class="hljs-keyword">nvarchar</span></span>(<span class="hljs-number"><span class="hljs-number">30</span></span>),
 @customerID <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>;
</code></pre>
  </li>
  <li>
    <p>Assign a value to the integer variable.</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock9" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock9" class="mt-0"><code class="hljs sql"> <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> 
 @salesOrderNUmber <span class="hljs-keyword"><span class="hljs-keyword">nvarchar</span></span>(<span class="hljs-number"><span class="hljs-number">30</span></span>),
 @customerID <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>;

 <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> @customerID = <span class="hljs-number"><span class="hljs-number">29847</span></span>;
</code></pre>
  </li>
  <li>
    <p>Assign a value from the database and display the result</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock10" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock10" class="mt-0"><code class="hljs sql"> <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> 
 @salesOrderNUmber <span class="hljs-keyword"><span class="hljs-keyword">nvarchar</span></span>(<span class="hljs-number"><span class="hljs-number">30</span></span>),
 @customerID <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>;

 <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> @customerID = <span class="hljs-number"><span class="hljs-number">29847</span></span>;
    
 <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> @salesOrderNUmber = (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> salesOrderNumber <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> SalesLT.SalesOrderHeader <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> CustomerID = @customerID)

 <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> @salesOrderNUmber <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> OrderNumber;
</code></pre>
  </li>
</ol>

<h3 id="challenge-2">Challenge 2</h3>

<p>The sales manager would like a list of the first 10 customers that registered and made purchases online as part of a promotion. You’ve been asked to build the list.</p>

<ol>
  <li>
    <p>Declare the variables:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock11" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock11" class="mt-0"><code class="hljs sql"> <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> @customerID <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span>;
 <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> @fname <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NVARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">20</span></span>);
 <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> @lname <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NVARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">30</span></span>);
</code></pre>
  </li>
  <li>
    <p>Construct a terminating loop:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock12" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock12" class="mt-0"><code class="hljs css"> <span class="hljs-selector-tag"><span class="hljs-selector-tag">DECLARE</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">customerID</span></span> AS INT = <span class="hljs-number"><span class="hljs-number">1</span></span>;
 <span class="hljs-selector-tag"><span class="hljs-selector-tag">DECLARE</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">fname</span></span> AS NVARCHAR(<span class="hljs-number"><span class="hljs-number">20</span></span>);
 <span class="hljs-selector-tag"><span class="hljs-selector-tag">DECLARE</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">lname</span></span> AS NVARCHAR(<span class="hljs-number"><span class="hljs-number">30</span></span>);
    
 <span class="hljs-selector-tag"><span class="hljs-selector-tag">WHILE</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">customerID</span></span> &lt;=<span class="hljs-number"><span class="hljs-number">10</span></span>
 BEGIN
     SET @customerID += <span class="hljs-number"><span class="hljs-number">1</span></span>;
 <span class="hljs-selector-tag"><span class="hljs-selector-tag">END</span></span>;
</code></pre>
  </li>
  <li>
    <p>Select the customer first name and last name and display:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock13" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock13" class="mt-0"><code class="hljs css"> <span class="hljs-selector-tag"><span class="hljs-selector-tag">DECLARE</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">customerID</span></span> AS INT = <span class="hljs-number"><span class="hljs-number">1</span></span>;
 <span class="hljs-selector-tag"><span class="hljs-selector-tag">DECLARE</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">fname</span></span> AS NVARCHAR(<span class="hljs-number"><span class="hljs-number">20</span></span>);
 <span class="hljs-selector-tag"><span class="hljs-selector-tag">DECLARE</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">lname</span></span> AS NVARCHAR(<span class="hljs-number"><span class="hljs-number">30</span></span>);
    
 <span class="hljs-selector-tag"><span class="hljs-selector-tag">WHILE</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">customerID</span></span> &lt;=<span class="hljs-number"><span class="hljs-number">10</span></span>
 BEGIN
     SELECT @fname = FirstName, @lname = LastName FROM SalesLT.Customer
         WHERE CustomerID = @CustomerID;
     <span class="hljs-selector-tag"><span class="hljs-selector-tag">PRINT</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">fname</span></span> + N<span class="hljs-string"><span class="hljs-string">' '</span></span> + @lname;
     <span class="hljs-selector-tag"><span class="hljs-selector-tag">SET</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">customerID</span></span> += <span class="hljs-number"><span class="hljs-number">1</span></span>;
 <span class="hljs-selector-tag"><span class="hljs-selector-tag">END</span></span>;
</code></pre>
  </li>
</ol>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/dp-080-Transact-SQL" target="_blank" class="ml-2">
                    MicrosoftLearning/dp-080-Transact-SQL
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D2df2a36a02d76b7c7d5687e30ec4acf097392490.js"></script>



</body></html>