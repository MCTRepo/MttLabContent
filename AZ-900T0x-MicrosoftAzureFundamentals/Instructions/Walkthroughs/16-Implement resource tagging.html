<!DOCTYPE html><html lang="en"><head>
        <title>
            AZ-900T0x-MicrosoftAzureFundamentals
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                AZ-900T0x-MicrosoftAzureFundamentals
            </a>
            <a href="https://github.com/MicrosoftLearning/AZ-900T0x-MicrosoftAzureFundamentals" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    </ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="16---implement-resource-tagging-5-min">16 - Implement resource tagging (5 min)</h1>

<p>In this walkthrough, we will create a policy assignment that requires tagging, created a storage account and test the tagging, view resources with a specified tag, and remove the tagging policy.</p>

<h1 id="task-1-create-a-policy-assignment">Task 1: Create a Policy assignment</h1>

<p>In this task, we will configure the <strong>Require a tag on resources</strong> policy and assign it to our subscription.</p>

<ol>
  <li>
    <p>Sign in to the <a href="https://portal.azure.com">Azure portal</a>.</p>
  </li>
  <li>
    <p>From the <strong>All services</strong> blade, search for and select <strong>Policy</strong>.</p>
  </li>
  <li>
    <p>Scroll down to the <strong>Authoring</strong> section, click <strong>Assignments</strong>, and then click <strong>Assign Policy</strong> from the top of the  page.</p>
  </li>
  <li>
    <p>Notice the <strong>Scope</strong> for our policy will be subscription wide.</p>
  </li>
  <li>
    <p>Under <strong>Basics</strong> Select the <strong>Policy definition</strong> ellipsis button (right side of textbox). In the <strong>Search</strong> box, enter the value <strong>tag</strong>. A list of related Policies with the word <strong>tag</strong> will appear. Scroll down till you find the <strong>Require a tag on resources</strong> definition, click on it and click <strong>Select</strong>.</p>

    <p><a href="../images/1701.png" target="_blank"><img src="../images/1701.png" alt="Screenshot of Available Definitions pane with Require a tag on resources selected."></a></p>
  </li>
  <li>
    <p>On the <strong>Parameters</strong> tab, type in <strong>Company : Contoso ** for the tag key/value pair name. Click **Review + create</strong>, and then <strong>Create</strong>.</p>

    <p><a href="../images/1702.png" target="_blank"><img src="../images/1702.png" alt="Screenshot of Assign policy pane with the Tag name filled out."></a></p>
  </li>
  <li>
    <p>The <strong>Require a tag on resources</strong> policy assignment is now in place. When a resource is created, it must include a tag with the Company : Contoso key.
<strong>Note - you need to wait up to 30 minutes for the Policy to be applied.</strong></p>

    <p><a href="../images/1703.png" target="_blank"><img src="../images/1703.png" alt="Screenshot of Policy - Assignments pane with the allowed locations assignment highlighted."></a></p>
  </li>
</ol>

<h1 id="task-2-create-a-storage-account-to-test-the-required-tagging">Task 2: Create a storage account to test the required tagging</h1>

<p>In this task, we will create storage accounts to test the required tagging.</p>

<ol>
  <li>
    <p>In the Azure Portal, from the <strong>All services</strong> blade, search for and select <strong>Storage accounts</strong>, and then click <strong>+Add +New +Create</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Basics</strong> tab of the <strong>Create storage account</strong> blade, fill in the following information (replace <strong>xxxx</strong> in the name of the storage account with letters and digits such that the name is globally unique). Leave the defaults for everything else.</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Subscription</td>
          <td><strong>Use default provided</strong></td>
        </tr>
        <tr>
          <td>Resource group</td>
          <td><strong>Create new resource group</strong></td>
        </tr>
        <tr>
          <td>Storage account name</td>
          <td><strong>storageaccountxxxx</strong></td>
        </tr>
        <tr>
          <td>Location</td>
          <td><strong>(US) East US</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Click <strong>Review + create</strong>.</p>

    <p><strong>Note:</strong> We are testing to see what happens when the tag is not supplied. Please note, it can take up to 30 minutes for Policies to take effect.</p>
  </li>
  <li>
    <p>You will receive a Validation failed message. Click the <strong>Click here to view details</strong> message. On the <strong>Errors</strong> blade, on the <strong>Summary</strong> tab note the error message stating that resource was disallowed by Policy.</p>

    <p><strong>Note:</strong> If you view the Raw Error tab you will see the specific tag name that is required.</p>

    <p><a href="../images/1704.png" target="_blank"><img src="../images/1704.png" alt="Screenshot of disallowed due to policy error."></a></p>
  </li>
  <li>
    <p>Close the <strong>Error</strong> pane and click <strong>Previous</strong> (bottom of the screen). Provide the tagging information.</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Tag name</td>
          <td><strong>Company:Contoso</strong> (may not be in the drop-down list)</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Click <strong>Review + create</strong> and verify that the validation was successful. Click <strong>Create</strong> to deploy the storage account.</p>
  </li>
</ol>

<h1 id="task-3-view-all-resources-with-a-specific-tag">Task 3: View all resources with a specific tag</h1>

<ol>
  <li>
    <p>In the Azure Portal, from the <strong>All services</strong> blade, search for and select <strong>Tags</strong>.</p>
  </li>
  <li>
    <p>Note all tags and their values. Click the <strong>Company : Contoso</strong> key/value pair. This will display a blade showing the newly created storage account, as long as you included the tag during its deployment.</p>

    <p><a href="../images/1705.png" target="_blank"><img src="../images/1705.png" alt="Screenshot of the Tags with company and contoso selected."></a></p>
  </li>
  <li>
    <p>In the Portal, display the <strong>All resources</strong> blade.</p>
  </li>
  <li>
    <p>Click <strong>Add filter</strong> and add the <strong>Company</strong> tag key as the filter category. With the filter applied, only your storage account will be listed.</p>

    <p><a href="../images/1706.png" target="_blank"><img src="../images/1706.png" alt="Screenshot of the All Resources filter with Company selected."></a></p>
  </li>
</ol>

<h1 id="task-4-delete-the-policy-assignment">Task 4: Delete the policy assignment</h1>

<p>In this task, we will remove the <strong>Require a tag on resources</strong> policy so it does not affect our future work.</p>

<ol>
  <li>
    <p>In the portal, from the <strong>All services</strong> blade, search for and select <strong>Policy</strong>.</p>
  </li>
  <li>
    <p>Click the <strong>Require a tag on resources</strong> policy entry.</p>
  </li>
  <li>
    <p>Click <strong>Delete Assignment</strong> in the top menu.</p>
  </li>
  <li>
    <p>Confirm you wish to delete the policy assignment in the <strong>Delete assignment</strong> dialogue by clicking <strong>Yes</strong></p>
  </li>
  <li>
    <p>If you have time, create another resource without a tag to ensure the policy is no longer in effect.</p>
  </li>
</ol>

<p>Congratulations! In this walkthrough, we created a policy assignment that required tagging, created a resource (storage account) and tested the Policy for tagging, viewed resources with a specified tag, and removed the tagging policy.</p>

<p><strong>Note</strong>: To avoid additional costs, you can optionally remove this resource group. Search for resource groups, click your resource group, and then click <strong>Delete resource group</strong>. Verify the name of the resource group and then click <strong>Delete</strong>. Monitor the <strong>Notifications</strong> to see how the delete is proceeding.</p>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/AZ-900T0x-MicrosoftAzureFundamentals" target="_blank" class="ml-2">
                    MicrosoftLearning/AZ-900T0x-MicrosoftAzureFundamentals
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D.js"></script>



</body></html>