<!DOCTYPE html><html lang="en"><head>
        <title>
            AZ-900T0x-MicrosoftAzureFundamentals
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                AZ-900T0x-MicrosoftAzureFundamentals
            </a>
            <a href="https://github.com/MicrosoftLearning/AZ-900T0x-MicrosoftAzureFundamentals" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    </ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="10---create-a-vm-with-powershell-10-min">10 - Create a VM with PowerShell (10 min)</h1>

<p>In this walk-through, we will configure the Cloud Shell, use Azure PowerShell module to create a resource group and virtual machine, and review Azure Advisor recommendations.</p>

<h1 id="task-1-configure-the-cloud-shell">Task 1: Configure the Cloud Shell</h1>

<p>In this task, we will configure Cloud Shell.</p>

<ol>
  <li>Sign in to the <a href="https://portal.azure.com">Azure portal</a>.** You can find your login credentials within the resources tab (directly next to this Instructions tab!)
**</li>
  <li>
    <p>From the Azure portal, open the <strong>Azure Cloud Shell</strong> by clicking on the icon in the top right of the Azure Portal.</p>

    <p><a href="../images/1002.png" target="_blank"><img src="../images/1002.png" alt="Screenshot of Azure Portal Azure Cloud Shell icon."></a></p>
  </li>
  <li>
    <p>When prompted to select either <strong>Bash</strong> or <strong>PowerShell</strong>, select <strong>PowerShell</strong>.</p>
  </li>
  <li>
    <p>On the <strong>You have no storage mounted</strong> screen select <strong>Show advanced settings</strong> then fill in the information below</p>

    <table>
      <thead>
        <tr>
          <th>Settings</th>
          <th>Values</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Resource Group</td>
          <td><strong>Create new resource group</strong></td>
        </tr>
        <tr>
          <td>Storage account (Create a new account a use a globally unique name (ex: cloudshellstoragemystorage))</td>
          <td><strong>cloudshellxxxxxxx</strong></td>
        </tr>
        <tr>
          <td>File share (create new)</td>
          <td><strong>shellstorage</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>Select <strong>Create Storage</strong></li>
</ol>

<h1 id="task-2-create-a-resource-group-and-virtual-machine">Task 2: Create a resource group and virtual machine</h1>

<p>In this task, we will use PowerShell to create a resource group and a virtual machine.</p>

<ol>
  <li>
    <p>Ensure <strong>PowerShell</strong> is selected in the upper-left drop-down menu of the Cloud Shell pane.</p>
  </li>
  <li>
    <p>Verify your new resource group by running the following command in the Powershell window. Press <strong>Enter</strong> to run the command.</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock0" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock0" class="mt-0"><code class="language-PowerShell"> Get-AzResourceGroup | Format-Table
</code></pre>
  </li>
  <li>
    <p>Create a virtual machine by pasting the following command into the terminal window.</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock1" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock1" class="mt-0"><code class="language-PowerShell"> New-AzVm `
 -ResourceGroupName "myRGPS" `
 -Name "myVMPS" `
 -Location "East US" `
 -VirtualNetworkName "myVnetPS" `
 -SubnetName "mySubnetPS" `
 -SecurityGroupName "myNSGPS" `
 -PublicIpAddressName "myPublicIpPS"
</code></pre>
  </li>
  <li>
    <p>When prompted provide the username (<strong>azureuser</strong>) and the password (<strong>Pa$$w0rd1234</strong>) that will be configured as the local Administrator account on that virtual machines.azureadmin</p>
  </li>
  <li>
    <p>Once VM is created, close the PowerShell session Cloud Shell pane.</p>
  </li>
  <li>
    <p>In the Azure portal, search for <strong>Virtual machines</strong> and verify the <strong>myVMPS</strong> is running. This may take a few minutes.</p>

    <p><a href="../images/1001.png" target="_blank"><img src="../images/1001.png" alt="Screenshot of the virtual machines page with myVMPS in a running state."></a></p>
  </li>
  <li>
    <p>Access the new virtual machine and review the Overview and Networking settings to verify your information was correctly deployed.</p>
  </li>
</ol>

<h1 id="task-3-execute-commands-in-the-cloud-shell">Task 3: Execute commands in the Cloud Shell</h1>

<p>In this task, we will practice executing PowerShell commands from the Cloud Shell.</p>

<ol>
  <li>
    <p>From the Azure portal, open the <strong>Azure Cloud Shell</strong> by clicking on the icon in the top right of the Azure Portal.</p>
  </li>
  <li>
    <p>Ensure <strong>PowerShell</strong> is selected in the upper-left drop-down menu of the Cloud Shell pane.</p>
  </li>
  <li>
    <p>Retrieve information about your virtual machine including name, resource group, location, and status. Notice the PowerState is <strong>running</strong>.</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock2" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock2" class="mt-0"><code class="language-PowerShell"> Get-AzVM -name myVMPS -status | Format-Table -autosize
</code></pre>
  </li>
  <li>
    <p>Stop the virtual machine using the following command.</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock3" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock3" class="mt-0"><code class="language-PowerShell"> Stop-AzVM -ResourceGroupName myRGPS -Name myVMPS
</code></pre>
  </li>
  <li>
    <p>When prompted confirm (Yes) to the action. Wait for <strong>Succeeded</strong> status.</p>
  </li>
  <li>
    <p>Verify your virtual machine state. The PowerState should now be <strong>deallocated</strong>. You can also verify the virtual machine status in the portal. Close Cloudshell.</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock4" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock4" class="mt-0"><code class="language-PowerShell"> Get-AzVM -name myVMPS -status | Format-Table -autosize
</code></pre>
  </li>
</ol>

<h1 id="task-4-review-azure-advisor-recommendations">Task 4: Review Azure Advisor Recommendations</h1>

<p><strong>Note:</strong> This same task is in the Create a VM with Azure CLI lab.</p>

<p>In this task, we will review Azure Advisor recommendations for our virtual machine.</p>

<ol>
  <li>
    <p>From the <strong>All services</strong> blade, search for and select <strong>Advisor</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Advisor</strong> blade, select <strong>Overview</strong>. Notice recommendations are grouped by Reliability, Security, Performance, and Cost.</p>

    <p><a href="../images/1003.png" target="_blank"><img src="../images/1003.png" alt="Screenshot of the Advisor Overview page. "></a></p>
  </li>
  <li>
    <p>Select <strong>All recommendations</strong> and take time to view each recommendation and suggested actions.</p>

    <p><strong>Note:</strong> Depending on your resources, your recommendations will be different.</p>

    <p><a href="../images/1004.png" target="_blank"><img src="../images/1004.png" alt="Screenshot of the Advisor All recommendations page. "></a></p>
  </li>
  <li>
    <p>Notice that you can download the recommendations as a CSV or PDF file.</p>
  </li>
  <li>
    <p>Notice that you can create alerts.</p>
  </li>
  <li>
    <p>If you have time, continue to experiment with Azure PowerShell.</p>
  </li>
</ol>

<p>Congratulations! You have configured Cloud Shell, created a virtual machine using PowerShell, practiced with PowerShell commands, and viewed Advisor recommendations.</p>

<p><strong>Note</strong>: To avoid additional costs, you can optionally remove this resource group. Search for resource groups, click your resource group, and then click <strong>Delete resource group</strong>. Verify the name of the resource group and then click <strong>Delete</strong>. Monitor the <strong>Notifications</strong> to see how the delete is proceeding.</p>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/AZ-900T0x-MicrosoftAzureFundamentals" target="_blank" class="ml-2">
                    MicrosoftLearning/AZ-900T0x-MicrosoftAzureFundamentals
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D.js"></script>



</body></html>