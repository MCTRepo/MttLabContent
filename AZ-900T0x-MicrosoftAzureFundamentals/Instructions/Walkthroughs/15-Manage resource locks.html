<!DOCTYPE html><html lang="en"><head>
        <title>
            AZ-900T0x-MicrosoftAzureFundamentals
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                AZ-900T0x-MicrosoftAzureFundamentals
            </a>
            <a href="https://github.com/MicrosoftLearning/AZ-900T0x-MicrosoftAzureFundamentals" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    </ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="15---manage-resource-locks-5-min">15 - Manage resource locks (5 min)</h1>

<p>In this walkthrough, we will add a lock to the resource group and test deleting the resource group. Locks can be applied in a subscription to resource groups, or individual resources to prevent accidental deletion or modification of critical resources.</p>

<h1 id="task-1--add-a-lock-to-the-resource-group-and-test-deletion">Task 1:  Add a Lock to the resource group and test deletion</h1>

<p>In this task, we will add a resource lock to the resource group and test deleting the resource group.</p>

<ol>
  <li>
    <p>Sign in to the <a href="https://portal.azure.com">Azure portal</a>.</p>
  </li>
  <li>
    <p>In the Azure portal, navigate to the resource group <strong>myRGLocks</strong>.</p>
  </li>
  <li>
    <p>You can apply a lock to a subscription, resource group, or individual resource to prevent accidental deletion or modification of critical resources.</p>
  </li>
  <li>
    <p>In the <strong>Settings</strong> section, click <strong>Locks</strong>, and then click <strong>+ Add</strong>.</p>

    <p><a href="../images/1601.png" target="_blank"><img src="../images/1601.png" alt="Screenshot of the myRGLocks resource group with the Locks pane displaying."></a></p>
  </li>
  <li>
    <p>Configure the new lock. When you are done click <strong>OK</strong>.</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Lock name</td>
          <td>’'’RGLock’’’</td>
        </tr>
        <tr>
          <td>Lock Type</td>
          <td><strong>Delete</strong></td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Click <strong>Overview</strong> and click <strong>Delete resource group</strong>. Type the name of the resource group and click <strong>OK</strong>. You receive an error message stating the resource group is locked and can’t be deleted.</p>

    <p><a href="../images/1602.png" target="_blank"><img src="../images/1602.png" alt="Screenshot of the delete locks failed."></a></p>
  </li>
</ol>

<h1 id="task-2-test-deleting-a-member-of-the-resource-group">Task 2: Test deleting a member of the resource group</h1>

<p>In this task, we will test if the resource lock protects a storage account in the resource group.</p>

<ol>
  <li>
    <p>From the <strong>All services</strong> blade, search for and select <strong>Storage accounts</strong>, and then click <strong>+ Add, + Create, or + New</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Storage Accounts</strong> page <strong>+Add +New +Create ** blade, fill in the following information (replace **xxxx</strong> in the name of the storage account with letters and digits such that the name is globally unique). Leave the defaults for everything else.</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Subscription</td>
          <td><strong>Select your subscription</strong></td>
        </tr>
        <tr>
          <td>Resource group</td>
          <td><strong>myRGLocks</strong></td>
        </tr>
        <tr>
          <td>Storage account name</td>
          <td><strong>storageaccountxxxx</strong></td>
        </tr>
        <tr>
          <td>Location</td>
          <td><strong>(US) East US</strong></td>
        </tr>
        <tr>
          <td>Performance</td>
          <td><strong>Standard</strong></td>
        </tr>
        <tr>
          <td>Account kind</td>
          <td><strong>StorageV2 (general purpose v2)</strong></td>
        </tr>
        <tr>
          <td>Replication</td>
          <td><strong>Locally redundant storage (LRS)</strong></td>
        </tr>
        <tr>
          <td>Access tier (default)</td>
          <td><strong>Hot</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Click <strong>Review + Create</strong> to review your storage account settings and allow Azure to validate the configuration.</p>
  </li>
  <li>
    <p>Once validated, click <strong>Create</strong>. Wait for the notification that the account was successfully created.</p>
  </li>
  <li>
    <p>Wait for the notification that the storage account was successfully created.</p>
  </li>
  <li>
    <p>Access your new storage account and from the <strong>Overview</strong> pane, click <strong>Delete</strong>. You receive an error message stating the resource or its parent has a delete lock.</p>

    <p><a href="../images/1603.png" target="_blank"><img src="../images/1603.png" alt="Screenshot of the error deleting the storage account."></a></p>

    <p><strong>Note</strong>: Although we did not create a lock specifically for the storage account, we did create a lock at the resource group level, which contains the storage account. As such, this <em>parent</em> level lock prevents us from deleting the resource and the storage account inherits the lock from the parent.</p>
  </li>
</ol>

<h1 id="task-3-remove-the-resource-lock">Task 3: Remove the resource lock</h1>

<p>In this task, we will remove the resource lock and test.</p>

<ol>
  <li>
    <p>Return to the <strong>myRGLocks-XXXXXXXX</strong> resource group blade and, in the <strong>Settings</strong> section, click <strong>Locks</strong>.</p>
  </li>
  <li>
    <p>Click <strong>Delete</strong> link to the far right of the <strong>myRGLocks-XXXXXXXX</strong> entry, to the right of <strong>Edit</strong>.</p>

    <p><a href="../images/1604.png" target="_blank"><img src="../images/1604.png" alt="Screenshot of the Lock with the Delete link highlighted."></a></p>
  </li>
  <li>
    <p>Return to the storage account blade and confirm you can now delete the resource.</p>
  </li>
</ol>

<p>Congratulations! You created a resource group, added a lock to resource group and tested deletion, tested deleting a resource in the resource group, and removed the resource lock.</p>

<p><strong>Note</strong>: To avoid additional costs, you can optionally remove this resource group. Search for resource groups, click your resource group, and then click <strong>Delete resource group</strong>. Verify the name of the resource group and then click <strong>Delete</strong>. Monitor the <strong>Notifications</strong> to see how the delete is proceeding.</p>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/AZ-900T0x-MicrosoftAzureFundamentals" target="_blank" class="ml-2">
                    MicrosoftLearning/AZ-900T0x-MicrosoftAzureFundamentals
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D.js"></script>



</body></html>