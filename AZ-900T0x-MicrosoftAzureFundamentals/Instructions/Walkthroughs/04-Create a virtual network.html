<!DOCTYPE html><html lang="en"><head>
        <title>
            AZ-900T0x-MicrosoftAzureFundamentals
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                AZ-900T0x-MicrosoftAzureFundamentals
            </a>
            <a href="https://github.com/MicrosoftLearning/AZ-900T0x-MicrosoftAzureFundamentals" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    </ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="04---create-a-virtual-network-20-min">04 - Create a virtual network (20 min)</h1>

<p>In this walkthrough, we will create a virtual network, deploy two virtual machines onto that virtual network and then configure them to allow one virtual machine to ping the other within that virtual network.</p>

<h1 id="task-1-create-a-virtual-network">Task 1: Create a virtual network</h1>

<p>In this task, we will create a virtual network.</p>

<p>Note: Before beginning the lab, disable both the public and private firewall in your virtual machine by opening the Start menu &gt; Settings &gt; Network and Internet &gt; Locate Windows Firewall</p>

<ol>
  <li>
    <p>Sign in to the Azure portal at <a href="https://portal.azure.com" target="_blank"><span style="color: #0066cc;" color="#0066cc">https://portal.azure.com</span></a></p>
  </li>
  <li>
    <p>From the <strong>All services</strong> blade, search for and select <strong>Virtual networks</strong>, and then click <strong>+ Add, + Create, + New</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Basics</strong> tab, fill in the following information (leave the defaults for everything else):</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Subscription</td>
          <td><strong>Leave default provided</strong></td>
        </tr>
        <tr>
          <td>Resource Group</td>
          <td><strong>Create new resource group</strong></td>
        </tr>
        <tr>
          <td>Name</td>
          <td><strong>vnet1</strong></td>
        </tr>
        <tr>
          <td>Region</td>
          <td><strong>(US) East US</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Click the <strong>Review + create</strong> button. Ensure the validation passes. Then hit create to deploy the resource.</p>
  </li>
</ol>

<h1 id="task-2-create-two-virtual-machines">Task 2: Create two virtual machines</h1>

<p>In this task, we will create two virtual machines in the virtual network.</p>

<ol>
  <li>
    <p>From the <strong>All services</strong> blade, search for <strong>Virtual machines</strong> and then click <strong>+ Add, + Create, + New</strong>, from the drop down select <strong>Virtual Machine</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Basics</strong> tab, fill in the following information (leave the defaults for everything else):</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Subscription</td>
          <td><strong>Use default supplied</strong></td>
        </tr>
        <tr>
          <td>Resource group</td>
          <td><strong>Select default in drop down</strong></td>
        </tr>
        <tr>
          <td>Virtual machine name</td>
          <td><strong>vm1</strong></td>
        </tr>
        <tr>
          <td>Region</td>
          <td><strong>(US) East US</strong></td>
        </tr>
        <tr>
          <td>Image</td>
          <td><strong>Windows Server 2019 Datacenter - Gen2</strong></td>
        </tr>
        <tr>
          <td>Username</td>
          <td><strong>azureuser</strong></td>
        </tr>
        <tr>
          <td>Password</td>
          <td><strong>Pa$$w0rd1234</strong></td>
        </tr>
        <tr>
          <td>Public inbound ports</td>
          <td>Select <strong>Allow selected ports</strong></td>
        </tr>
        <tr>
          <td>Selected inbound ports</td>
          <td><strong>RDP (3389)</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Select the <strong>Networking</strong> tab. Make sure the virtual machine is placed in the <strong>vnet1</strong> virtual network. Review the default settings, but do not make any other changes.</p>
  </li>
  <li>
    <p>Click <strong>Review + create</strong>. After the Validation passes, click <strong>Create</strong>. Deployment times can vary but it can generally take between three to six minutes to deploy.</p>
  </li>
  <li>
    <p>Monitor your deployment, but continue on to the next step.</p>
  </li>
  <li>
    <p>Create a second virtual machine by repeating steps <strong>2 to 4</strong> above. Make sure you use a different virtual machine name, that the virtual machine is in the same virtual network, and is using a new public IP address:</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Resource group</td>
          <td><strong>select default in dropdown (same as Task1-3 &amp; Task2-2)</strong></td>
        </tr>
        <tr>
          <td>Virtual machine name</td>
          <td><strong>vm2</strong></td>
        </tr>
        <tr>
          <td>Virtual network</td>
          <td><strong>vnet1</strong></td>
        </tr>
        <tr>
          <td>Public IP</td>
          <td><strong>vm2-ip</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Wait for both virtual machines to deploy and status says <em>running</em>.</p>
  </li>
</ol>

<h1 id="task-3-test-the-connection">Task 3: Test the connection</h1>

<p>In this task, we will try to test whether the virtual machines can communicate (ping) each other. If not we will install a rule to allow an ICMP connection. Usually ICMP coonnections are automatically blocked.</p>

<ol>
  <li>
    <p>From the <strong>All resources</strong> blade, search for <strong>vm1</strong>, open its <strong>Overview</strong> blade, and make sure its <strong>Status</strong> is <strong>Running</strong>. You may need to <strong>Refresh</strong> the page.</p>
  </li>
  <li>
    <p>On the <strong>Overview</strong> blade, select <strong>Connect</strong> and then select <strong>RDP</strong> from the drop down.</p>

    <p><strong>Note</strong>: The following directions tell you how to connect to your VM from a Windows computer.</p>
  </li>
  <li>
    <p>On the <strong>Connect with RDP</strong> blade, keep the default options to connect by IP address over port 3389 and click <strong>Download RDP File</strong>.</p>
  </li>
  <li>
    <p>Open the downloaded RDP file (located at the bottom left of you VM) and click <strong>Connect</strong> when prompted.</p>
  </li>
  <li>
    <p>In the <strong>Windows Security</strong> window, type the username <strong>azureuser</strong> and password <strong>Pa$$w0rd1234</strong> and then click <strong>OK</strong>.</p>
  </li>
  <li>
    <p>You may receive a certificate warning during the sign-in process. Click <strong>Yes</strong> to create the connection and connect to your deployed VM. You should connect successfully. Close the Windows Server and Dashboard windows that pop up. You should see a Blue Windows background. You are now in your virtual machine.</p>
  </li>
  <li>
    <p>In <strong>both</strong> newly created virtual machines, connect via RDP and disable both the public and private firewall by opening the Start menu &gt; Settings &gt; Network and Internet &gt; Locate Windows Firewall.</p>
  </li>
  <li>
    <p>Open up PowerShell on the virtual machine by clicking the <strong>Start</strong> button, and in Search type <strong>PowerShell</strong>, right click on <strong>Windows PowerShell</strong> to <strong>Run as administrator</strong></p>
  </li>
  <li>
    <p>In Powershell, try to ping vm2 by typing:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock0" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock0" class="mt-0"><code class="language-PowerShell">ping vm2
</code></pre>
  </li>
  <li>
    <p>You should be successful. You have pinged VM2 from VM1.</p>
  </li>
</ol>

<p><strong>Congratulations!</strong> You have configured and deployed two virtual machines in a virtual network, and then you were able to connect them.</p>

<p><strong>Note</strong>: To avoid additional costs, you can optionally remove this resource group. Search for resource groups, click your resource group, and then click <strong>Delete resource group</strong>. Verify the name of the resource group and then click <strong>Delete</strong>. Monitor the <strong>Notifications</strong> to see how the delete is proceeding.</p>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/AZ-900T0x-MicrosoftAzureFundamentals" target="_blank" class="ml-2">
                    MicrosoftLearning/AZ-900T0x-MicrosoftAzureFundamentals
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D.js"></script>



</body></html>