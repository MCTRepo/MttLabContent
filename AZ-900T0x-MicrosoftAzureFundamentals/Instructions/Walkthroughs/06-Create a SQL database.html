<!DOCTYPE html><html lang="en"><head>
        <title>
            AZ-900T0x-MicrosoftAzureFundamentals
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                AZ-900T0x-MicrosoftAzureFundamentals
            </a>
            <a href="https://github.com/MicrosoftLearning/AZ-900T0x-MicrosoftAzureFundamentals" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    </ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="06---create-a-sql-database-5-min">06 - Create a SQL database (5 min)</h1>

<p>In this walkthrough, we will create a SQL database in Azure and then query the data in that database.</p>

<h1 id="task-1-create-the-database">Task 1: Create the database</h1>

<p>In this task, we will create a SQL database based on the AdventureWorksLT sample database.</p>

<ol>
  <li>
    <p>Sign in to the Azure portal at <a href="https://portal.azure.com"><strong>https://portal.azure.com</strong></a>.</p>
  </li>
  <li>
    <p>From the <strong>All services</strong> blade, search for and select <strong>SQL databases</strong>, and then click <strong>+ Add, + Create, + New</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Basics</strong> tab, fill in this information.</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Subscription</td>
          <td><strong>Use default supplied</strong></td>
        </tr>
        <tr>
          <td>Resource group</td>
          <td><strong>Create new resource group</strong></td>
        </tr>
        <tr>
          <td>Database name</td>
          <td><strong>db1</strong></td>
        </tr>
        <tr>
          <td>Server</td>
          <td>Select <strong>Create new</strong> (A new sidebar will open on the right)</td>
        </tr>
        <tr>
          <td>Server name</td>
          <td><strong>sqlserverxxxx</strong> (must be unique)</td>
        </tr>
        <tr>
          <td>Location</td>
          <td><strong>(US) East US</strong></td>
        </tr>
        <tr>
          <td>Authentication method</td>
          <td><strong>Use SQL authentication</strong></td>
        </tr>
        <tr>
          <td>Server admin login</td>
          <td><strong>sqluser</strong></td>
        </tr>
        <tr>
          <td>Password</td>
          <td><strong>Pa$$w0rd1234</strong></td>
        </tr>
        <tr>
          <td>Click</td>
          <td><strong>OK</strong></td>
        </tr>
      </tbody>
    </table>

    <p><a href="../images/0501.png" target="_blank"><img src="../images/0501.png" alt="Screenshot of the Server pane and the New Server pane with fields filled in as per the table and the Review + create and OK buttons highlighted."></a></p>
  </li>
  <li>
    <p>On the  <strong>Networking</strong> tab and configure the following settings (leave others with their defaults)</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Connectivity method</td>
          <td><strong>Public endpoint</strong></td>
        </tr>
        <tr>
          <td>Allow Azure services and resources to access this server</td>
          <td><strong>Yes</strong></td>
        </tr>
        <tr>
          <td>Add current client IP address</td>
          <td><strong>No</strong></td>
        </tr>
      </tbody>
    </table>

    <p><a href="../images/0501b.png" target="_blank"><img src="../images/0501b.png" alt="Screenshot of the Networking tab of the Create SQL Database blade with settings selected as per the table and the Review + create button highlighted."></a></p>
  </li>
  <li>
    <p>On the <strong>Security</strong> tab.</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Microsoft Defender for SQL</td>
          <td><strong>Not now</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Move to the <strong>Additional settings</strong> tab. We will be using the AdventureWorksLT sample database.</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Use existing data</td>
          <td><strong>Sample</strong></td>
        </tr>
      </tbody>
    </table>

    <p><a href="../images/0501c.png" target="_blank"><img src="../images/0501c.png" alt="Screenshot of the Additional settings tab of the Create SQL Database blade with settings selected as per the table and the Review + create button highlighted."></a></p>
  </li>
  <li>
    <p>Click <strong>Review + create</strong> and then click <strong>Create</strong> to deploy and provision the resource group, server, and database. It can take approx. 2 to 5 minutes to deploy.</p>
  </li>
</ol>

<h1 id="task-2-test-the-database">Task 2: Test the database.</h1>

<p>In this task, we will configure the SQL server and run a SQL query.</p>

<ol>
  <li>
    <p>When the deployment has completed, click Go to resource from the deployment blade. Alternatively, from the <strong>All Resources</strong> blade, search and select <strong>Databases</strong>, then <strong>SQL databases</strong> ensure your new database was created. You may need to <strong>Refresh</strong> the page.</p>

    <p><a href="../images/0502.png" target="_blank"><img src="../images/0502.png" alt="Screenshot of the SQL database and server that have just been deployed."></a></p>
  </li>
  <li>
    <p>Click the <strong>db1</strong> entry representing the SQL database you created. On the db1 blade click <strong>Query editor (preview)</strong>.</p>
  </li>
  <li>
    <p>Login as <strong>sqluser</strong> with the password <strong>Pa$$w0rd1234</strong>.</p>
  </li>
  <li>
    <p>You will not be able to login. Read the error closely and make note of the IP address that needs to be allowed through the firewall.</p>

    <p><a href="../images/0503.png" target="_blank"><img src="../images/0503.png" alt="Screenshot of the Query Editor login page with IP address error."></a></p>
  </li>
  <li>
    <p>Back on the <strong>db1</strong> blade, click <strong>Overview</strong>.</p>

    <p><a href="../images/0504.png" target="_blank"><img src="../images/0504.png" alt="Screenshot of the SQL server page."></a></p>
  </li>
  <li>
    <p>From the db1 <strong>Overview</strong> blade, click <strong>Set server firewall</strong> Located on the top center of the overview screen.</p>
  </li>
  <li>
    <p>Click <strong>+ Add client IP</strong> (top menu bar) to add the IP address referenced in the error. (it may have autofilled for you - if not paste it into the IP address fields). Be sure to <strong>Save</strong> your changes.</p>

    <p><a href="../images/0506.png" target="_blank"><img src="../images/0506.png" alt="Screenshot of the SQL server firewall settings page with the new IP rule highlighted."></a></p>
  </li>
  <li>
    <p>Return to your SQL database (slide the bottom toggle bar to the left) and click on <strong>Query Editor (Preview)</strong>. Try to login again as <strong>sqluser</strong> with the password <strong>Pa$$w0rd1234</strong>. This time you should succeed. Note that it may take a couple of minutes for the new firewall rule to be deployed.</p>
  </li>
  <li>
    <p>Once you log in successfully, the query pane appears. Enter the following query into the editor pane.</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock0" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock0" class="mt-0"><code class="language-SQL hljs"> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> TOP <span class="hljs-number"><span class="hljs-number">20</span></span> pc.Name <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> CategoryName, p.name <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ProductName
 <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> SalesLT.ProductCategory pc
 <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> SalesLT.Product p
 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> pc.productcategoryid = p.productcategoryid;
</code></pre>

    <p><a href="../images/0507.png" target="_blank"><img src="../images/0507.png" alt="Screenshot of the Query editor with the query pane and the commands executing successfully."></a></p>
  </li>
  <li>
    <p>Click <strong>Run</strong>, and then review the query results in the <strong>Results</strong> pane. The query should run successfully.</p>

    <p><a href="../images/0508.png" target="_blank"><img src="../images/0508.png" alt="Screenshot of the database Query Editor pane with the SQL code having been run successfully and the output visible in the results pane."></a></p>
  </li>
</ol>

<p>Congratulations! You have created a SQL database in Azure and successfully queried the data in that database.</p>

<p><strong>Note</strong>: To avoid additional costs, you can optionally remove this resource group. Search for resource groups, click your resource group, and then click <strong>Delete resource group</strong>. Verify the name of the resource group and then click <strong>Delete</strong>. Monitor the <strong>Notifications</strong> to see how the delete is proceeding.</p>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/AZ-900T0x-MicrosoftAzureFundamentals" target="_blank" class="ml-2">
                    MicrosoftLearning/AZ-900T0x-MicrosoftAzureFundamentals
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D.js"></script>



</body></html>