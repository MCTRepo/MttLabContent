<!DOCTYPE html><html lang="en"><head>
        <title>
            DA-100ZH-Analyzing-Data-with-Power-BI
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                DA-100ZH-Analyzing-Data-with-Power-BI
            </a>
            <a href="https://github.com/MicrosoftLearning/DA-100ZH-Analyzing-Data-with-Power-BI" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="#实验室故事">实验室故事</a></li><li class="nav-item"><a class="nav-link" href="#任务-1入门">任务 1：入门</a></li><li class="nav-item"><a class="nav-link" href="#任务-2强制执行行级别安全性">任务 2：强制执行行级别安全性</a></li><li class="nav-item"><a class="nav-link" href="#任务-2完成">任务 2：完成</a></li></ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="强制执行行级别安全性"><strong>强制执行行级别安全性</strong></h1>

<p><strong>完成实验室预计需要花费 45 分钟</strong></p>

<p>在本实验室中，你将在 <strong>“销售员”</strong> 表和 <strong>“销售额”</strong> 表之间创建多对多关系。你还将强制执行行级别安全性，以确保销售人员只能分析向其分配的区域的销售数据。</p>

<p>在本实验室中，你将学习如何：</p>

<ul>
  <li>
    <p>配置多对多关系</p>
  </li>
  <li>
    <p>强制执行行级别安全性</p>
  </li>
</ul>

<h3 id="实验室故事"><strong>实验室故事</strong></h3>

<p>本实验室是一个实验室系列中的诸多实验室之一，设计为从数据准备到作为报表和仪表板发布的完整故事。可以按任意顺序完成这些实验室。但是，如果你打算完成多个实验室，对于前 10 个实验室，建议你按以下顺序完成：</p>

<ol>
  <li>
    <p>在 Power BI Desktop 中准备数据</p>
  </li>
  <li>
    <p>在 Power BI Desktop 中加载数据</p>
  </li>
  <li>
    <p>在 Power BI Desktop 中对数据建模，第 1 部分</p>
  </li>
  <li>
    <p>在 Power BI Desktop 中对数据建模，第 2 部分</p>
  </li>
  <li>
    <p>在 Power BI Desktop 中创建 DAX 计算，第 1 部分</p>
  </li>
  <li>
    <p>在 Power BI Desktop 中创建 DAX 计算，第 2 部分</p>
  </li>
  <li>
    <p>在 Power BI Desktop 中设计报表，第 1 部分</p>
  </li>
  <li>
    <p>在 Power BI Desktop 中设计报表，第 2 部分</p>
  </li>
  <li>
    <p>创建 Power BI 仪表板</p>
  </li>
  <li>
    <p>在 Power BI Desktop 中执行数据分析</p>
  </li>
  <li>
    <p>创建 Power BI 分页报表</p>
  </li>
  <li>
    <p><strong>强制执行行级别安全性</strong></p>
  </li>
</ol>

<h2 id="练习-1强制执行行级别安全性"><strong>练习 1：强制执行行级别安全性</strong></h2>

<p>在此练习中，你将强制执行行级别安全性，以确保销售员只能看到向其分配的区域的销售额。</p>

<h3 id="任务-1入门"><strong>任务 1：入门</strong></h3>

<p>在此任务中，你将设置实验室环境。</p>

<p><em>重要说明：如果你从上一个实验室继续操作（并且已成功完成该实验室），则无需完成此任务；而是继续执行下一个任务。</em></p>

<ol>
  <li>
    <p>要打开 Power BI Desktop，请在任务栏上单击 Microsoft Power BI Desktop 快捷方式。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image1.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image1.png" alt="图片 8"></a></p>
  </li>
  <li>
    <p>要关闭开始窗口，请单击窗口左上角的 <strong>“X”</strong>。</p>

    <p><a href="/DA-100ZH-Analyzing-Data-with-Power-BI/Instructions/Labs/Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image2.png" target="_blank"><img src="/DA-100ZH-Analyzing-Data-with-Power-BI/Instructions/Labs/Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image2.png" alt="图片 7"></a></p>
  </li>
  <li>
    <p>要打开入门 Power BI Desktop 文件，请单击 <strong>“文件”</strong> 功能区选项卡以打开 Backstage 视图。</p>
  </li>
  <li>
    <p>选择 <strong>“打开报表”</strong>。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image3.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image3.png" alt="图片 6"></a></p>
  </li>
  <li>
    <p>单击 <strong>“浏览报表”</strong>。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image4.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image4.png" alt="图 5"></a></p>
  </li>
  <li>
    <p>在“<strong>打开</strong>”窗口中，导航到 <strong>D:\DA100\Labs\12-row-level-security\Starter</strong> 文件夹。</p>
  </li>
  <li>
    <p>选择 <strong>“Sales Analysis”</strong> 文件。</p>
  </li>
  <li>
    <p>单击 <strong>“打开”</strong>。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image5.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image5.png" alt="图 4"></a></p>
  </li>
  <li>
    <p>关闭可能打开的所有信息窗口。</p>
  </li>
  <li>
    <p>要创建该文件的副本，请单击 <strong>“文件”</strong> 功能区选项卡以打开 backstage 视图。</p>
  </li>
  <li>
    <p>选择 <strong>“另存为”</strong>。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image6.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image6.png" alt="图 3"></a></p>
  </li>
  <li>
    <p>如果系统提示应用更改，请单击 <strong>“应用”</strong>。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image7.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image7.png" alt="图 15"></a></p>
  </li>
  <li>
    <p>在 <strong>“另存为”</strong> 窗口中，导航到 <strong>“D:\DA100\MySolution”</strong> 文件夹。</p>
  </li>
  <li>
    <p>单击 <strong>“保存”</strong>。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image8.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image8.png" alt="图片 2"></a></p>
  </li>
</ol>

<h3 id="任务-2强制执行行级别安全性"><strong>任务 2：强制执行行级别安全性</strong></h3>

<p>在此任务中，你将强制执行行级别安全性，以确保销售员只能看到向其分配的区域的销售额。</p>

<ol>
  <li>
    <p>切换到“数据”视图。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image20.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image20.png" alt="图片 5701"></a></p>
  </li>
  <li>
    <p>在 <strong>“字段”</strong> 窗格中，选择 <strong>“Salesperson (Performance)”</strong> 表。</p>
  </li>
  <li>
    <p>查看数据，注意 Michael Blythe (EmployeeKey 281) 的 UPN 值为 <strong>michael-blythe@adventureworks.com</strong></p>

    <p><em>回想一下，Michael Blythe 被分配到了三个销售区域：美国东北部、美国中部和美国东南部。</em></p>
  </li>
  <li>
    <p>切换到“报表”视图。</p>
  </li>
  <li>
    <p>在 <strong>“建模”</strong> 功能区选项卡的 <strong>“安全性”</strong> 组内，单击 <strong>“管理角色”</strong>。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image21.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image21.png" alt="图片 5700"></a></p>
  </li>
  <li>
    <p>在 <strong>“管理角色”</strong> 窗口中，单击 <strong>“创建”</strong>。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image22.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image22.png" alt="图片 5702"></a></p>
  </li>
  <li>
    <p>将框中的选定文本替换为角色 <strong>“销售员”</strong> 的名称，然后按 <strong>Enter</strong>。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image23.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image23.png" alt="图片 5703"></a></p>
  </li>
  <li>
    <table>
      <tbody>
        <tr>
          <td>要分配筛选器，请在 <strong>“Salesperson (Performance)”</strong> 表中单击省略号“(…)”字符，然后选择 **“添加筛选器</td>
          <td>[UPN]”**。</td>
        </tr>
      </tbody>
    </table>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image24.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image24.png" alt="图片 5704"></a></p>
  </li>
  <li>
    <p>在 <strong>“表筛选器 DAX 表达式”</strong> 框中，通过将 <strong>“值”</strong> 替换为 <strong>“USERPRINCIPALNAME()”</strong> 来修改表达式。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image25.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image25.png" alt="图片 11"></a></p>

    <p><em>USERPRINCIPALNAME() 是一个数据分析表达式 (DAX) 函数，该函数返回经过身份验证的用户的姓名。也就是说，<strong>“Salesperson (Performance)”</strong> 表将按查询模型的用户的用户主体名称 (UPN) 进行筛选。</em></p>
  </li>
  <li>
    <p>单击 <strong>“保存”</strong>。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image26.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image26.png" alt="图片 5706"></a></p>
  </li>
  <li>
    <p>要测试安全角色，请在 <strong>“建模”</strong> 功能区选项卡的 <strong>“安全性”</strong> 组内，单击 <strong>“以其身份查看”</strong>。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image27.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image27.png" alt="图片 5708"></a></p>
  </li>
  <li>
    <p>在 <strong>“以角色身份查看”</strong> 窗口中，选中 <strong>“其他用户”</strong> 项，然后在相应的框中输入 <strong>“michael-blythe@adventureworks.com”</strong></p>
  </li>
  <li>
    <p>选中 <strong>“销售员”</strong> 角色。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image28.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image28.png" alt="图片 5709"></a></p>

    <p><em>通过此配置，你可以使用 <strong>“销售员”</strong> 角色，并使用 Michael Blythe 的名字模拟用户。</em></p>
  </li>
  <li>
    <p>单击 <strong>“确定”</strong>。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image29.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image29.png" alt="图片 5710"></a></p>
  </li>
  <li>
    <p>请注意报表页上面的黄色横幅，其中说明了测试安全性上下文。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image30.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image30.png" alt="图片 13"></a></p>
  </li>
  <li>
    <p>请注意，表视觉对象中只列出了销售员 <strong>Michael Blythe</strong>。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image31.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image31.png" alt="图片 5713"></a></p>
  </li>
  <li>
    <p>要停止测试，请在黄色横幅的右侧单击 <strong>“停止查看”</strong>。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image32.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image32.png" alt="图片 5712"></a></p>

    <p><em>将 Power BI Desktop 文件发布到 Power BI 服务后，你需要完成发布后任务，才能将安全主体映射到 <strong>“销售员”</strong> 角色。本实验室不执行此操作。</em></p>
  </li>
  <li>
    <p>要删除该角色，请在 <strong>“建模”</strong> 功能区选项卡的 <strong>“安全性”</strong> 组内，单击 <strong>“管理角色”</strong>。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image33.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image33.png" alt="图 16"></a></p>
  </li>
  <li>
    <p>在 <strong>“管理角色”</strong> 窗口中，单击 <strong>“删除”</strong>。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image34.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image34.png" alt="图片 17"></a></p>
  </li>
  <li>
    <p>当系统提示确认删除时，单击 <strong>“是，删除”</strong>。</p>
  </li>
  <li>
    <p>单击 <strong>“保存”</strong>。</p>

    <p><a href="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image35.png" target="_blank"><img src="Linked_image_Files/04-configure-data-model-in-power-bi-desktop-advanced_image35.png" alt="图片 18"></a></p>
  </li>
</ol>

<h3 id="任务-2完成"><strong>任务 2：完成</strong></h3>

<p>在此任务中，你将完成实验室。</p>

<ol>
  <li>保存 Power BI Desktop 文件。</li>
</ol>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/DA-100ZH-Analyzing-Data-with-Power-BI" target="_blank" class="ml-2">
                    MicrosoftLearning/DA-100ZH-Analyzing-Data-with-Power-BI
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D.js"></script>



</body></html>