<!DOCTYPE html><html lang="en"><head>
        <title>
            AZ-104ZH-MicrosoftAzureAdministrator
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                AZ-104ZH-MicrosoftAzureAdministrator
            </a>
            <a href="https://github.com/MicrosoftLearning/AZ-104ZH-MicrosoftAzureAdministrator" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="#练习-1">练习 1</a></li></ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="实验室-03b---使用-arm-模板管理-azure-资源">实验室 03b - 使用 ARM 模板管理 Azure 资源</h1>
<h1 id="学生实验室手册">学生实验室手册</h1>

<h2 id="实验室场景">实验室场景</h2>
<p>你已探索了与使用 Azure 门户预配资源并根据资源组整理资源相关的基本 Azure 管理功能，现在你需要使用 Azure 资源管理器模板来执行等效的任务</p>

<h2 id="目标">目标</h2>

<p>在本实验室中，你将：</p>

<ul>
  <li>任务 1：查看用于部署 Azure 托管磁盘的 ARM 模板</li>
  <li>任务 2： 使用 ARM 模板创建 Azure 托管磁盘</li>
  <li>任务 3：查看基于 ARM 模板的托管磁盘部署</li>
</ul>

<h2 id="预计用时20-分钟">预计用时：20 分钟</h2>

<h2 id="体系结构图">体系结构图</h2>

<p><a href="../media/lab03b.png" target="_blank"><img src="../media/lab03b.png" alt="图像"></a></p>

<h2 id="说明">说明</h2>

<h3 id="练习-1">练习 1</h3>

<h4 id="任务-1查看用于部署-azure-托管磁盘的-arm-模板">任务 1：查看用于部署 Azure 托管磁盘的 ARM 模板</h4>

<p>在此任务中，你将使用一个 Azure 资源管理器模板创建一个 Azure 磁盘资源。</p>

<ol>
  <li>
    <p>登录到 <a href="https://portal.azure.com"><strong>Azure 门户</strong></a>。</p>
  </li>
  <li>
    <p>在 Azure 门户中，搜索并选择 <strong>“资源组”</strong>。</p>
  </li>
  <li>
    <p>在资源组列表中，单击 <strong>“az104-03a-rg1”</strong>。</p>
  </li>
  <li>
    <p>在 <strong>“az104-03a-rg1”</strong> 资源组边栏选项卡中的 <strong>“设置”</strong> 部分，单击 <strong>“部署”</strong>。</p>
  </li>
  <li>
    <p>在 <strong>“az104-03a-rg1 - 部署”</strong> 边栏选项卡上，单击部署列表中的第一个条目。</p>
  </li>
  <li>
    <p>在 <strong>“Microsoft.ManagedDisk-<em>XXXXXXXXX</em> | 概述”</strong> 边栏选项卡上，单击 <strong>“模板”</strong>。</p>

    <blockquote>
      <p><strong>备注</strong>：查看模板内容，请注意，你可以选择将其<strong>下载</strong>到本地计算机、<strong>添加到库中</strong>，或重新<strong>部署</strong>。</p>
    </blockquote>
  </li>
  <li>
    <p>单击 <strong>“下载”</strong> 并将包含模板和参数文件的压缩文件保存到实验室计算机上的 <strong>“下载”</strong> 文件夹。</p>
  </li>
  <li>
    <p>在 <strong>“Microsoft.ManagedDisk-<em>XXXXXXXXX</em> | 模板”</strong> 边栏选项卡上，单击 <strong>“输入”</strong>。</p>
  </li>
  <li>
    <p>请记下 <strong>“位置”</strong> 参数的值。在下一个任务中需要使用它。</p>
  </li>
  <li>
    <p>将下载文件的内容提取到实验室计算机上的 <strong>“下载”</strong> 文件夹。</p>

    <blockquote>
      <p><strong>备注</strong>：这些文件也可以是 <strong>\Allfiles\Labs\03\az104-03b-md-template.json</strong> 和 <strong>\Allfiles\Labs\03\az104-03b-md-parameters.json</strong></p>
    </blockquote>
  </li>
  <li>
    <p>关闭所有 <strong>“文件资源管理器”</strong> 窗口。</p>
  </li>
</ol>

<h4 id="任务-2使用-arm-模板创建-azure-托管磁盘">任务 2：使用 ARM 模板创建 Azure 托管磁盘</h4>

<ol>
  <li>
    <p>在 Azure 门户中，搜索并选择 <strong>“部署自定义模板”</strong>。</p>
  </li>
  <li>
    <p>单击 <strong>“市场”</strong> 组下的 <strong>“模板部署(使用自定义模板进行部署)”</strong>。</p>
  </li>
  <li>
    <p>在 <strong>“自定义部署”</strong> 边栏选项卡上，单击 <strong>“在编辑器中构建自己的模板”</strong>。</p>
  </li>
  <li>
    <p>在 <strong>“编辑模版”</strong> 边栏选项卡上，单击 <strong>“加载文件”</strong> 并上传你在上一个任务中下载的 <strong>template.json</strong> 文件。</p>
  </li>
  <li>
    <p>在编辑器窗格中，移除以下行：</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock0" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock0" class="mt-0"><code class="language-json hljs"><span class="hljs-string"><span class="hljs-string">"sourceResourceId"</span></span>: {
    <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"String"</span></span>
},
<span class="hljs-string"><span class="hljs-string">"sourceUri"</span></span>: {
    <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"String"</span></span>
},
<span class="hljs-string"><span class="hljs-string">"sourceImageVersionId"</span></span>: {
    <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"String"</span></span>
},
<span class="hljs-string"><span class="hljs-string">"osType"</span></span>: {
    <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"String"</span></span>
},
</code></pre>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock1" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock1" class="mt-0"><code class="language-json hljs"><span class="hljs-string"><span class="hljs-string">"hyperVGeneration"</span></span>: {
    <span class="hljs-attr"><span class="hljs-attr">"defaultValue"</span></span>: <span class="hljs-string"><span class="hljs-string">"V1"</span></span>,
    <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"String"</span></span>
},      
</code></pre>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock2" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock2" class="mt-0"><code class="language-json hljs"><span class="hljs-string"><span class="hljs-string">"osType"</span></span>: <span class="hljs-string"><span class="hljs-string">"[parameters('osType')]"</span></span>,
</code></pre>

    <blockquote>
      <p><strong>备注</strong>：由于这些参数不适用于当前部署，因此将其移除。sourceResourceId、sourceUri、osType 和 hyperVGeneration 参数尤其适用于根据现有 VHD 文件创建 Azure 磁盘。</p>
    </blockquote>
  </li>
  <li>
    <p><strong>保存</strong>更改。</p>
  </li>
  <li>
    <p>返回 <strong>“自定义部署”</strong> 边栏选项卡，单击 <strong>“编辑参数”</strong>。</p>
  </li>
  <li>
    <p>在 <strong>“编辑模版”</strong> 边栏选项卡上，单击 <strong>“加载文件”</strong> 并上传你在上一个任务中下载的 <strong>parameters.json</strong> 文件，然后<strong>保存</strong>更改。</p>
  </li>
  <li>
    <p>返回 <strong>“自定义部署”</strong> 边栏选项卡，指定以下设置：</p>

    <table>
      <thead>
        <tr>
          <th>设置</th>
          <th>值</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>订阅</td>
          <td><em>在本实验室中使用的 Azure 订阅的名称</em></td>
        </tr>
        <tr>
          <td>资源组</td>
          <td><strong>新建</strong>资源组的名称 <strong>az104-03b-rg1</strong></td>
        </tr>
        <tr>
          <td>区域</td>
          <td>本实验室所用订阅中可用的任何 Azure 区域的名称</td>
        </tr>
        <tr>
          <td>磁盘名称</td>
          <td><strong>az104-03b-disk1</strong></td>
        </tr>
        <tr>
          <td>位置</td>
          <td>在上一任务中记下的位置参数值</td>
        </tr>
        <tr>
          <td>SKU</td>
          <td><strong>Standard_LRS</strong></td>
        </tr>
        <tr>
          <td>磁盘大小 (Gb)</td>
          <td><strong>32</strong></td>
        </tr>
        <tr>
          <td>创建选项</td>
          <td><strong>empty</strong></td>
        </tr>
        <tr>
          <td>磁盘加密集类型</td>
          <td><strong>EncryptionAtRestWithPlatformKey</strong></td>
        </tr>
        <tr>
          <td>网络访问策略</td>
          <td><strong>AllowAll</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>选择 <strong>“查看 + 创建”</strong>，然后选择 <strong>“创建”</strong>。</p>
  </li>
  <li>
    <p>验证部署是否成功完成。</p>
  </li>
</ol>

<h4 id="任务-3查看基于-arm-模板的托管磁盘部署">任务 3：查看基于 ARM 模板的托管磁盘部署</h4>

<ol>
  <li>
    <p>在 Azure 门户中，搜索并选择 <strong>“资源组”</strong>。</p>
  </li>
  <li>
    <p>在资源组列表中，单击 <strong>“az104-03b-rg1”</strong>。</p>
  </li>
  <li>
    <p>在 <strong>“az104-03b-rg1”</strong> 资源组边栏选项卡的 <strong>“设置”</strong> 部分，单击 <strong>“部署”</strong>。</p>
  </li>
  <li>
    <p>在 <strong>“az104-03b-rg1 - 部署”</strong> 边栏选项卡上，单击部署列表中的第一个条目，然后查看 <strong>“输入”</strong> 和 <strong>“模板”</strong> 边栏选项卡的内容。</p>
  </li>
</ol>

<h4 id="清理资源">清理资源</h4>

<blockquote>
  <p><strong>备注</strong>：不要删除你在本实验室中部署的资源。在本模块的下一个实验室中，你将引用它们。</p>
</blockquote>

<h4 id="回顾">回顾</h4>

<p>在本实验室中，你已：</p>

<ul>
  <li>查看用于部署 Azure 托管磁盘的 ARM 模板</li>
  <li>使用 ARM 模板创建一个 Azure 托管磁盘</li>
  <li>查看基于 ARM 模板的托管磁盘部署</li>
</ul>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/AZ-104ZH-MicrosoftAzureAdministrator" target="_blank" class="ml-2">
                    MicrosoftLearning/AZ-104ZH-MicrosoftAzureAdministrator
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D.js"></script>



</body></html>