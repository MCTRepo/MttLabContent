<!DOCTYPE html><html lang="en"><head>
        <title>
            AZ-104-MicrosoftAzureAdministrator
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="../../assets/css/style_v%3D907526b117000ffdbc71b1bcc102e524d83415a3.css">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="../../">
                AZ-104-MicrosoftAzureAdministrator
            </a>
            <a href="https://github.com/MicrosoftLearning/AZ-104-MicrosoftAzureAdministrator" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="#exercise-1">Exercise 1</a></li></ul>
                </nav>         
            </aside>
            <hr class>
            <article class="col-sm-10 mb-5">
                <h1 id="lab-03b---manage-azure-resources-by-using-arm-templates">Lab 03b - Manage Azure resources by Using ARM Templates</h1>
<h1 id="student-lab-manual">Student lab manual</h1>

<h2 id="lab-scenario">Lab scenario</h2>
<p>Now that you explored the basic Azure administration capabilities associated with provisioning resources and organizing them based on resource groups by using the Azure portal, you need to carry out the equivalent task by using Azure Resource Manager templates.</p>

<h2 id="objectives">Objectives</h2>

<p>In this lab, you will:</p>

<ul>
  <li>Task 1: Review an ARM template for deployment of an Azure managed disk</li>
  <li>Task 2: Create an Azure managed disk by using an ARM template</li>
  <li>Task 3: Review the ARM template-based deployment of the managed disk</li>
</ul>

<h2 id="estimated-timing-20-minutes">Estimated timing: 20 minutes</h2>

<h2 id="architecture-diagram">Architecture diagram</h2>

<p><a href="../media/lab03b.png" target="_blank"><img src="../media/lab03b.png" alt="image"></a></p>

<h2 id="instructions">Instructions</h2>

<h3 id="exercise-1">Exercise 1</h3>

<h4 id="task-1-review-an-arm-template-for-deployment-of-an-azure-managed-disk">Task 1: Review an ARM template for deployment of an Azure managed disk</h4>

<p>In this task, you will create an Azure disk resource by using an Azure Resource Manager template.</p>

<ol>
  <li>
    <p>Sign in to the <a href="https://portal.azure.com"><strong>Azure portal</strong></a>.</p>
  </li>
  <li>
    <p>In the Azure portal, search for and select <strong>Resource groups</strong>.</p>
  </li>
  <li>
    <p>In the list of resource groups, click <strong>az104-03a-rg1</strong>.</p>
  </li>
  <li>
    <p>On the <strong>az104-03a-rg1</strong> resource group blade, in the <strong>Settings</strong> section, click <strong>Deployments</strong>.</p>
  </li>
  <li>
    <p>On the <strong>az104-03a-rg1 - Deployments</strong> blade, click the first entry in the list of deployments.</p>
  </li>
  <li>
    <p>On the <strong>Microsoft.ManagedDisk-<em>XXXXXXXXX</em> | Overview</strong> blade, click <strong>Template</strong>.</p>

    <blockquote>
      <p><strong>Note</strong>: Review the content of the template and note that you have the option to <strong>Download</strong> it to the local computer, <strong>Add to library</strong>, or <strong>Deploy</strong> it again.</p>
    </blockquote>
  </li>
  <li>
    <p>Click <strong>Download</strong> and save the compressed file containing the template and parameters files to the <strong>Downloads</strong> folder on your lab computer.</p>
  </li>
  <li>
    <p>On the <strong>Microsoft.ManagedDisk-<em>XXXXXXXXX</em> | Template</strong> blade, click <strong>Inputs</strong>.</p>
  </li>
  <li>
    <p>Note the value of the <strong>location</strong> parameter. You will need it in the next task.</p>
  </li>
  <li>
    <p>Extract the content of the downloaded file into the <strong>Downloads</strong> folder on your lab computer.</p>

    <blockquote>
      <p><strong>Note</strong>: These files are also available as <strong>\Allfiles\Labs\03\az104-03b-md-template.json</strong> and <strong>\Allfiles\Labs\03\az104-03b-md-parameters.json</strong></p>
    </blockquote>
  </li>
  <li>
    <p>Close all <strong>File Explorer</strong> windows.</p>
  </li>
</ol>

<h4 id="task-2-create-an-azure-managed-disk-by-using-an-arm-template">Task 2: Create an Azure managed disk by using an ARM template</h4>

<ol>
  <li>
    <p>In the Azure portal, search for and select <strong>Deploy a custom template</strong>.</p>
  </li>
  <li>
    <p>Click <strong>Template deployment (deploy using custom templates)</strong> found under the <strong>Marketplace</strong> group.</p>
  </li>
  <li>
    <p>On the <strong>Custom deployment</strong> blade, click <strong>Build your own template in the editor</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Edit template</strong> blade, click <strong>Load file</strong> and upload the <strong>template.json</strong> file you downloaded in the previous task.</p>
  </li>
  <li>
    <p>Within the editor pane, remove the following lines:</p>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock0" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock0" class="mt-0"><code class="language-json hljs"><span class="hljs-string"><span class="hljs-string">"sourceResourceId"</span></span>: {
    <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"String"</span></span>
},
<span class="hljs-string"><span class="hljs-string">"sourceUri"</span></span>: {
    <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"String"</span></span>
},
<span class="hljs-string"><span class="hljs-string">"osType"</span></span>: {
    <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"String"</span></span>
},
</code></pre>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock1" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock1" class="mt-0"><code class="language-json hljs"><span class="hljs-string"><span class="hljs-string">"hyperVGeneration"</span></span>: {
    <span class="hljs-attr"><span class="hljs-attr">"defaultValue"</span></span>: <span class="hljs-string"><span class="hljs-string">"V1"</span></span>,
    <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"String"</span></span>
},      
</code></pre>

    <div class="code-header mt-3 mb-0 bg-light d-flex justify-content-between border"><span class="mx-2 text-muted text-capitalize font-weight-light">code</span><button class="m-0 btn btn-code btn-sm btn-light codeBtn rounded-0 border-left text-muted font-weight-light" data-clipboard-target="#codeBlock2" type="button"><i class="fa fa-files-o mr-2" aria-hidden="true"></i>Copy</button></div><pre id="codeBlock2" class="mt-0"><code class="language-json hljs"><span class="hljs-string"><span class="hljs-string">"osType"</span></span>: <span class="hljs-string"><span class="hljs-string">"[parameters('osType')]"</span></span>,
</code></pre>

    <blockquote>
      <p><strong>Note</strong>: These parameters are removed since they are not applicable to the current deployment. In particular, sourceResourceId, sourceUri, osType, and hyperVGeneration parameters are applicable to creating an Azure disk from an existing VHD file.</p>
    </blockquote>
  </li>
  <li>
    <p><strong>Save</strong> the changes.</p>
  </li>
  <li>
    <p>Back on the <strong>Custom deployment</strong> blade, click <strong>Edit parameters</strong>.</p>
  </li>
  <li>
    <p>On the <strong>Edit parameters</strong> blade, click <strong>Load file</strong> and upload the <strong>parameters.json</strong> file you downloaded in the previous task, and <strong>Save</strong> the changes.</p>
  </li>
  <li>
    <p>Back on the <strong>Custom deployment</strong> blade, specify the following settings:</p>

    <table>
      <thead>
        <tr>
          <th>Setting</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Subscription</td>
          <td><em>the name of the Azure subscription you are using in this lab</em></td>
        </tr>
        <tr>
          <td>Resource Group</td>
          <td>the name of a <strong>new</strong> resource group <strong>az104-03b-rg1</strong></td>
        </tr>
        <tr>
          <td>Region</td>
          <td>the name of any Azure region available in the subscription you are using in this lab</td>
        </tr>
        <tr>
          <td>Disk Name</td>
          <td><strong>az104-03b-disk1</strong></td>
        </tr>
        <tr>
          <td>Location</td>
          <td>the value of the location parameter you noted in the previous task</td>
        </tr>
        <tr>
          <td>Sku</td>
          <td><strong>Standard_LRS</strong></td>
        </tr>
        <tr>
          <td>Disk Size Gb</td>
          <td><strong>32</strong></td>
        </tr>
        <tr>
          <td>Create Option</td>
          <td><strong>empty</strong></td>
        </tr>
        <tr>
          <td>Disk Encryption Set Type</td>
          <td><strong>EncryptionAtRestWithPlatformKey</strong></td>
        </tr>
        <tr>
          <td>Network Access Policy</td>
          <td><strong>AllowAll</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Select <strong>Review + Create</strong> and then select <strong>Create</strong>.</p>
  </li>
  <li>
    <p>Verify that the deployment completed successfully.</p>
  </li>
</ol>

<h4 id="task-3-review-the-arm-template-based-deployment-of-the-managed-disk">Task 3: Review the ARM template-based deployment of the managed disk</h4>

<ol>
  <li>
    <p>In the Azure portal, search for and select <strong>Resource groups</strong>.</p>
  </li>
  <li>
    <p>In the list of resource groups, click <strong>az104-03b-rg1</strong>.</p>
  </li>
  <li>
    <p>On the <strong>az104-03b-rg1</strong> resource group blade, in the <strong>Settings</strong> section, click <strong>Deployments</strong>.</p>
  </li>
  <li>
    <p>From the <strong>az104-03b-rg1 - Deployments</strong> blade, click the first entry in the list of deployments and review the content of the <strong>Input</strong> and <strong>Template</strong> blades.</p>
  </li>
</ol>

<h4 id="clean-up-resources">Clean up resources</h4>

<blockquote>
  <p><strong>Note</strong>: Do not delete resources you deployed in this lab. You will reference them in the next lab of this module.</p>
</blockquote>

<h4 id="review">Review</h4>

<p>In this lab, you have:</p>

<ul>
  <li>Reviewed an ARM template for deployment of an Azure managed disk</li>
  <li>Created an Azure managed disk by using an ARM template</li>
  <li>Reviewed the ARM template-based deployment of the managed disk</li>
</ul>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom d-print-none">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/AZ-104-MicrosoftAzureAdministrator" target="_blank" class="ml-2">
                    MicrosoftLearning/AZ-104-MicrosoftAzureAdministrator
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="../../assets/js/script_v%3D907526b117000ffdbc71b1bcc102e524d83415a3.js"></script>



</body></html>